
var $R=["Method %s in class %s threw exception [%s]","Procedure %s threw exception [%s]","Internal tag-object is null error","Failed to create internal tag-object","Invalid tag handle error","Invalid attribute-name error","Invalid property-name error","Invalid style-name error","Failed to attach element to owner","Owner tag-object is NIL error","invalid owner handle error","Stream storage failed, structure contains function reference error","Stream storage failed, structure contains symbol reference error","Stream storage failed, structure contains uknown data-type error","Failed to read structure, invalid datatype error","Failed to read structure, invalid data signature error","Failed to alter value, field is read-only error","Operation failed, dataset is not active error","Invalid state for operation error","Failed to match field class for datatype error","Field definition cannot be altered in a live dataset error","Failed to read field value, invalid field signature error","A field with that name already exists error","Failed to add field definition, invalid name error","Delete operation failed, reference was NIL error","Read of field-definitions failed, invalid header signature error","Loading dataset failed, invalid signature error","Loading dataset failed, invalid header identity error","Failed to store dataset, system threw exception: %s","Failed to load dataset, system threw exception: %s","Failed to load dataset, invalid header signature error","Failed to load dataset, invalid source error","Failed to create dataset, no field definitions error","Delete failed, dataset is empty error","Delete failed, misaligned RecNo [%s]","Unknown field datatype, table structure is corrupt or damaged error","Invalid table structure, expected field signature error","Failed to read dataset fields, invalid signature error","Unknown datatype, binary extraction failed error","Invalid handle for operation, reference was null error","Invalid stream style for operation, expected memorystream","Method not implemented","write failed, system threw exception: %s","read failed, system threw exception: %s","Failed to initialize from graphics-context: ","Invalid component registration","Failed to create attribute storage object, invalid handle error","Failed to read attribute field, browser threw exception: %s","Failed to write attribute field, browser threw exception: %s","invalid owner handle error"];function Trim$_String_Integer_Integer_(s,a,b){if(a<0)a=0;if(b<0)b=0;return s.substr(a,s.length-a-b)}
function Trim$_String_(s){return s.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}
var TObject={$ClassName:"TObject",$Parent:null,ClassName:function(s){return s.$ClassName},ClassType:function(s){return s},ClassParent:function(s){return s.$Parent},$Init:function(){},Create:function(s){return s},Destroy:function(s){for(var prop in s)if(s.hasOwnProperty(prop))delete s.prop},Destroy$:function(s){return s.ClassType.Destroy(s)},Free:function(s){if(s!==null)s.ClassType.Destroy(s)}}
function StrReplace(s,o,n){return o?s.replace(new RegExp(StrRegExp(o),"g"),n):s}
function StrRegExp(s){return s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}
function SameText(a,b){return a.toUpperCase()==b.toUpperCase()}
function IntToHex2(v){var r=v.toString(16);return(r.length==1)?"0"+r:r}
var sprintf=(function(){function get_type(variable){return Object.prototype.toString.call(variable).slice(8,-1).toLowerCase()}
function str_repeat(input,multiplier){for(var output=[];multiplier>0;output[--multiplier]=input){}
return output.join('')}
var str_format=function(){if(!str_format.cache.hasOwnProperty(arguments[0])){str_format.cache[arguments[0]]=str_format.parse(arguments[0])}
return str_format.format.call(null,str_format.cache[arguments[0]],arguments)};str_format.format=function(parse_tree,argv){var cursor=1,tree_length=parse_tree.length,node_type='',arg,output=[],i,k,match,pad,pad_character,pad_length;for(i=0;i<tree_length;i++){node_type=get_type(parse_tree[i]);if(node_type==='string'){output.push(parse_tree[i])}
else if(node_type==='array'){match=parse_tree[i];if(match[2]){arg=argv[cursor];for(k=0;k<match[2].length;k++){if(!arg.hasOwnProperty(match[2][k])){throw(sprintf('[sprintf] property "%s" does not exist',match[2][k]))}
arg=arg[match[2][k]]}}
else if(match[1]){arg=argv[match[1]]}
else{arg=argv[cursor++]}
if(/[^s]/.test(match[8])&&(get_type(arg)!='number')){throw(sprintf('[sprintf] expecting number but found %s',get_type(arg)))}
switch(match[8]){case'b':arg=arg.toString(2);break;case'c':arg=String.fromCharCode(arg);break;case'd':arg=String(parseInt(arg,10));if(match[7]){arg=str_repeat('0',match[7]-arg.length)+arg}break;case'e':arg=match[7]?arg.toExponential(match[7]):arg.toExponential();break;case'f':arg=match[7]?parseFloat(arg).toFixed(match[7]):parseFloat(arg);break;case'o':arg=arg.toString(8);break;case's':arg=((arg=String(arg))&&match[7]?arg.substring(0,match[7]):arg);break;case'u':arg=Math.abs(arg);break;case'x':arg=arg.toString(16);break;case'X':arg=arg.toString(16).toUpperCase();break}
arg=(/[def]/.test(match[8])&&match[3]&&arg>=0?'+'+arg:arg);pad_character=match[4]?match[4]=='0'?'0':match[4].charAt(1):' ';pad_length=match[6]-String(arg).length;pad=match[6]?str_repeat(pad_character,pad_length):'';output.push(match[5]?arg+pad:pad+arg)}}
return output.join('')};str_format.cache={};str_format.parse=function(fmt){var _fmt=fmt,match=[],parse_tree=[],arg_names=0;while(_fmt){if((match=/^[^\x25]+/.exec(_fmt))!==null){parse_tree.push(match[0])}
else if((match=/^\x25{2}/.exec(_fmt))!==null){parse_tree.push('%')}
else if((match=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(_fmt))!==null){if(match[2]){arg_names|=1;var field_list=[],replacement_field=match[2],field_match=[];if((field_match=/^([a-z_][a-z_\d]*)/i.exec(replacement_field))!==null){field_list.push(field_match[1]);while((replacement_field=replacement_field.substring(field_match[0].length))!==''){if((field_match=/^\.([a-z_][a-z_\d]*)/i.exec(replacement_field))!==null){field_list.push(field_match[1])}
else if((field_match=/^\[(\d+)\]/.exec(replacement_field))!==null){field_list.push(field_match[1])}
else{throw('[sprintf] huh?')}}}
else{throw('[sprintf] huh?')}
match[2]=field_list}
else{arg_names|=2}
if(arg_names===3){throw('[sprintf] mixing positional and named placeholders is not (yet) supported')}
parse_tree.push(match)}
else{throw('[sprintf] huh?')}
_fmt=_fmt.substring(match[0].length)}
return parse_tree};return str_format})();function Format(f,a){a.unshift(f);return sprintf.apply(null,a)}
function FloatToStr$_Float_(i){return i.toString()}
function FloatToStr$_Float_Integer_(i,p){return(p==99)?i.toString():i.toFixed(p)}
var Exception={$ClassName:"Exception",$Parent:TObject,$Init:function(){FMessage=""},Create:function(s,Msg){s.FMessage=Msg;return s}}
function Delete(s,i,n){var v=s.v;if((i<=0)||(i>v.length)||(n<=0))return;s.v=v.substr(0,i-1)+v.substr(i+n-1)}
function ClampInt(v,mi,ma){return v<mi?mi:v>ma?ma:v}
function $W(e){return e.ClassType?e:Exception.Create($New(Exception),e.constructor.name+", "+e.message)}
function $SetInc(s,v,m,n){v-=m;if(v>=0&&v<n)s[v>>5]|=1<<(v&31)}
function $SetIn(s,v,m,n){v-=m;return(v<0&&v>=n)?false:(s[v>>5]&(1<<(v&31)))!=0}
function $SetExc(s,v,m,n){v-=m;if(v>=0&&v<n)s[v>>5]&=~(1<<(v&31))}
function $NewDyn(c,z){if(c==null)throw Exception.Create($New(Exception),"ClassType is nil"+z);var i={ClassType:c};c.$Init(i);return i}
function $New(c){var i={ClassType:c};c.$Init(i);return i}
function $Is(o,c){if(o===null)return false;return $Inh(o.ClassType,c)};function $Inh(s,c){if(s===null)return false;while((s)&&(s!==c))s=s.$Parent;return(s)?true:false};function $Event1(i,f){var li=i,lf=f;return function(a){return lf.call(li,li,a)}}
function $Event0(i,f){var li=i,lf=f;return function(){return lf.call(li,li)}}
function $AsIntf(o,i){if(o===null)return null;var r=o.ClassType.$Intf[i].map(function(e){return function(){var arg=Array.prototype.slice.call(arguments);arg.splice(0,0,o);return e.apply(o,arg)}});r.O=o;return r};function $AsClass(s,c){if((s===null)||$Inh(s,c))return s;throw Exception.Create($New(Exception),"Cannot cast class \""+s.$ClassName+"\" to class \""+c.$ClassName+"\"")}
function $As(o,c){if((o===null)||$Is(o,c))return o;throw Exception.Create($New(Exception),"Cannot cast instance of type \""+o.ClassType.$ClassName+"\" to class \""+c.$ClassName+"\"")}
function $ArraySwap(a,i1,i2){var t=a[i1];a[i1]=a[i2];a[i2]=t}
function WriteLn(value$5){if(window.console){window.console.log(value$5)}};function w3_setStyle(tagRef,aStyleName,aStyleValue){tagRef.style[aStyleName]=aStyleValue};function w3_setElementParentByRef(aElement,aParent){aParent.appendChild(aElement)};function w3_setAttrib(tagRef$1,aAttribName,aValue){tagRef$1.setAttribute(aAttribName,aValue)};function w3_RequestAnimationFrame(aMethod){var R=undefined;if(!vRequestAnimFrame)InitAnimationFrameShim();R=vRequestAnimFrame(aMethod);return R};function w3_RemoveEvent(a_tagRef,a_eventName,a_callback,a_useCapture){if(a_eventName=="mousewheel")a_eventName="DOMMouseScroll";a_tagRef.removeEventListener(a_eventName,a_callback,a_useCapture)};function w3_RemoveElementByRef(aElement$1,aParent$1){aParent$1.removeChild(aElement$1)};function w3_RemoveClass(tagRef$2,aClassName){var reg;reg=new RegExp("(\\s|^)"+aClassName+"(\\s|$)");(tagRef$2).className=(tagRef$2).className.replace(reg," ").replace('  ',' ').trim()};function w3_RegisterBrowserAPI(aDriver){vDriver=aDriver};function w3_NameToUrlStr(aUrl){var R="";R="url("+aUrl+")";return R};function w3_HasClass(tagRef$3,aClassName$1){var R=false;R=((tagRef$3).className.match(new RegExp("(\\s|^)"+aClassName$1+"(\\s|$)")))?true:false;return R};function w3_GetUniqueObjId(){var R="";++vUniqueNumber;R="OBJ"+vUniqueNumber.toString();return R};function w3_GetUniqueNumber(){var R=0;++vUniqueNumber;R=vUniqueNumber;return R};function w3_getStyleAsStr(tagRef$4,aStyleName$1){var R="";var mObj=undefined;var mData;mObj=document.defaultView.getComputedStyle(tagRef$4,null);if(mObj)
mData=(mObj).getPropertyValue(aStyleName$1);if(mData)
{if(typeof(mData)==="number"){R=String(mData)}else{if(typeof(mData)==="string")
R=mData}}
return R};function w3_getStyleAsInt(tagRef$5,aStyleName$2){var R=0;var mObj$1=undefined;var mData$1;mObj$1=document.defaultView.getComputedStyle(tagRef$5,null);if(mObj$1)
mData$1=(mObj$1).getPropertyValue(aStyleName$2);if(mData$1)
{if(typeof(mData$1)==="number")
{R=mData$1}else{if(typeof(mData$1)==="string")
{mData$1=parseInt(mData$1);if(typeof(mData$1)==="number")
R=mData$1}}}
return R};function w3_getStyleAsFloat(tagRef$6,aStyleName$3){var R=0;var mObj$2=undefined;var mData$2;mObj$2=document.defaultView.getComputedStyle(tagRef$6,null);if(mObj$2)
mData$2=(mObj$2).getPropertyValue(aStyleName$3);if(mData$2)
{if(typeof(mData$2)==="number"){R=mData$2}else{if(typeof(mData$2)==="string")
{mData$2=parseFloat(mData$2);if(!isNaN(mData$2))
R=mData$2}}}
return R};function w3_getStyle(tagRef$7,aStyleName$4){var R=undefined;var mObj$3=undefined;mObj$3=document.defaultView.getComputedStyle(tagRef$7,null);if(mObj$3)
R=(mObj$3).getPropertyValue(aStyleName$4);return R};function w3_getPropertyAsInt(tagRef$8,aPropName){var R=0;R=parseInt(tagRef$8[aPropName],10);return R};function w3_getIsSafari(){var R=false;if(navigator.userAgent.match(/Safari/i))R=true;return R};function w3_getIsOpera(){var R=false;if(navigator.userAgent.match(/Opera/i))R=true;return R};function w3_getIsIPod(){var R=false;if(navigator.userAgent.match(/iPod/i))R=true;return R};function w3_getIsIPhone(){var R=false;if(navigator.userAgent.match(/iPhone/i))R=true;return R};function w3_getIsIPad(){var R=false;if(navigator.userAgent.match(/iPad/i))R=true;return R};function w3_getIsInternetExplorer(){var R=false;if(navigator.userAgent.match(/MSIE/i))R=true;return R};function w3_getIsFirefox(){var R=false;if(navigator.userAgent.match(/Firefox/i))R=true;return R};function w3_getIsChrome(){var R=false;if(navigator.userAgent.match(/Chrome/i))R=true;return R};function w3_getIsAndroid(){var R=false;if(navigator.userAgent.match(/Android/i))R=true;return R};function w3_getAttribAsStr(tagRef$9,aAttribName$1,default$1){var R="";var mRef=undefined;mRef=tagRef$9.getAttribute(aAttribName$1,0);if(mRef){R=String(mRef)}else R=default$1;return R};function w3_CSSPrefixDef(aCSS){var R="";R="-"+BrowserAPI().FCSSToken+"-"+aCSS;return R};function w3_CSSPrefix(aCSS$1){var R="";R=BrowserAPI().FCSSToken+aCSS$1;return R};function w3_createHtmlElement(aTypeName){var R=undefined;R=document.createElement(aTypeName);return R};function w3_bind2(obj_ref,event_name,callback){obj_ref[event_name]=callback};function w3_AddEvent(a_tagRef$1,a_eventName$1,a_callback$1,a_useCapture$1){if(a_eventName$1=="mousewheel")a_eventName$1="DOMMouseScroll";a_tagRef$1.addEventListener(a_eventName$1,a_callback$1,a_useCapture$1)};function w3_AddClass(tagRef$10,aClassName$2){var _qr=((tagRef$10).className.match(new RegExp("(\\s|^)"+aClassName$2+"(\\s|$)")))?true:false;if(_qr===false)
(tagRef$10).className+=(" "+aClassName$2)};var TW3CustomBrowserAPI={$ClassName:"TW3CustomBrowserAPI",$Parent:TObject,$Init:function($){TObject.$Init($);$.FCSSAnimation=$.FCSSBackgroundColor=$.FCSSBackgroundImage=$.FCSSBackgroundPos=$.FCSSBackgroundSize=$.FCSSToken=$.FCSSTransform=""},DevicePixelRatio:function(){var R=0;R=window.devicePixelRatio||1;return R},Destroy:TObject.Destroy};var TW3WebkitBrowserAPI={$ClassName:"TW3WebkitBrowserAPI",$Parent:TW3CustomBrowserAPI,$Init:function($){TW3CustomBrowserAPI.$Init($)},Create$18:function(S){S.FCSSToken="webkit";S.FCSSBackgroundImage="background-image";S.FCSSBackgroundSize="webkitbackgroundSize";S.FCSSBackgroundPos="webkitbackgroundPosition";S.FCSSBackgroundColor="webkitbackgroundColor";S.FCSSTransform="webkitTransform";S.FCSSAnimation="webkitAnimation";return S},Destroy:TObject.Destroy};var TW3OperaBrowserAPI={$ClassName:"TW3OperaBrowserAPI",$Parent:TW3CustomBrowserAPI,$Init:function($){TW3CustomBrowserAPI.$Init($)},Create$19:function(S){S.FCSSToken="O";S.FCSSBackgroundImage="OBackgroundImage";S.FCSSBackgroundSize="OBackgroundSize";S.FCSSBackgroundPos="OBackgroundPosition";S.FCSSBackgroundColor="backgroundColor";S.FCSSTransform="OTransform";S.FCSSAnimation="OAnimation";return S},Destroy:TObject.Destroy};var TW3IEBrowserAPI={$ClassName:"TW3IEBrowserAPI",$Parent:TW3CustomBrowserAPI,$Init:function($){TW3CustomBrowserAPI.$Init($)},Create$20:function(S){S.FCSSToken="ms";S.FCSSBackgroundImage="msBackgroundImage";S.FCSSBackgroundSize="msBackgroundSize";S.FCSSBackgroundPos="msBackgroundPosition";S.FCSSBackgroundColor="backgroundColor";S.FCSSTransform="msTransform";S.FCSSAnimation="msAnimation";return S},Destroy:TObject.Destroy};var TW3FirefoxBrowserAPI={$ClassName:"TW3FirefoxBrowserAPI",$Parent:TW3CustomBrowserAPI,$Init:function($){TW3CustomBrowserAPI.$Init($)},Create$21:function(S){S.FCSSToken="Moz";S.FCSSBackgroundImage="backgroundImage";S.FCSSBackgroundSize="backgroundSize";S.FCSSBackgroundPos="backgroundPosition";S.FCSSBackgroundColor="backgroundColor";S.FCSSTransform="MozTransform";S.FCSSAnimation="MozAnimation";return S},Destroy:TObject.Destroy};var TW3BrowserVendor=["bvUnknown","bviOS","bvAndroid","bvChrome","bvSafari","bvFirefox","bvOpera","bvIE"];function TControlHandleHelper$Ready(Self$1){var R=false;var mRef$2=undefined;if(TControlHandleHelper$Valid(Self$1)){mRef$2=TControlHandleHelper$Root(Self$1);R=TControlHandleHelper$Valid(mRef$2)&&mRef$2.body}
return R}
function TControlHandleHelper$ReadyExecute(Self$2,OnReady){function DelayedDispatch(EntryPoint,Delay){setTimeout(EntryPoint,Delay)};if(TControlHandleHelper$Valid(Self$2)){if(TControlHandleHelper$Ready(Self$2)){OnReady()}else DelayedDispatch(function(){TControlHandleHelper$ReadyExecute(Self$2,OnReady)},100)}}
function TControlHandleHelper$Root(Self$3){var R=undefined;var mAncestor=undefined;if(TControlHandleHelper$Valid(Self$3)){mAncestor=Self$3;while(mAncestor.parentNode){mAncestor=mAncestor.parentNode}
R=mAncestor}else R=null;return R}
function TControlHandleHelper$Valid(Self$4){var R=false;R=!((Self$4==undefined)||(Self$4==null));return R}
function BrowserAPI(){var R=null;if(vDriver===null)InternalInitVendorInfo();R=vDriver;return R};function InternalInitVendorInfo(){if(w3_getIsAndroid()){vVendor=2}else if(w3_getIsSafari()){vVendor=4}else if(w3_getIsFirefox()){vVendor=5}else if(w3_getIsChrome()){vVendor=3}else if(w3_getIsInternetExplorer()){vVendor=7}else if(w3_getIsOpera())vVendor=6;if(vVendor==0){if(w3_getIsIPhone()||w3_getIsIPad()||w3_getIsIPod())vVendor=1}
switch(vVendor){case 1:case 4:case 3:case 2:w3_RegisterBrowserAPI(TW3WebkitBrowserAPI.Create$18($New(TW3WebkitBrowserAPI)));break;case 5:w3_RegisterBrowserAPI(TW3FirefoxBrowserAPI.Create$21($New(TW3FirefoxBrowserAPI)));break;case 7:w3_RegisterBrowserAPI(TW3IEBrowserAPI.Create$20($New(TW3IEBrowserAPI)));break;case 6:w3_RegisterBrowserAPI(TW3OperaBrowserAPI.Create$19($New(TW3OperaBrowserAPI)));break;default:w3_RegisterBrowserAPI(TW3FirefoxBrowserAPI.Create$21($New(TW3FirefoxBrowserAPI)))}};function InitAnimationFrameShim(){vRequestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){return window.setTimeout(callback,1000/60)}})();vCancelAnimFrame=(function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||function(handle){window.clearTimeout(handle)}})()};function VarIsValidRef(aRef){var R=false;R=!((aRef==null)||(aRef==undefined));return R};function TW3VariantHelper$IsArray(Self$5){var R=false;R=((Self$5)!==undefined)&&(typeof Self$5!==null)&&(typeof Self$5==="object")&&((Self$5).length!==undefined);return R}
function TW3VariantHelper$IsBoolean(Self$6){var R=false;R=((Self$6)!==undefined)&&(typeof Self$6!==null)&&(typeof Self$6==="boolean");return R}
function TW3VariantHelper$IsFloat(Self$7){var R=false;R=((Self$7)!==undefined)&&(typeof Self$7!==null)&&(typeof Self$7==="number")&&(Math.round(Self$7)!=Self$7);return R}
function TW3VariantHelper$IsFunction(Self$8){var R=false;R=((Self$8)!==undefined)&&(typeof Self$8!==null)&&(typeof Self$8==="function");return R}
function TW3VariantHelper$IsInteger$1(Self$9){var R=false;R=((Self$9)!==undefined)&&(typeof Self$9!==null)&&(typeof Self$9==="number")&&(Math.round(Self$9)===Self$9);return R}
function TW3VariantHelper$IsObject(Self$10){var R=false;R=((Self$10)!==undefined)&&(typeof Self$10!==null)&&(typeof Self$10==="object")&&((Self$10).length===undefined);return R}
function TW3VariantHelper$IsString$1(Self$11){var R=false;R=((Self$11)!==undefined)&&(typeof Self$11!==null)&&(typeof Self$11==="string");return R}
function TW3VariantHelper$IsSymbol(Self$12){var R=false;R=((Self$12)!==undefined)&&(typeof Self$12!==null)&&(typeof Self$12==="symbol");return R}
function TW3VariantHelper$IsUnassigned(Self$13){var R=false;R=(typeof Self$13===undefined);return R}
var TW3VariantDataType=["vdUnknown","vdBoolean","vdInteger","vdFloat","vdString","vdSymbol","vdFunction","vdObject","vdArray"];var TW3OwnedObject={$ClassName:"TW3OwnedObject",$Parent:TObject,$Init:function($){TObject.$Init($);$.FOwner=null},AcceptParent:function(S,aObject){var R=false;R=true;return R},Create$11:function(S,AOwner){TObject.Create(S);if(TW3OwnedObject.AcceptParent$(S,AOwner)){S.FOwner=AOwner}else{throw EW3Exception.CreateFmt($New(EW3OwnedObject),$R[0],["constructor",TObject.ClassName(S.ClassType),"Unsuitable owner object-type error"])}
return S},Destroy:TObject.Destroy,AcceptParent$:function($){return $.ClassType.AcceptParent.apply($.ClassType,arguments)},Create$11$:function($){return $.ClassType.Create$11.apply($.ClassType,arguments)}};var TVariant={$ClassName:"TVariant",$Parent:TObject,$Init:function($){TObject.$Init($)},AsBool:function(aValue$1){var R=false;if(aValue$1!=undefined&&aValue$1!=null)R=(aValue$1?true:false);return R},AsFloat:function(aValue$2){var R=0;if(aValue$2!=undefined&&aValue$2!=null)R=Number(aValue$2);return R},AsInteger:function(aValue$3){var R=0;if(aValue$3!=undefined&&aValue$3!=null)R=parseInt(aValue$3,10);return R},AsObject:function(aValue$4){var R=null;if(aValue$4!=undefined&&aValue$4!=null){R=aValue$4}
return R},AsString:function(aValue$5){var R="";if(aValue$5!=undefined&&aValue$5!=null)R=String(aValue$5);return R},CreateObject:function(){var R=undefined;return{};return R},IsNull:function(aValue$6){var R=false;R=aValue$6==null;return R},IsNumber:function(aValue$7){var R=false;if(aValue$7==null)return false;if(aValue$7==undefined)return false;if(typeof(aValue$7)==="number")return true;return R},IsString:function(aValue$8){var R=false;if(aValue$8==null)return false;if(aValue$8==undefined)return false;if(typeof(aValue$8)==="string")return true;return R},ValidRef:function(aValue$9){var R=false;R=!((aValue$9==null)||(aValue$9==undefined));return R},Destroy:TObject.Destroy};function Copy$TRectF(s,d){d.Bottom=s.Bottom;d.Left=s.Left;d.Right=s.Right;d.Top=s.Top;return d}
function Clone$TRectF($){return{Bottom:$.Bottom,Left:$.Left,Right:$.Right,Top:$.Top}}
function CreateBounded(x1$6,y1$6,x2$6,y2$6){var R={Bottom:0,Left:0,Right:0,Top:0};if(x1$6<x2$6){R.Left=x1$6;R.Right=x2$6}else{R.Left=x2$6;R.Right=x1$6}
if(y1$6<y2$6){R.Top=y1$6;R.Bottom=y2$6}else{R.Top=y2$6;R.Bottom=y1$6}
return R}
function TRectF$Height(Self$14){var R=0;R=Self$14.Bottom-Self$14.Top;return R}
function TRectF$Width(Self$15){var R=0;R=Self$15.Right-Self$15.Left;return R}
function Copy$TRect(s,d){d.Bottom$1=s.Bottom$1;d.Left$1=s.Left$1;d.Right$1=s.Right$1;d.Top$1=s.Top$1;return d}
function Clone$TRect($){return{Bottom$1:$.Bottom$1,Left$1:$.Left$1,Right$1:$.Right$1,Top$1:$.Top$1}}
function TRect$Height$1(Self$16){var R=0;R=Self$16.Bottom$1-Self$16.Top$1;return R}
function TRect$Width$1(Self$17){var R=0;R=Self$17.Right$1-Self$17.Left$1;return R}
function Copy$TPointF(s,d){d.X=s.X;d.Y=s.Y;return d}
function Clone$TPointF($){return{X:$.X,Y:$.Y}}
function Copy$TPoint(s,d){d.X$1=s.X$1;d.Y$1=s.Y$1;return d}
function Clone$TPoint($){return{X$1:$.X$1,Y$1:$.Y$1}}
function Create$17(aCol,aRow){var R={X$1:0,Y$1:0};R.X$1=aCol;R.Y$1=aRow;return R}
function Copy$TPairData(s,d){return d}
function Clone$TPairData($){return{}}
function TMemoryHandleHelper$Valid$1(Self$18){var R=false;R=!((Self$18==undefined)||(Self$18==null));return R}
function TMemoryHandleHelper$Defined(Self$19){var R=false;R=!(self==undefined);return R}
var TInteger={$ClassName:"TInteger",$Parent:TObject,$Init:function($){TObject.$Init($)},Diff:function(Primary,Secondary){var R=0;if(Primary!=Secondary){if(Primary>Secondary){R=Primary-Secondary}else R=Secondary-Primary;if(R<0)R=(R-1)^(-1)}else R=0;return R},EnsureRange:function(aValue$10,aMin,aMax){var R=0;R=ClampInt(aValue$10,aMin,aMax);return R},ToNearest:function(Value$8,Factor){var R=0;var FTemp=0;R=Value$8;FTemp=Value$8%Factor;if(FTemp>0)(R+=(Factor-FTemp));return R},ToPxStr:function(aValue$11){var R="";R=aValue$11.toString()+"px";return R},WrapRange:function(aValue$12,aLowRange,aHighRange){var R=0;if(aValue$12>aHighRange){R=aLowRange+TInteger.Diff(aHighRange,(aValue$12-1));if(R>aHighRange)R=TInteger.WrapRange(R,aLowRange,aHighRange)}else if(aValue$12<aLowRange){R=aHighRange-TInteger.Diff(aLowRange,(aValue$12+1));if(R<aLowRange)R=TInteger.WrapRange(R,aLowRange,aHighRange)}else R=aValue$12;return R},Destroy:TObject.Destroy};var TExposure=["esVisible","esPartly","esNone"];function TBufferHandleHelper$Valid$2(Self$20){var R=false;R=!((Self$20==undefined)||(Self$20==null));return R}
function OffsetPoint(a$66,b$2){var R={X$1:0,Y$1:0};R.X$1=a$66.X$1+b$2.X$1;R.Y$1=a$66.Y$1+b$2.Y$1;return R};function OffsetPoint$1(a$67,b$3){var R={X$1:0,Y$1:0};R.X$1=a$67.X$1+b$3;R.Y$1=a$67.Y$1+b$3;return R};function OffsetPoint$2(a$68,b$4){var R={X:0,Y:0};R.X=a$68.X+b$4.X;R.Y=a$68.Y+b$4.Y;return R};function OffsetPoint$3(a$69,b$5){var R={X:0,Y:0};R.X=a$69.X+b$5;R.Y=a$69.Y+b$5;return R};function OffsetPoint$4(a$70,b$6){var R={X:0,Y:0};R.X=a$70.X+b$6;R.Y=a$70.Y+b$6;return R};function MinusPoint(a$71,b$7){var R={X$1:0,Y$1:0};R.X$1=a$71.X$1-b$7.X$1;R.Y$1=a$71.Y$1-b$7.Y$1;return R};function MinusPoint$1(a$72,b$8){var R={X$1:0,Y$1:0};R.X$1=a$72.X$1-b$8;R.Y$1=a$72.Y$1-b$8;return R};function MinusPoint$2(a$73,b$9){var R={X:0,Y:0};R.X=a$73.X-b$9.X;R.Y=a$73.Y-b$9.Y;return R};function MinusPoint$3(a$74,b$10){var R={X:0,Y:0};R.X=a$74.X-b$10;R.Y=a$74.Y-b$10;return R};function MinusPoint$4(a$75,b$11){var R={X:0,Y:0};R.X=a$75.X-b$11;R.Y=a$75.Y-b$11;return R};function ExpandPoint(a$76,b$12){var R={X$1:0,Y$1:0};R.X$1=Math.round(a$76.X$1*b$12.X$1);R.Y$1=Math.round(a$76.Y$1*b$12.Y$1);return R};function ExpandPoint$1(a$77,b$13){var R={X$1:0,Y$1:0};R.X$1=Math.round(a$77.X$1*b$13);R.Y$1=Math.round(a$77.Y$1*b$13);return R};function ExpandPoint$2(a$78,b$14){var R={X$1:0,Y$1:0};R.X$1=Math.round(a$78.X$1*b$14);R.Y$1=Math.round(a$78.Y$1*b$14);return R};function ExpandPoint$3(a$79,b$15){var R={X:0,Y:0};R.X=a$79.X*b$15.X;R.Y=a$79.Y*b$15.Y;return R};function ExpandPoint$4(a$80,b$16){var R={X:0,Y:0};R.X=a$80.X*b$16;R.Y=a$80.Y*b$16;return R};function ExpandPoint$5(a$81,b$17){var R={X:0,Y:0};R.X=a$81.X*b$17;R.Y=a$81.Y*b$17;return R};var EW3Exception={$ClassName:"EW3Exception",$Parent:Exception,$Init:function($){Exception.$Init($)},CreateFmt:function(S,aText,aValues){Exception.Create(S,Format(aText,aValues.slice(0)));return S},Destroy:Exception.Destroy};var EW3OwnedObject={$ClassName:"EW3OwnedObject",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var TW3CustomApplication={$ClassName:"TW3CustomApplication",$Parent:TObject,$Init:function($){TObject.$Init($);$.FBody=$.FCurrentForm=$.FDisplay=$.FMainForm=$.FOnBeforeUnload=$.FOnUnload=$.FTransDst=$.FTransSrc=null;$.FEntryEffect=0;$.FFormChangeActive=$.FTerminated=false;$.FForms=[]},AdjustScreen:function(S){TW3ScrollInfo.ScrollTo(TW3CustomControl.GetScrollInfo(S.FDisplay),0,0);TW3MovableControl.SetBounds$2(S.FDisplay,0,0,TDocumentBody.GetWidth$5(S.FBody),TDocumentBody.GetHeight$5(S.FBody))},ApplicationClosing:function(S){},ApplicationStarted:function(S){},ApplicationStarting:function(S){TW3CustomApplication.AdjustScreen(S)},CBOnBeforeUnload:function(S){if(S.FOnBeforeUnload)S.FOnBeforeUnload(S)},CBOnOrientationChange:function(S){var mOrientation=0;var mTemp$1=0;var mEntry=null;mTemp$1=parseInt(window.orientation,10);switch(mTemp$1){case 0:mOrientation=0;break;case 90:mOrientation=1;break;case(-90):mOrientation=2;break;case 180:mOrientation=3;break}
try{if(S.FDisplay){mEntry=S.FDisplay.FOnOrient;if(mEntry)mEntry(S.FDisplay,mOrientation,mTemp$1)}}finally{TW3CustomApplication.AdjustScreen(S)}},CBOnReSize:function(S){TW3CustomApplication.AdjustScreen(S)},CBOnUnLoad:function(S){try{if(S.FOnUnload)S.FOnUnload(S)}finally{if(!S.FTerminated)TW3CustomApplication.Terminate(S)}},Create$3:function(S){TObject.Create(S);S.FBody=TW3Component.Create$28$($New(TDocumentBody),null);S.FDisplay=TW3Component.Create$28$($New(TW3Display),S.FBody);if(!Instance)Instance=S;return S},Destroy:function(S){if(!S.FTerminated)TW3CustomApplication.Terminate(S);TObject.Free(S.FDisplay);TObject.Free(S.FBody);Instance=null;TObject.Destroy(S)},GotoFormByRef:function(S,aForm,Effect){var mIndex=0;if(S.FTerminated)return;if(S.FFormChangeActive){throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.GotoFormByRef",TObject.ClassName(S.ClassType),"A form transition is already active error"])}
if(aForm===null){throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.GotoFormByRef",TObject.ClassName(S.ClassType),"Form parameter is NIL error"])}
mIndex=S.FForms.indexOf(aForm);if(mIndex<0){throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.GotoFormByRef",TObject.ClassName(S.ClassType),"Form not registered error"])}
if(aForm===S.FCurrentForm)return;if(S.FCurrentForm===null){S.FCurrentForm=aForm;TW3Display.PositionFormInView(S.FDisplay,aForm);TW3MovableControl.SetVisible(aForm,true);TW3CustomForm.FormActivated(aForm);return}
TW3CustomForm.FormDeactivated(S.FCurrentForm);TW3MovableControl.SetVisible(S.FCurrentForm,false);TW3MovableControl.SetVisible(aForm,true);TW3Display.PositionFormInView(S.FDisplay,aForm);TW3CustomForm.FormActivated(aForm);S.FCurrentForm=aForm;return;S.FFormChangeActive=true;S.FEntryEffect=Effect;TW3CustomControl.BringToFront(aForm);TW3CustomForm.FormDeactivated(S.FCurrentForm);S.FTransSrc=S.FCurrentForm;S.FTransDst=aForm;TW3MovableControl.SetVisible(aForm,true);TW3Display.PositionFormInView(S.FDisplay,aForm)},HookWindowEvents:function(S){w3_bind2(document.body,"onunload",$Event0(S,TW3CustomApplication.CBOnUnLoad));w3_bind2(document.body,"onbeforeunload",$Event0(S,TW3CustomApplication.CBOnBeforeUnload));w3_bind2(window,"onresize",$Event0(S,TW3CustomApplication.CBOnReSize));w3_bind2(window,"onorientationchange",$Event0(S,TW3CustomApplication.CBOnOrientationChange))},RegisterFormInstance:function(S,aForm$1,isMainForm){if(S.FTerminated)return;if(aForm$1){if(S.FForms.indexOf(aForm$1)<0){try{S.FForms.push(aForm$1)}catch($e){var e$1=$W($e);throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3CustomApplication.RegisterFormInstance",TObject.ClassName(S.ClassType),e$1.FMessage])}
w3_RequestAnimationFrame($Event0(aForm$1,TW3MovableControl.AdjustToParentBox));if(isMainForm){S.FMainForm=aForm$1}else TW3MovableControl.SetVisible(aForm$1,false)}else{throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.RegisterFormInstance",TObject.ClassName(S.ClassType),"Form already registered"])}}else{throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.RegisterFormInstance",TObject.ClassName(S.ClassType),"Form parameter is NIL error"])}},RunApp:function(S){var FTemp$1=null;TW3CustomApplication.HookWindowEvents(S);TW3CustomApplication.ApplicationStarting(S);TApplicationFormsList.AutoCreateForms(FormsFactory(),S.FDisplay.FView);if(S.FMainForm){FTemp$1=S.FMainForm;S.FMainForm=null;TW3CustomApplication.GotoFormByRef(S,FTemp$1,0)}
TW3CustomApplication.ApplicationStarted(S)},Terminate:function(S){var x$33=0;if(S.FTerminated)return;S.FTerminated=true;TW3CustomApplication.ApplicationClosing(S);try{var $t1;for(x$33=0,$t1=S.FForms.length;x$33<$t1;x$33++){TObject.Free(S.FForms[x$33]);S.FForms[x$33]=null}
S.FForms.length=0}finally{TObject.Free(S)}},UnRegisterFormInstance:function(S,aForm$2){var mIndex$1=0;if(!S.FTerminated){if(aForm$2){mIndex$1=S.FForms.indexOf(aForm$2);if(mIndex$1>=0){if(S.FMainForm!==aForm$2){if(S.FCurrentForm===aForm$2)TW3CustomApplication.GotoFormByRef(S,S.FMainForm,0);S.FForms.splice(mIndex$1,1);try{TObject.Free(aForm$2)}catch($e){var e$2=$W($e);throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.UnRegisterFormInstance",TObject.ClassName(S.ClassType),e$2.FMessage])}}else{throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.UnRegisterFormInstance",TObject.ClassName(S.ClassType),"Main form cannot be removed error"])}}}else{throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.UnRegisterFormInstance",TObject.ClassName(S.ClassType),"Form parameter is NIL error"])}}},Destroy$:function($){return $.ClassType.Destroy($)}};var TApplication={$ClassName:"TApplication",$Parent:TW3CustomApplication,$Init:function($){TW3CustomApplication.$Init($)},Destroy:TW3CustomApplication.Destroy};var TW3DisplayViewArangeType=["dvaSizeToView","dvaVStack","dvaHStack"];var TW3TagObj={$ClassName:"TW3TagObj",$Parent:TObject,$Init:function($){TObject.$Init($);$.FAccess=null;$.FComponentState=[0];$.FHandle=undefined;$.FOwner$1=undefined;$.FTagId="";$.FUpdating=0},AddToComponentState:function(S,Flags){if($SetIn(Flags,0,0,6)){$SetInc(S.FComponentState,0,0,6)}
if($SetIn(Flags,1,0,6)){$SetInc(S.FComponentState,1,0,6)}
if($SetIn(Flags,2,0,6)){$SetInc(S.FComponentState,2,0,6)}
if($SetIn(Flags,3,0,6)){$SetInc(S.FComponentState,3,0,6)}
if($SetIn(Flags,4,0,6)){$SetInc(S.FComponentState,4,0,6)}
if($SetIn(Flags,5,0,6)){$SetInc(S.FComponentState,5,0,6)}},AfterUpdate:function(S){},BeginUpdate:function(S){++S.FUpdating},Create$27:function(S){TObject.Create(S);$SetInc(S.FComponentState,0,0,6);try{S.FTagId=TW3TagObj.MakeElementTagId$(S);S.FHandle=TW3TagObj.MakeElementTagObj$(S)}catch($e){var e$3=$W($e);EW3TagObj.RaiseCntErrMethod("TW3TagObj.Create",S,e$3.FMessage)}
$SetInc(S.FComponentState,1,0,6);if(TVariant.AsObject(S.FHandle)!==TVariant.AsObject(document.body)){if(S.FTagId.length>0)w3_setAttrib(S.FHandle,"id",S.FTagId)}
TW3TagObj.StyleTagObject$(S);TW3TagObj.BeginUpdate(S);try{TW3TagObj.InitializeObject$(S)}finally{TW3TagObj.EndUpdate(S)}
setTimeout(function(){$SetExc(S.FComponentState,1,0,6);$SetExc(S.FComponentState,0,0,6)},100);$SetInc(S.FComponentState,2,0,6);return S},Destroy:function(S){$SetInc(S.FComponentState,5,0,6);if(S.FHandle){try{TW3TagObj.UnHookEvents(S);if(S.FOwner$1)TW3TagObj.RemoveFrom(S)}finally{TW3TagObj.FinalizeObject$(S);S.FTagId="";S.FHandle=null}
TObject.Destroy(S)}
if(S.FAccess)TObject.Free(S.FAccess);TObject.Destroy(S)},EndUpdate:function(S){if(S.FUpdating>0){--S.FUpdating;if(S.FUpdating==0)TW3TagObj.AfterUpdate$(S)}},FinalizeObject:function(S){},InitializeObject:function(S){},InsertInto:function(S,OwnerHandle){if(!OwnerHandle)EW3TagObj.RaiseCntErrMethod("TW3TagObj.InsertInto",S,$R[9]);if(!S.FHandle)EW3TagObj.RaiseCntErrMethod("TW3TagObj.InsertInto",S,$R[2]);try{if(S.FOwner$1)TW3TagObj.RemoveFrom(S);if(OwnerHandle)w3_setElementParentByRef(S.FHandle,OwnerHandle);S.FOwner$1=OwnerHandle}catch($e){var e$4=$W($e);EW3TagObj.RaiseCntErrMethod("TW3TagObj.InsertInto",S,e$4.FMessage)}},MakeElementTagId:function(S){var R="";R=w3_GetUniqueObjId();return R},MakeElementTagObj:function(S){var R=undefined;R=w3_createHtmlElement("div");return R},RemoveFrom:function(S){if(S.FOwner$1==undefined)return;if(!S.FOwner$1)EW3TagObj.RaiseCntErrMethod("TW3TagObj.RemoveFrom",S,$R[9]);if(!S.FHandle)EW3TagObj.RaiseCntErrMethod("TW3TagObj.RemoveFrom",S,$R[2]);try{w3_RemoveElementByRef(S.FHandle,S.FOwner$1);S.FOwner$1=undefined}catch($e){var e$5=$W($e);EW3TagObj.RaiseCntErrMethod("TW3TagObj.RemoveFrom",S,e$5.FMessage)}},RemoveFromComponentState:function(S,Flags$1){if($SetIn(Flags$1,0,0,6)){$SetExc(S.FComponentState,0,0,6)}
if($SetIn(Flags$1,1,0,6)){$SetExc(S.FComponentState,1,0,6)}
if($SetIn(Flags$1,2,0,6)){$SetExc(S.FComponentState,2,0,6)}
if($SetIn(Flags$1,3,0,6)){$SetExc(S.FComponentState,3,0,6)}
if($SetIn(Flags$1,4,0,6)){$SetExc(S.FComponentState,4,0,6)}
if($SetIn(Flags$1,5,0,6)){$SetExc(S.FComponentState,5,0,6)}},Showing:function(S){var R=false;R=S.FHandle!=undefined&&S.FHandle!=null&&$SetIn(S.FComponentState,2,0,6);return R},StyleTagObject:function(S){S.FHandle.style["visibility"]="hidden";S.FHandle.style["display"]="none";S.FHandle.style["position"]="absolute";S.FHandle.style["overflow"]="hidden";S.FHandle.style["left"]="0px";S.FHandle.style["top"]="0px"},UnHookEvents:function(S){S.FHandle.onresize=null;S.FHandle.onselectstart=null;S.FHandle.onfocus=null;S.FHandle.onblur=null;S.FHandle.onchange=null;S.FHandle.onmousedown=null;S.FHandle.onmouseup=null;S.FHandle.onmousemove=null;S.FHandle.onmouseover=null;S.FHandle.onmouseout=null;S.FHandle.onclick=null;S.FHandle.ondblclick=null;S.FHandle.onkeydown=null;S.FHandle.onkeyup=null;S.FHandle.onkeypress=null;S.FHandle.webkitAnimationStart=null;S.FHandle.webkitAnimationEnd=null},Destroy$:function($){return $.ClassType.Destroy($)},AfterUpdate$:function($){return $.ClassType.AfterUpdate($)},FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},MakeElementTagId$:function($){return $.ClassType.MakeElementTagId($)},MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)},Showing$:function($){return $.ClassType.Showing($)},StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}};var TW3Component={$ClassName:"TW3Component",$Parent:TW3TagObj,$Init:function($){TW3TagObj.$Init($);$.FChildren=[];$.FName="";$.FParent=null},CBNoBehavior:function(S){if(event){event.preventDefault()}},ChildAdded:function(S,aChild){},ChildRemoved:function(S,aChild$1){},Create$28:function(S,AOwner$1){S.FParent=AOwner$1;TW3TagObj.Create$27(S);if(S.FParent!==null)TW3Component.RegisterChild(S.FParent,S);return S},FinalizeObject:function(S){TW3Component.FreeChildren(S);if(S.FParent!==null)TW3Component.UnRegisterChild(S.FParent,S);S.FChildren.length=0;TW3TagObj.FinalizeObject(S)},FreeChildren:function(S){var oldCount=0;try{while(S.FChildren.length>0){oldCount=S.FChildren.length;TObject.Free(S.FChildren[0]);if(oldCount==S.FChildren.length){S.FChildren.shift()}}}finally{S.FChildren.length=0}},GetChildCount:function(S){var R=0;R=S.FChildren.length;return R},GetChildObject:function(S,index){var R=null;R=S.FChildren[index];return R},InitializeObject:function(S){TW3TagObj.InitializeObject(S)},RegisterChild:function(S,aChild$2){if(aChild$2!==null&&S.FChildren.indexOf(aChild$2)<0){S.FChildren.push(aChild$2);TW3TagObj.InsertInto(aChild$2,S.FHandle);TW3Component.ChildAdded(S,aChild$2)}},SetName:function(S,Value$9){S.FName=Value$9},Showing:function(S){var R=false;R=TW3TagObj.Showing(S)&&S.FParent!==null;return R},UnRegisterChild:function(S,aChild$3){var mIndex$2=0;if(aChild$3!==null){mIndex$2=S.FChildren.indexOf(aChild$3);if(mIndex$2>=0){S.FChildren.splice(mIndex$2,1);TW3Component.ChildRemoved(S,aChild$3)}
TW3TagObj.RemoveFrom(aChild$3)}},Destroy:TW3TagObj.Destroy,AfterUpdate:TW3TagObj.AfterUpdate,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing$:function($){return $.ClassType.Showing($)},StyleTagObject:TW3TagObj.StyleTagObject,Create$28$:function($){return $.ClassType.Create$28.apply($.ClassType,arguments)}};var TW3MovableControl={$ClassName:"TW3MovableControl",$Parent:TW3Component,$Init:function($){TW3Component.$Init($);$.FAdjusted=$.FTransparent=$.FUseAlpha=false;$.FAlpha=$.FSyncCount=0;$.FBackground=$.FBorders=$.FConstraints=null;$.FColor=0},AdjustToParentBox:function(S){var x$34=0;var dx$3=0;var dy$3=0;var mChild=null;var mCtrl=null;if(S.FHandle){if(!S.FAdjusted){S.FAdjusted=true;dx$3=TW3Borders.GetHSpace(TW3MovableControl.GetBorder(S));dy$3=TW3Borders.GetVSpace(TW3MovableControl.GetBorder(S));var $t2;for(x$34=0,$t2=TW3Component.GetChildCount(S);x$34<$t2;x$34++){mChild=TW3Component.GetChildObject(S,x$34);if($Is(mChild,TW3MovableControl)){mCtrl=$As(mChild,TW3MovableControl);if(TW3MovableControl.supportAdjustment(mCtrl.ClassType)){if(dx$3>0||dy$3>0)TW3MovableControl.SetSize(mCtrl,TW3MovableControl.GetWidth(mCtrl)-dx$3,TW3MovableControl.GetHeight(mCtrl)-dy$3);setTimeout($Event0(mCtrl,TW3MovableControl.AdjustToParentBox),1)}}}}}},AfterUpdate:function(S){TW3TagObj.RemoveFromComponentState(S,[24])},DisplayMode:function(S){var R="";R="inline-block";return R},FinalizeObject:function(S){if(S.FBackground)TObject.Free(S.FBackground);if(S.FBorders)TObject.Free(S.FBorders);if(S.FConstraints)TObject.Free(S.FConstraints);TW3Component.FinalizeObject(S)},GetBorder:function(S){var R=null;if(S.FBorders===null)S.FBorders=TW3OwnedObject.Create$11$($New(TW3Borders),S);R=S.FBorders;return R},GetBoundsRect:function(S){var R={Bottom$1:0,Left$1:0,Right$1:0,Top$1:0};R.Left$1=w3_getStyleAsInt(S.FHandle,"left");R.Top$1=w3_getStyleAsInt(S.FHandle,"top");if(S.FHandle){R.Right$1=parseInt((R.Left$1+S.FHandle.offsetWidth),10);R.Bottom$1=parseInt((R.Top$1+S.FHandle.offsetHeight),10)}else{R.Right$1=R.Left$1;R.Bottom$1=R.Top$1}
return R},GetHeight:function(S){var R=0;if(S.FHandle)R=parseInt(S.FHandle.offsetHeight,10);return R},GetLeft:function(S){var R=0;var mObj$4=undefined;var mData$3,tagRef$11=undefined;tagRef$11=S.FHandle;mObj$4=document.defaultView.getComputedStyle(tagRef$11,null);if(mObj$4)
mData$3=(mObj$4).getPropertyValue('left');if(mData$3)
{if(typeof(mData$3)==="number")
{R=mData$3}else{if(typeof(mData$3)==="string")
{mData$3=parseInt(mData$3);if(typeof(mData$3)==="number")
R=mData$3}}}
return R},GetTop:function(S){var R=0;var mObj$5=undefined;var mData$4,tagRef$12=undefined;tagRef$12=S.FHandle;mObj$5=document.defaultView.getComputedStyle(tagRef$12,null);if(mObj$5)
mData$4=(mObj$5).getPropertyValue('top');if(mData$4)
{if(typeof(mData$4)==="number")
{R=mData$4}else{if(typeof(mData$4)==="string")
{mData$4=parseInt(mData$4);if(typeof(mData$4)==="number")
R=mData$4}}}
return R},GetVisible:function(S){var R=false;var mValue="";mValue=w3_getStyleAsStr(S.FHandle,"visibility");R=(mValue).toLocaleLowerCase()=="visible";return R},GetWidth:function(S){var R=0;if(S.FHandle)R=parseInt(S.FHandle.offsetWidth,10);return R},InitializeObject:function(S){TW3Component.InitializeObject(S);S.FAlpha=255;S.FColor=536870911;S.FTransparent=false;if(S.FParent){TW3MovableControl.ReadySync(S)}else TW3MovableControl.ObjectReady(S)},Moved:function(S){},ObjectReady:function(S){TW3TagObj.AddToComponentState(S,[4]);if(TW3MovableControl.GetVisible(S))TW3MovableControl.Resize$(S)},ReadySync:function(S){if(S.FHandle&&TControlHandleHelper$Ready(S.FHandle)&&(!$SetIn(S.FComponentState,0,0,6))&&(!$SetIn(S.FComponentState,1,0,6))){TW3MovableControl.ObjectReady(S)}else{++S.FSyncCount;if(S.FSyncCount>600){TW3MovableControl.ObjectReady(S);return}
w3_RequestAnimationFrame($Event0(S,TW3MovableControl.ReadySync))}},Resize:function(S){},SetAlpha:function(S,aValue$13){S.FAlpha=ClampInt(aValue$13,0,255);if(S.FUseAlpha){S.FHandle.style["opacity"]=S.FAlpha*0.01}},SetBounds$2:function(S,aLeft,aTop,aWidth,aHeight){var mSized=false;var mMoved=false;aWidth=Math.max(0,aWidth);aHeight=Math.max(0,aHeight);mMoved=aLeft!=TW3MovableControl.GetLeft(S)||aTop!=TW3MovableControl.GetTop(S);mSized=aWidth!=S.FHandle.offsetWidth||aHeight!=S.FHandle.offsetHeight;if($SetIn(S.FComponentState,2,0,6)){TW3TagObj.BeginUpdate(S);S.FHandle.style["left"]=aLeft.toString()+"px";S.FHandle.style["top"]=aTop.toString()+"px";S.FHandle.style["width"]=aWidth.toString()+"px";S.FHandle.style["height"]=aHeight.toString()+"px";if(mMoved)TW3TagObj.AddToComponentState(S,[16]);if(mSized)TW3TagObj.AddToComponentState(S,[8]);TW3TagObj.EndUpdate(S)}else{S.FHandle.style["left"]=aLeft.toString()+"px";S.FHandle.style["top"]=aTop.toString()+"px";S.FHandle.style["width"]=aWidth.toString()+"px";S.FHandle.style["height"]=aHeight.toString()+"px"}},SetColor:function(S,aValue$14){var mText="";if(aValue$14!=S.FColor){S.FColor=aValue$14;mText=ColorToWebStr(S.FColor,(S.FTransparent)?0:255);S.FHandle.style["backgroundColor"]=mText}},SetHeight:function(S,aValue$15){aValue$15=Math.max(aValue$15,0);if(aValue$15!=TW3MovableControl.GetHeight(S)){if($SetIn(S.FComponentState,2,0,6)){TW3TagObj.BeginUpdate(S);S.FHandle.style["height"]=TInteger.ToPxStr(aValue$15);TW3TagObj.AddToComponentState(S,[8]);TW3TagObj.EndUpdate(S)}else{S.FHandle.style["height"]=TInteger.ToPxStr(aValue$15)}}},SetLeft:function(S,aValue$16){if($SetIn(S.FComponentState,2,0,6)){TW3TagObj.BeginUpdate(S);S.FHandle.style["left"]=TInteger.ToPxStr(aValue$16);TW3TagObj.AddToComponentState(S,[16]);TW3TagObj.EndUpdate(S)}else{S.FHandle.style["left"]=TInteger.ToPxStr(aValue$16)}},SetSize:function(S,aWidth$1,aHeight$1){aWidth$1=Math.max(aWidth$1,0);aHeight$1=Math.max(aHeight$1,0);if(aWidth$1!=S.FHandle.offsetWidth||aHeight$1!=S.FHandle.offsetHeight){if($SetIn(S.FComponentState,2,0,6)){TW3TagObj.BeginUpdate(S);S.FHandle.style["width"]=aWidth$1.toString()+"px";S.FHandle.style["height"]=aHeight$1.toString()+"px";TW3TagObj.AddToComponentState(S,[8]);TW3TagObj.EndUpdate(S)}else{S.FHandle.style["width"]=aWidth$1.toString()+"px";S.FHandle.style["height"]=aHeight$1.toString()+"px"}}},SetTop:function(S,aValue$17){if($SetIn(S.FComponentState,2,0,6)){TW3TagObj.BeginUpdate(S);S.FHandle.style["top"]=TInteger.ToPxStr(aValue$17);TW3TagObj.AddToComponentState(S,[16]);TW3TagObj.EndUpdate(S)}else{S.FHandle.style["top"]=TInteger.ToPxStr(aValue$17)}},SetTransparent:function(S,aValue$18){var mText$1="";if(aValue$18!=S.FTransparent){TW3TagObj.BeginUpdate(S);S.FTransparent=aValue$18;mText$1=ColorToWebStr(S.FColor,(aValue$18)?0:255);S.FHandle.style["backgroundColor"]=mText$1;TW3TagObj.AddToComponentState(S,[16]);TW3TagObj.EndUpdate(S)}},SetUseAlpha:function(S,aValue$19){var mBlend=0;if(aValue$19==S.FUseAlpha)return;S.FUseAlpha=aValue$19;if(aValue$19){mBlend=S.FAlpha*0.01}else mBlend=1;S.FHandle.style["opacity"]=mBlend},SetVisible:function(S,aValue$20){TW3TagObj.BeginUpdate(S);if(aValue$20){S.FHandle.style["display"]=TW3MovableControl.DisplayMode(S.ClassType);S.FHandle.style["visibility"]="visible";TW3TagObj.AddToComponentState(S,[8])}else{S.FHandle.style["display"]="none";S.FHandle.style["visibility"]="hidden"}
TW3TagObj.EndUpdate(S)},SetWidth:function(S,aValue$21){aValue$21=Math.max(aValue$21,0);if(aValue$21!=TW3MovableControl.GetWidth(S)){if($SetIn(S.FComponentState,2,0,6)){TW3TagObj.BeginUpdate(S);S.FHandle.style["width"]=TInteger.ToPxStr(aValue$21);TW3TagObj.AddToComponentState(S,[8]);TW3TagObj.EndUpdate(S)}else{S.FHandle.style["width"]=TInteger.ToPxStr(aValue$21)}}},Showing:function(S){var R=false;R=TW3Component.Showing(S)&&TW3MovableControl.GetWidth(S)>0&&TW3MovableControl.GetHeight(S)>0&&TW3MovableControl.GetLeft(S)>=0&&TW3MovableControl.GetLeft(S)<TW3MovableControl.GetWidth(S)&&TW3MovableControl.GetTop(S)>=0&&TW3MovableControl.GetTop(S)<TW3MovableControl.GetHeight(S)&&TW3MovableControl.GetVisible(S);return R},supportAdjustment:function(S){var R=false;R=true;return R},Destroy:TW3TagObj.Destroy,AfterUpdate$:function($){return $.ClassType.AfterUpdate($)},FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing$:function($){return $.ClassType.Showing($)},StyleTagObject:TW3TagObj.StyleTagObject,Create$28:TW3Component.Create$28,Resize$:function($){return $.ClassType.Resize($)}};var TW3CustomControl={$ClassName:"TW3CustomControl",$Parent:TW3MovableControl,$Init:function($){TW3MovableControl.$Init($);$.FClassNames=$.FFont=$.FGestureData=$.FNoBehavior=$.FOnChanged=$.FOnClick=$.FOnGotFocus=$.FOnLostFocus=$.FOnResize=$.FScrollInfo=$.FTouchData=null},AfterUpdate:function(S){if($SetIn(S.FComponentState,2,0,6)){if($SetIn(S.FComponentState,3,0,6)){TW3TagObj.RemoveFromComponentState(S,[8]);TW3MovableControl.Resize$(S);if(S.FOnResize)S.FOnResize(S)}
if($SetIn(S.FComponentState,4,0,6)){TW3TagObj.RemoveFromComponentState(S,[16]);TW3MovableControl.Moved(S);TW3CustomControl.Invalidate(S)}}
TW3MovableControl.AfterUpdate(S)},BringToFront:function(S){if(S.FHandle){S.FHandle.style.zIndex=(TW3CustomControl.GetMaxZIndex($As(S.FParent,TW3CustomControl))+1)}},CBChanged:function(S,eventObj){if(S.FOnChanged)S.FOnChanged(S)},CBClick:function(S,eventObj$1){if(S.FOnClick)S.FOnClick(S)},CBFocused:function(S){if(S.FOnGotFocus)S.FOnGotFocus(S)},CBLostFocus:function(S){if(S.FOnLostFocus)S.FOnLostFocus(S)},Create$28:function(S,AOwner$2){TW3Component.Create$28(S,AOwner$2);S.FHandle["onclick"]=$Event1(S,TW3CustomControl.CBClick);return S},FinalizeObject:function(S){TObject.Free(S.FFont);TObject.Free(S.FClassNames);TObject.Free(S.FScrollInfo);TObject.Free(S.FTouchData);TObject.Free(S.FGestureData);TW3MovableControl.FinalizeObject(S)},GetChildrenSortedByYPos:function(S){var R=[];var mCount=0;var x$35=0;var mAltered=false;var mObj$6=null;var mLast=null;var mCurrent=null;R.length=0;mCount=TW3Component.GetChildCount(S);if(mCount>0){var $t3;for(x$35=0,$t3=mCount;x$35<$t3;x$35++){mObj$6=TW3Component.GetChildObject(S,x$35);if($Is(mObj$6,TW3CustomControl)){R.push(mObj$6)}}
if(R.length>1){do{mAltered=false;var $t4;for(x$35=1,$t4=mCount;x$35<$t4;x$35++){mLast=$As(R[x$35-1],TW3CustomControl);mCurrent=$As(R[x$35],TW3CustomControl);if(TW3MovableControl.GetTop(mCurrent)<TW3MovableControl.GetTop(mLast)){$ArraySwap(R,(x$35-1),x$35);mAltered=true}}}while(!(mAltered==false))}}
return R},GetMaxZIndex:function(S){var R=0;var iChild=0;var obj=null,objZIndex=0;R=0;var $t5;for(iChild=0,$t5=TW3Component.GetChildCount(S);iChild<$t5;iChild++){obj=TW3Component.GetChildObject(S,iChild);if((obj!==null)&&$Is(obj,TW3CustomControl)&&obj.FHandle){objZIndex=TW3CustomControl.GetZIndexAsInt($As(obj,TW3CustomControl),0);if(objZIndex>R)R=objZIndex;objZIndex=TW3CustomControl.GetMaxZIndex($As(obj,TW3CustomControl));if(objZIndex>R)R=objZIndex}}
return R},GetScrollInfo:function(S){var R=null;if(S.FScrollInfo===null)S.FScrollInfo=TW3OwnedObject.Create$11$($New(TW3ScrollInfo),S);R=S.FScrollInfo;return R},GetStyleClass:function(S){var R="";R=w3_getAttribAsStr(S.FHandle,"class","");return R},GetZIndexAsInt:function(S,default$2){var R=0;var mData$5;R=default$2;mData$5=S.FHandle.style["zIndex"];if(S.FHandle){if(TVariant.IsNumber(mData$5)){R=parseInt(mData$5,10)}else if(TVariant.IsString(mData$5)){R=parseInt(mData$5,10);if(isNaN(R))R=default$2}}
return R},InitializeObject:function(S){TW3MovableControl.InitializeObject(S);S.FNoBehavior=$Event0(S,TW3Component.CBNoBehavior);w3_bind2(S.FHandle,"onselectstart",$Event0(S,TW3Component.CBNoBehavior));w3_bind2(S.FHandle,"onfocus",$Event0(S,TW3CustomControl.CBFocused));w3_bind2(S.FHandle,"onblur",$Event0(S,TW3CustomControl.CBLostFocus))},Invalidate:function(S){},LayoutChildren:function(S){var x$36=0;var mChild$1=null;TW3TagObj.BeginUpdate(S);var $t6;for(x$36=0,$t6=TW3Component.GetChildCount(S);x$36<$t6;x$36++){mChild$1=TW3Component.GetChildObject(S,x$36);if($Is(mChild$1,TW3CustomControl))TW3CustomControl.LayoutChildren($As(mChild$1,TW3CustomControl))}
TW3TagObj.AddToComponentState(S,[24]);TW3TagObj.EndUpdate(S)},SetStyleClass:function(S,aStyle){w3_setAttrib(S.FHandle,"class",aStyle)},StyleTagObject:function(S){TW3TagObj.StyleTagObject(S);TW3CustomControl.SetStyleClass(S,TObject.ClassName(S.ClassType));TW3MovableControl.SetVisible(S,true)},_setChanged:function(S,aValue$22){if(aValue$22){S.FHandle["onchange"]=$Event1(S,TW3CustomControl.CBChanged)}else{S.FHandle["onchange"]=S.FNoBehavior}
S.FOnChanged=aValue$22},Destroy:TW3TagObj.Destroy,AfterUpdate$:function($){return $.ClassType.AfterUpdate($)},FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)},Create$28$:function($){return $.ClassType.Create$28.apply($.ClassType,arguments)},Resize:TW3MovableControl.Resize};var TW3DisplayView={$ClassName:"TW3DisplayView",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($);$.FArrange=false;$.FArrangeKind=0},ArrangeChildren:function(S,aKind){var x$37=0;var dx$4=0;var dy$4=0;var mObj$7=null;var mCount$1=0;var mRect={Bottom$1:0,Left$1:0,Right$1:0,Top$1:0};var wd=0;var hd=0;mCount$1=TW3Component.GetChildCount(S);if(mCount$1>0){mRect=TW3MovableControl.GetBoundsRect(S);switch(aKind){case 0:wd=TRect$Width$1(mRect);hd=TRect$Height$1(mRect);var $t7;for(x$37=0,$t7=mCount$1;x$37<$t7;x$37++){mObj$7=TW3Component.GetChildObject(S,x$37);if($Is(mObj$7,TW3CustomControl)&&(!$Is(mObj$7,TW3BlockBox)))TW3MovableControl.SetSize($As(mObj$7,TW3CustomControl),wd,hd)}
break;case 1:dy$4=mRect.Top$1;wd=TRect$Width$1(mRect);var $t8;for(x$37=0,$t8=mCount$1;x$37<$t8;x$37++){mObj$7=TW3Component.GetChildObject(S,x$37);if($Is(mObj$7,TW3CustomControl)&&(!$Is(mObj$7,TW3BlockBox))){hd=TW3MovableControl.GetHeight($As(mObj$7,TW3CustomControl));TW3MovableControl.SetBounds$2($As(mObj$7,TW3CustomControl),mRect.Left$1,dy$4,wd,hd);(dy$4+=hd)}}
break;case 2:dx$4=mRect.Left$1;hd=TRect$Height$1(mRect);var $t9;for(x$37=0,$t9=mCount$1;x$37<$t9;x$37++){mObj$7=TW3Component.GetChildObject(S,x$37);if($Is(mObj$7,TW3CustomControl)&&(!$Is(mObj$7,TW3BlockBox))){wd=TW3MovableControl.GetWidth($As(mObj$7,TW3CustomControl));TW3MovableControl.SetBounds$2($As(mObj$7,TW3CustomControl),dx$4,mRect.Top$1,wd,hd);(dx$4+=wd)}}
break}}},InitializeObject:function(S){TW3CustomControl.InitializeObject(S);S.FArrange=true;S.FArrangeKind=0},Resize:function(S){TW3MovableControl.Resize(S);if(S.FArrange)TW3DisplayView.ArrangeChildren(S,S.FArrangeKind)},Destroy:TW3TagObj.Destroy,AfterUpdate:TW3CustomControl.AfterUpdate,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject$:function($){return $.ClassType.InitializeObject($)},MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,Create$28:TW3CustomControl.Create$28,Resize$:function($){return $.ClassType.Resize($)}};var TW3Display={$ClassName:"TW3Display",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($);$.FFooter=$.FHeader=$.FOnOrient=$.FView=null},FinalizeObject:function(S){TObject.Free(S.FView);if(S.FHeader)TObject.Free(S.FHeader);if(S.FFooter)TObject.Free(S.FFooter);TW3CustomControl.FinalizeObject(S)},GetHeightOfChildren:function(S){var R=0;var x$38=0;var mObj$8=null;var $tA;for(x$38=0,$tA=TW3Component.GetChildCount(S);x$38<$tA;x$38++){mObj$8=TW3Component.GetChildObject(S,x$38);if(mObj$8!==S.FView&&$Is(mObj$8,TW3CustomControl)&&(!$Is(mObj$8,TW3BlockBox))){(R+=TW3MovableControl.GetHeight($As(mObj$8,TW3CustomControl)))}}
return R},InitializeObject:function(S){TW3CustomControl.InitializeObject(S);S.FView=TW3Component.Create$28$($New(TW3DisplayView),S);TW3MovableControl.SetTop(S.FView,5)},PositionFormInView:function(S,aForm$3){var mApp=null;var dx$5=0;var dy$5=0;if(aForm$3){mApp=Application();if((mApp!==null)&&(!mApp.FTerminated)){dx$5=TW3ScrollInfo.GetScrollLeft(TW3CustomControl.GetScrollInfo(S.FView));dy$5=TW3ScrollInfo.GetScrollTop(TW3CustomControl.GetScrollInfo(S.FView));TW3MovableControl.SetBounds$2(aForm$3,dx$5,dy$5,TW3MovableControl.GetWidth(S.FView),TW3MovableControl.GetHeight(S.FView))}}else{throw EW3Exception.CreateFmt($New(EW3Screen),$R[0],["PositionFormInView",TObject.ClassName(S.ClassType),"Form parameter was NIL error"])}},Resize:function(S){var mTotal=0;var mList=[],x$39=0;var dy$6=0;var mObj$9=null;TW3MovableControl.Resize(S);mTotal=TW3Display.GetHeightOfChildren(S);TW3MovableControl.SetHeight(S.FView,TW3MovableControl.GetHeight(S)-mTotal);mList=TW3CustomControl.GetChildrenSortedByYPos(S);dy$6=0;var $tB;for(x$39=0,$tB=mList.length;x$39<$tB;x$39++){mObj$9=$As(mList[x$39],TW3CustomControl);if(!$Is(mObj$9,TW3BlockBox)){TW3MovableControl.SetBounds$2(mObj$9,0,dy$6,TW3MovableControl.GetWidth(S),TW3MovableControl.GetHeight(mObj$9));(dy$6+=TW3MovableControl.GetHeight(mObj$9))}else TW3MovableControl.SetBounds$2(mObj$9,0,0,TW3MovableControl.GetWidth(S),TW3MovableControl.GetHeight(S))}},Destroy:TW3TagObj.Destroy,AfterUpdate:TW3CustomControl.AfterUpdate,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,Create$28:TW3CustomControl.Create$28,Resize$:function($){return $.ClassType.Resize($)}};var TW3BlockBox={$ClassName:"TW3BlockBox",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($)},Destroy:TW3TagObj.Destroy,AfterUpdate:TW3CustomControl.AfterUpdate,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3CustomControl.InitializeObject,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,Create$28:TW3CustomControl.Create$28,Resize:TW3MovableControl.Resize};var TFormEntryEffect=["feNone","feFromRight","feToLeft"];var TDisplayOrientation=["soPortrait","soLandscapeLeft","soLandscapeRight","soFlipped","soPortraitPrimary","soPortraitSecondary","soLandscapePrimary","soLandscapeSecondary","soLandscape","soDefault"];var TApplicationFormsList={$ClassName:"TApplicationFormsList",$Parent:TObject,$Init:function($){TObject.$Init($);$.FFormOwner=null;$.FList=[];$.FNextAutoCreate=0},AutoCreateForm:function(S,aFormInfo){if(!aFormInfo.Instance){aFormInfo.Instance=TW3Component.Create$28$($NewDyn(aFormInfo.FormClass,""),S.FFormOwner);TW3CustomApplication.RegisterFormInstance(Application(),aFormInfo.Instance,aFormInfo.IsMainForm)}
aFormInfo.InitialAutoCreateDone=true},AutoCreateForms:function(S,owner){var a$82=0;var info=null;var a$83=[];S.FFormOwner=owner;S.FNextAutoCreate=0;a$83=S.FList;var $tC;for(a$82=0,$tC=a$83.length;a$82<$tC;a$82++){info=a$83[a$82];TApplicationFormsList.AutoCreateForm(S,info);++S.FNextAutoCreate;if(info.IsMainForm)break}
setTimeout($Event0(S,TApplicationFormsList.AutoCreateNextForm),50)},AutoCreateNextForm:function(S){var iForm=0;var info$1=null;var $tD;for(iForm=S.FNextAutoCreate,$tD=S.FList.length;iForm<$tD;iForm++){info$1=S.FList[iForm];if(info$1.IsAutoCreated&&(!(info$1.Instance!==null))&&(!info$1.InitialAutoCreateDone)){TApplicationFormsList.AutoCreateForm(S,info$1);++S.FNextAutoCreate;if(S.FNextAutoCreate<(S.FList.length-1))setTimeout($Event0(S,TApplicationFormsList.AutoCreateNextForm),50);break}}},IndexOfFormClass:function(S,aFormClass){var R=0;var $tE;for(R=0,$tE=S.FList.length;R<$tE;R++){if(S.FList[R].FormClass==aFormClass)return R}
R=-1;return R},IndexOfUnitName:function(S,aUnitName){var R=0;var $tF;for(R=0,$tF=S.FList.length;R<$tF;R++){if(SameText(S.FList[R].UnitName,aUnitName))return R}
R=-1;return R},RegisterAutoCreate:function(S,aUnitName$1,isAutoCreate,isMainForm$1){var formInfo=null;var idx=0;idx=TApplicationFormsList.IndexOfUnitName(S,aUnitName$1);if(idx>=0){formInfo=S.FList[idx]}else{formInfo=TObject.Create($New(TApplicationFormInfo));formInfo.UnitName=aUnitName$1;S.FList.push(formInfo)}
formInfo.IsMainForm=isMainForm$1;formInfo.IsAutoCreated=isAutoCreate},RegisterForm:function(S,aUnitName$2,aFormClass$1){var formInfo$1=null;var idx$1=0;idx$1=TApplicationFormsList.IndexOfUnitName(S,aUnitName$2);if(idx$1>=0){formInfo$1=S.FList[idx$1]}else{formInfo$1=TObject.Create($New(TApplicationFormInfo));formInfo$1.UnitName=aUnitName$2;S.FList.push(formInfo$1)}
formInfo$1.FormClass=aFormClass$1},RegisterFormInstance$1:function(S,aFormClass$2,aFormInstance){var formInfo$2=null;var idx$2=0;idx$2=TApplicationFormsList.IndexOfFormClass(S,aFormClass$2);if(idx$2>=0){formInfo$2=S.FList[idx$2]}else{formInfo$2=TObject.Create($New(TApplicationFormInfo));formInfo$2.FormClass=aFormClass$2;S.FList.push(formInfo$2)}
formInfo$2.Instance=aFormInstance;formInfo$2.InitialAutoCreateDone=true},UnregisterFormInstance:function(S,aFormInstance$1){var i=0;var $tG;for(i=0,$tG=S.FList.length;i<$tG;i++){if(S.FList[i].Instance===aFormInstance$1)S.FList[i].Instance=null}},Destroy:TObject.Destroy};var TApplicationFormInfo={$ClassName:"TApplicationFormInfo",$Parent:TObject,$Init:function($){TObject.$Init($);$.InitialAutoCreateDone=$.IsMainForm=$.IsAutoCreated=false;$.UnitName="";$.Instance=null;$.FormClass=null},Destroy:TObject.Destroy};function Forms$2(){var R=null;R=FormsFactory();return R};var EW3Screen={$ClassName:"EW3Screen",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var EW3Application={$ClassName:"EW3Application",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};function Application(){var R=null;R=Instance;return R};function FormsFactory(){var R=null;if(!GForms)GForms=TObject.Create($New(TApplicationFormsList));R=GForms;return R};var TW3CustomForm={$ClassName:"TW3CustomForm",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($);$.FCaption="";$.FInitialized=false;$.FOnActivate=null;$.FOnDeactivate=null},Create$28:function(S,AOwner$3){TW3CustomControl.Create$28(S,AOwner$3);TApplicationFormsList.RegisterFormInstance$1(Forms$2(),$AsClass(TObject.ClassType(S.ClassType),TW3CustomForm),S);return S},Destroy:function(S){TW3CustomApplication.UnRegisterFormInstance(Application(),S);TApplicationFormsList.UnregisterFormInstance(Forms$2(),S);TW3TagObj.Destroy(S)},FormActivated:function(S){if(!S.FInitialized){S.FInitialized=true;TW3CustomForm.InitializeForm$(S);if(S.FOnActivate)S.FOnActivate(S);TW3CustomControl.LayoutChildren(S)}else if(S.FOnActivate)S.FOnActivate(S)},FormDeactivated:function(S){if(S.FOnDeactivate)S.FOnDeactivate(S)},InitializeForm:function(S){},setCaption:function(S,Value$10){S.FCaption=Value$10},StyleTagObject:function(S){TW3CustomControl.StyleTagObject(S);w3_setStyle(S.FHandle,w3_CSSPrefix("Transform"),"none");TW3CustomControl.SetStyleClass(S,"TW3CustomForm")},Destroy$:function($){return $.ClassType.Destroy($)},AfterUpdate:TW3CustomControl.AfterUpdate,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3CustomControl.InitializeObject,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)},Create$28$:function($){return $.ClassType.Create$28.apply($.ClassType,arguments)},Resize:TW3MovableControl.Resize,InitializeForm$:function($){return $.ClassType.InitializeForm($)}};var TW3Form={$ClassName:"TW3Form",$Parent:TW3CustomForm,$Init:function($){TW3CustomForm.$Init($)},Destroy:TW3CustomForm.Destroy,AfterUpdate:TW3CustomControl.AfterUpdate,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3CustomControl.InitializeObject,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomForm.StyleTagObject,Create$28:TW3CustomForm.Create$28,Resize:TW3MovableControl.Resize,InitializeForm:TW3CustomForm.InitializeForm};var TW3ScrollInfo={$ClassName:"TW3ScrollInfo",$Parent:TW3OwnedObject,$Init:function($){TW3OwnedObject.$Init($)},AcceptParent:function(S,aObject$1){var R=false;R=(aObject$1!==null)&&$Is(aObject$1,TW3TagObj);return R},GetScrollLeft:function(S){var R=0;var mRef$3=undefined;mRef$3=$As(S.FOwner,TW3TagObj).FHandle;if(mRef$3){R=parseInt(mRef$3.scrollLeft,10)}else EW3TagObj.RaiseCntErrMethod("TW3ScrollInfo.GetScrollLeft",S,"invalid owner handle error");return R},GetScrollTop:function(S){var R=0;var mRef$4=undefined;mRef$4=$As(S.FOwner,TW3TagObj).FHandle;if(mRef$4){R=parseInt(mRef$4.scrollTop,10)}else EW3TagObj.RaiseCntErrMethod("TW3ScrollInfo.GetScrollTop",S,"invalid owner handle error");return R},ScrollTo:function(S,aLeft$1,aTop$1){var mRef$5=undefined;mRef$5=$As(S.FOwner,TW3TagObj).FHandle;if(mRef$5){mRef$5.scrollLeft=aLeft$1;mRef$5.scrollTop=aTop$1}else EW3TagObj.RaiseCntErrMethod("TW3ScrollInfo.ScrollTo",S,"invalid owner handle error")},Destroy:TObject.Destroy,AcceptParent$:function($){return $.ClassType.AcceptParent.apply($.ClassType,arguments)},Create$11:TW3OwnedObject.Create$11};function Copy$TW3ControlSizeInfo(s,d){return d}
function Clone$TW3ControlSizeInfo($){return{}}
var TW3CustomFont={$ClassName:"TW3CustomFont",$Parent:TObject,$Init:function($){TObject.$Init($);$.FOnChange=null},Destroy:TObject.Destroy,GetHandle$4$:function($){return $.ClassType.GetHandle$4($)}};var TW3ControlFont={$ClassName:"TW3ControlFont",$Parent:TW3CustomFont,$Init:function($){TW3CustomFont.$Init($);$.FOwner$3=null},GetHandle$4:function(S){var R=undefined;R=S.FOwner$3.FHandle;return R},Create$48:function(S,AOwner$4){TObject.Create(S);if(AOwner$4){S.FOwner$3=AOwner$4}else EW3TagObj.RaiseCntErrMethod("TW3ControlFont.Create",S,"Owner was nil error");return S},Destroy:TObject.Destroy,GetHandle$4$:function($){return $.ClassType.GetHandle$4($)}};var TW3ControlBackground={$ClassName:"TW3ControlBackground",$Parent:TW3OwnedObject,$Init:function($){TW3OwnedObject.$Init($);$.FHandle$4=undefined},AcceptParent:function(S,aObject$2){var R=false;R=aObject$2!==null&&$Is(aObject$2,TW3MovableControl);if(R)S.FHandle$4=$As(aObject$2,TW3MovableControl).FHandle;return R},Destroy:TObject.Destroy,AcceptParent$:function($){return $.ClassType.AcceptParent.apply($.ClassType,arguments)},Create$11:TW3OwnedObject.Create$11};var TW3Constraints={$ClassName:"TW3Constraints",$Parent:TW3OwnedObject,$Init:function($){TW3OwnedObject.$Init($)},AcceptParent:function(S,aObject$3){var R=false;R=(aObject$3!==null)&&$Is(aObject$3,TW3TagObj);return R},GetMaxHeight:function(S){var R=0;var mRef$6=undefined;mRef$6=$As(S.FOwner,TW3MovableControl).FHandle;if(mRef$6)R=w3_getStyleAsInt(mRef$6,"max-height");return R},GetMaxWidth:function(S){var R=0;var mRef$7=undefined;mRef$7=$As(S.FOwner,TW3MovableControl).FHandle;if(mRef$7)R=w3_getStyleAsInt(mRef$7,"max-width");return R},GetMinHeight:function(S){var R=0;var mRef$8=undefined;mRef$8=$As(S.FOwner,TW3MovableControl).FHandle;if(mRef$8)R=w3_getStyleAsInt(mRef$8,"min-height");return R},GetMinWidth:function(S){var R=0;var mRef$9=undefined;mRef$9=$As(S.FOwner,TW3MovableControl).FHandle;if(mRef$9)R=w3_getStyleAsInt(mRef$9,"min-width");return R},SetMaxHeight:function(S,aValue$23){var mRef$10=undefined;mRef$10=$As(S.FOwner,TW3MovableControl).FHandle;if(mRef$10){mRef$10.style["max-height"]=TInteger.ToPxStr(aValue$23)}},SetMaxWidth:function(S,aValue$24){var mRef$11=undefined;mRef$11=$As(S.FOwner,TW3MovableControl).FHandle;if(mRef$11){mRef$11.style["max-width"]=TInteger.ToPxStr(aValue$24)}},SetMinHeight:function(S,aValue$25){var mRef$12=undefined;mRef$12=$As(S.FOwner,TW3MovableControl).FHandle;if(mRef$12){mRef$12.style["min-height"]=TInteger.ToPxStr(aValue$25)}},SetMinWidth:function(S,aValue$26){var mRef$13=undefined;mRef$13=$As(S.FOwner,TW3MovableControl).FHandle;if(mRef$13){mRef$13.style["min-width"]=TInteger.ToPxStr(aValue$26)}},Destroy:TObject.Destroy,AcceptParent$:function($){return $.ClassType.AcceptParent.apply($.ClassType,arguments)},Create$11:TW3OwnedObject.Create$11};var TW3AttrAccess={$ClassName:"TW3AttrAccess",$Parent:TObject,$Init:function($){TObject.$Init($);$.FHandle$5=undefined},Create$49:function(S,aHandle){TObject.Create(S);if(TBufferHandleHelper$Valid$2(aHandle)){S.FHandle$5=aHandle}else{throw Exception.Create($New(Exception),$R[46])}
return S},Destroy:TObject.Destroy};var TShiftStateEnum=["ssShift","ssAlt","ssCtrl","ssMeta","ssLeft","ssRight","ssMiddle"];var TShiftState={$ClassName:"TShiftState",$Parent:TObject,$Init:function($){TObject.$Init($);$.FEvent=null;$.FMouseButtons=0},CheckShiftStateEnum:function(S,value$6){var R=false;if(S.FEvent===null){R=false}else{switch(value$6){case 0:R=S.FEvent.shiftKey;break;case 1:R=S.FEvent.altKey;break;case 2:R=S.FEvent.ctrlKey;break;case 3:R=S.FEvent.metaKey;break;case 4:R=(S.FMouseButtons&1)!=0;break;case 5:R=(S.FMouseButtons&4)!=0;break;case 6:R=(S.FMouseButtons&2)!=0;break}}
return R},Destroy:TObject.Destroy};var TMouseButton=["mbLeft","mbMiddle","mbRight"];var TCustomAppContainer={$ClassName:"TCustomAppContainer",$Parent:TW3Component,$Init:function($){TW3Component.$Init($)},Destroy:TW3TagObj.Destroy,AfterUpdate:TW3TagObj.AfterUpdate,FinalizeObject:TW3Component.FinalizeObject,InitializeObject:TW3Component.InitializeObject,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3Component.Showing,StyleTagObject:TW3TagObj.StyleTagObject,Create$28:TW3Component.Create$28};var TDocumentBody={$ClassName:"TDocumentBody",$Parent:TCustomAppContainer,$Init:function($){TCustomAppContainer.$Init($)},GetHeight$5:function(S){var R=0;R=parseInt(window.innerHeight,10);return R},GetWidth$5:function(S){var R=0;R=parseInt(window.innerWidth,10);return R},MakeElementTagId:function(S){var R="";R="";return R},MakeElementTagObj:function(S){var R=undefined;R=document.body;return R},StyleTagObject:function(S){},Destroy:TW3TagObj.Destroy,AfterUpdate:TW3TagObj.AfterUpdate,FinalizeObject:TW3Component.FinalizeObject,InitializeObject:TW3Component.InitializeObject,MakeElementTagId$:function($){return $.ClassType.MakeElementTagId($)},MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)},Showing:TW3Component.Showing,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)},Create$28:TW3Component.Create$28};var EW3TagObj={$ClassName:"EW3TagObj",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},RaiseCntErrMethod:function(methName,instance,msg){throw EW3Exception.CreateFmt($New(EW3TagObj),$R[0],[methName,(instance!==null)?TObject.ClassName(instance.ClassType):"nil",msg])},Destroy:Exception.Destroy};function Copy$TW3RGBA(s,d){d.A$2=s.A$2;d.B$1=s.B$1;d.G$1=s.G$1;d.R$2=s.R$2;return d}
function Clone$TW3RGBA($){return{A$2:$.A$2,B$1:$.B$1,G$1:$.G$1,R$2:$.R$2}}
function StrToColor(aColorStr){aColorStr={v:aColorStr};var R={v:0};try{var mTemp="";var xpos=0;var r$2=0;var g=0;var b$1=0;aColorStr.v=Trim$_String_(aColorStr.v);if(aColorStr.v.length==0)return R.v;if((aColorStr.v).toLocaleLowerCase()=="transparent"){R.v=536870911;return R.v}
if(aColorStr.v.charAt(0)=="#"||aColorStr.v.charAt(0)=="$"){R.v=parseInt("0x"+Trim$_String_Integer_Integer_(aColorStr.v,1,0),16)}else{if((aColorStr.v).substr(0,2)=="0x"){R.v=parseInt(aColorStr.v,16)}else if(((aColorStr.v).substr(0,4)).toLowerCase()=="rgb("){aColorStr.v=Trim$_String_Integer_Integer_(aColorStr.v,4,0);try{xpos=(aColorStr.v.indexOf(",")+1);if(xpos>1){mTemp=aColorStr.v.substr(0,(xpos-1));Delete(aColorStr,1,xpos);if(mTemp.charAt(0)=="$")mTemp="0x"+Trim$_String_Integer_Integer_(mTemp,1,0);r$2=parseInt(mTemp,10)}
xpos=(aColorStr.v.indexOf(",")+1);if(xpos>1){mTemp=aColorStr.v.substr(0,(xpos-1));Delete(aColorStr,1,xpos);if(mTemp.charAt(0)=="$")mTemp="0x"+Trim$_String_Integer_Integer_(mTemp,1,0);g=parseInt(mTemp,10)}
xpos=(aColorStr.v.indexOf(")")+1);if(xpos>1){mTemp=aColorStr.v.substr(0,(xpos-1));if(mTemp.charAt(0)=="$")mTemp="0x"+Trim$_String_Integer_Integer_(mTemp,1,0);b$1=parseInt(mTemp,10)}
R.v=RGBToColor(r$2,g,b$1)}catch($e){var e$6=$W($e);return R.v}}}}finally{return R.v}};function RGBToColor(aRed,aGreen,aBlue){var R=0;R=(aBlue|(aGreen<<8))|(aRed<<16);return R};function ColorToWebStr(aColor,alpha){var R="";R=ColorToWebStr$1((aColor>>>16)&255,(aColor>>>8)&255,aColor&255,alpha);return R};function ColorToWebStr$1(r$3,g$1,b$18,a$84){var R="";R=(a$84==255)?"#"+IntToHex2(r$3)+IntToHex2(g$1)+IntToHex2(b$18):"rgba("+r$3.toString()+","+g$1.toString()+","+b$18.toString()+","+FloatToStr$_Float_(a$84/255)+")";return R};function W3FontDetector(){var R=null;if(_FontDetect===null)_FontDetect=TW3FontDetector.Create$52($New(TW3FontDetector));R=_FontDetect;return R};function Copy$TW3TextMetric(s,d){d.tmWidth=s.tmWidth;d.tmHeight=s.tmHeight;return d}
function Clone$TW3TextMetric($){return{tmWidth:$.tmWidth,tmHeight:$.tmHeight}}
function Copy$TW3FontInfo(s,d){d.fiName=s.fiName;d.fiSize=s.fiSize;return d}
function Clone$TW3FontInfo($){return{fiName:$.fiName,fiSize:$.fiSize}}
var TW3FontDetector={$ClassName:"TW3FontDetector",$Parent:TObject,$Init:function($){TObject.$Init($);$.FBaseFonts=[];$.FdefaultHeight=$.FdefaultWidth=undefined;$.Fh=undefined;$.Fs=undefined;$.FtestSize="72px";$.FtestString="mmmmmmmmmmlli"},Create$52:function(S){var x$40=0;TObject.Create(S);S.FBaseFonts.push("monospace");S.FBaseFonts.push("sans-serif");S.FBaseFonts.push("serif");S.Fh=document.body;S.Fs=document.createElement("span");S.Fs.style.fontSize=S.FtestSize;S.Fs.innerHTML=S.FtestString;S.FdefaultWidth=TVariant.CreateObject();S.FdefaultHeight=TVariant.CreateObject();if(S.FBaseFonts.length>0){var $tH;for(x$40=0,$tH=S.FBaseFonts.length;x$40<$tH;x$40++){S.Fs.style.fontFamily=S.FBaseFonts[x$40];S.Fh.appendChild(S.Fs);S.FdefaultWidth[S.FBaseFonts[x$40]]=S.Fs.offsetWidth;S.FdefaultHeight[S.FBaseFonts[x$40]]=S.Fs.offsetHeight;S.Fh.removeChild(S.Fs)}}
return S},Detect:function(S,aFont){var R=false;var x$41=0;aFont=Trim$_String_(aFont);if(aFont.length>0){if(S.FBaseFonts.length>0){var $tI;for(x$41=0,$tI=S.FBaseFonts.length;x$41<$tI;x$41++){S.Fs.style.fontFamily=(aFont+","+S.FBaseFonts[x$41]);S.Fh.appendChild(S.Fs);R=S.Fs.offsetWidth!=S.FdefaultWidth[S.FBaseFonts[x$41]]&&S.Fs.offsetHeight!=S.FdefaultHeight[S.FBaseFonts[x$41]];S.Fh.removeChild(S.Fs);if(R)break}}}
return R},getFontInfo$2:function(S,aHandle$1){var R={fiName:"",fiSize:0};var mName="";var mSize=0;var mData$6=[],x$42=0;R.fiSize=-1;if(TBufferHandleHelper$Valid$2(aHandle$1)){mName=w3_getStyleAsStr(aHandle$1,"font-family");mSize=w3_getStyleAsInt(aHandle$1,"font-size");if(mName.length>0){mData$6=(mName).split(",");if(mData$6.length>0){var $tJ;for(x$42=0,$tJ=mData$6.length;x$42<$tJ;x$42++){if(TW3FontDetector.Detect(S,mData$6[x$42])){R.fiName=mData$6[x$42];R.fiSize=mSize;break}}}}}
return R},MeasureText$5:function(S,aFontName,aFontSize,aFixedWidth,aContent){var R={tmWidth:0,tmHeight:0};var mElement=undefined;if(TW3FontDetector.Detect(S,aFontName)){aContent=Trim$_String_(aContent);if(aContent.length>0){mElement=document.createElement("p");if(mElement){mElement.style["font-family"]=aFontName;mElement.style["font-size"]=TInteger.ToPxStr(aFontSize);mElement.style["overflow"]="scroll";mElement.style.maxWidth=TInteger.ToPxStr(aFixedWidth);mElement.style.width=TInteger.ToPxStr(aFixedWidth);mElement.innerHTML=aContent;S.Fh.appendChild(mElement);R.tmWidth=parseInt(mElement.scrollWidth,10);R.tmHeight=parseInt(mElement.scrollHeight,10);S.Fh.removeChild(mElement)}}}
return R},MeasureText$4:function(S,aFontName$1,aFontSize$1,aContent$1){var R={tmWidth:0,tmHeight:0};var mElement$1=undefined;if(TW3FontDetector.Detect(S,aFontName$1)){aContent$1=Trim$_String_(aContent$1);if(aContent$1.length>0){mElement$1=document.createElement("p");if(mElement$1){mElement$1.style["font-family"]=aFontName$1;mElement$1.style["font-size"]=TInteger.ToPxStr(aFontSize$1);mElement$1.style["overflow"]="scroll";mElement$1.style["display"]="inline-block";mElement$1.style["white-space"]="nowrap";mElement$1.innerHTML=StrReplace(aContent$1," ","_");S.Fh.appendChild(mElement$1);R.tmWidth=parseInt(mElement$1.scrollWidth,10);R.tmHeight=parseInt(mElement$1.scrollHeight,10);S.Fh.removeChild(mElement$1)}}}
return R},MeasureText$3:function(S,aFontInfo,aFixedWidth$1,aContent$2){var R={tmWidth:0,tmHeight:0};R=TW3FontDetector.MeasureText$5(S,aFontInfo.fiName,aFontInfo.fiSize,aFixedWidth$1,aContent$2);return R},MeasureText$2:function(S,aFontInfo$1,aContent$3){var R={tmWidth:0,tmHeight:0};R=TW3FontDetector.MeasureText$4(S,aFontInfo$1.fiName,aFontInfo$1.fiSize,aContent$3);return R},Destroy:TObject.Destroy};var TW3CSSClassStyleNames={$ClassName:"TW3CSSClassStyleNames",$Parent:TW3OwnedObject,$Init:function($){TW3OwnedObject.$Init($);$.FCache=[];$.FToken=""},AcceptParent:function(S,aObject$4){var R=false;R=(aObject$4!==null)&&$Is(aObject$4,TW3CustomControl);return R},Create$11:function(S,AOwner$5){TW3OwnedObject.Create$11(S,AOwner$5);S.FToken="class";S.FCache=[];return S},Destroy:function(S){S.FCache.length=0;TObject.Destroy(S)},Destroy$:function($){return $.ClassType.Destroy($)},AcceptParent$:function($){return $.ClassType.AcceptParent.apply($.ClassType,arguments)},Create$11$:function($){return $.ClassType.Create$11.apply($.ClassType,arguments)}};var TW3TouchList={$ClassName:"TW3TouchList",$Parent:TObject,$Init:function($){TObject.$Init($);$.FObjects=[]},Clear$1:function(S){S.FObjects.length=0},Update:function(S,refObj){var mCount$2=0;var x$43=0;var mObj$10=null;mCount$2=refObj.length;if(mCount$2==S.FObjects.length){var $tK;for(x$43=0,$tK=mCount$2;x$43<$tK;x$43++){TW3Touch.Consume$1(S.FObjects[x$43],refObj[x$43])}}else{TW3TouchList.Clear$1(S);var $tL;for(x$43=0,$tL=mCount$2;x$43<$tL;x$43++){mObj$10=TObject.Create($New(TW3Touch));TW3Touch.Consume$1(mObj$10,refObj[x$43]);S.FObjects.push(mObj$10)}}},Destroy:TObject.Destroy};var TW3TouchData={$ClassName:"TW3TouchData",$Parent:TObject,$Init:function($){TObject.$Init($);$.FChanged=$.FTouches=null},Update$1:function(S,eventObj$2){if(S.FTouches)TW3TouchList.Update(S.FTouches,eventObj$2.touches);if(S.FChanged)TW3TouchList.Update(S.FChanged,eventObj$2.changedTouches)},Destroy:TObject.Destroy};var TW3Touch={$ClassName:"TW3Touch",$Parent:TObject,$Init:function($){TObject.$Init($);$.FClientX=$.FClientY=$.FPageX=$.FPageY=$.FScreenX=$.FScreenY=0;$.FIdent=undefined;$.FTarget=null},Consume$1:function(S,touch){S.FScreenX=touch.screenX;S.FScreenY=touch.screenY;S.FClientX=touch.clientX;S.FClientY=touch.clientY;S.FPageX=touch.pageX;S.FPageY=touch.pageY;S.FIdent=touch.identifier;S.FTarget=TVariant.AsObject(touch.target)},Destroy:TObject.Destroy};var TW3GestureData={$ClassName:"TW3GestureData",$Parent:TObject,$Init:function($){TObject.$Init($);$.FRotation=$.FScale=0},Consume$2:function(S,refObj$1){S.FRotation=Number(refObj$1.rotation);S.FScale=Number(refObj$1.scale)},Update$2:function(S){TW3GestureData.Consume$2(S,event)},Destroy:TObject.Destroy};var JMouseButton=["Left","Middle","Right"];var TW3Borders={$ClassName:"TW3Borders",$Parent:TW3OwnedObject,$Init:function($){TW3OwnedObject.$Init($);$.FBottom=$.FLeft=$.FRight=$.FTop=null},AcceptParent:function(S,AObject){var R=false;R=$Is(AObject,TW3TagObj);return R},Create$11:function(S,AOwner$6){TW3OwnedObject.Create$11(S,AOwner$6);S.FLeft=TW3Border.Create$55($New(TW3Border),S,0);S.FTop=TW3Border.Create$55($New(TW3Border),S,1);S.FRight=TW3Border.Create$55($New(TW3Border),S,2);S.FBottom=TW3Border.Create$55($New(TW3Border),S,3);return S},Destroy:function(S){TObject.Free(S.FLeft);TObject.Free(S.FTop);TObject.Free(S.FRight);TObject.Free(S.FBottom);TObject.Destroy(S)},GetHSpace:function(S){var R=0;R=TW3Border.GetWidth$6(S.FLeft)+TW3Border.GetPadding(S.FLeft)+TW3Border.GetWidth$6(S.FRight)+TW3Border.GetPadding(S.FRight);return R},GetVSpace:function(S){var R=0;R=TW3Border.GetWidth$6(S.FTop)+TW3Border.GetPadding(S.FTop)+TW3Border.GetWidth$6(S.FBottom)+TW3Border.GetPadding(S.FBottom);return R},Destroy$:function($){return $.ClassType.Destroy($)},AcceptParent$:function($){return $.ClassType.AcceptParent.apply($.ClassType,arguments)},Create$11$:function($){return $.ClassType.Create$11.apply($.ClassType,arguments)}};var TW3BorderEdgeStyle=["besNone","besSolid","besDotted","besDouble","besGroove","besInset","besOutset"];var TW3BorderEdge=["beLeft","beTop","beRight","beBottom"];var TW3Border={$ClassName:"TW3Border",$Parent:TObject,$Init:function($){TObject.$Init($);$.FEdge=0;$.FEdgeName="";$.FOwner$4=null},Create$55:function(S,AOwner$7,AEdge){TObject.Create(S);S.FOwner$4=AOwner$7;S.FEdge=S.FEdge;switch(AEdge){case 0:S.FEdgeName="left";break;case 1:S.FEdgeName="top";break;case 2:S.FEdgeName="right";break;case 3:S.FEdgeName="bottom";break}
return S},GetPadding:function(S){var R=0;var mRef$14=undefined;var mKey="";R=0;mRef$14=$As(S.FOwner$4.FOwner,TW3TagObj).FHandle;if(mRef$14){mKey="padding-"+S.FEdgeName;R=w3_getStyleAsInt(mRef$14,mKey)}
return R},GetWidth$6:function(S){var R=0;var mRef$15=undefined;var mKey$1="";R=0;mRef$15=$As(S.FOwner$4.FOwner,TW3TagObj).FHandle;if(mRef$15){mKey$1="border-"+S.FEdgeName+"-width";R=w3_getStyleAsInt(mRef$15,mKey$1)}
return R},SetPadding:function(S,aValue$27){var mRef$16=undefined;var mKey$2="";mRef$16=$As(S.FOwner$4.FOwner,TW3TagObj).FHandle;if(mRef$16){mKey$2="padding-"+S.FEdgeName;w3_setStyle(mRef$16,mKey$2,TInteger.ToPxStr(aValue$27))}else{throw EW3Exception.CreateFmt($New(EW3TagObj),$R[0],["TW3Border.SetPadding",TObject.ClassName(S.ClassType),$R[49]])}},SetWidth$1:function(S,aValue$28){var mRef$17=undefined;var mKey$3="";mRef$17=$As(S.FOwner$4.FOwner,TW3TagObj).FHandle;if(mRef$17){mKey$3="border-"+S.FEdgeName+"-width";w3_setStyle(mRef$17,mKey$3,TInteger.ToPxStr(aValue$28))}else{throw EW3Exception.CreateFmt($New(EW3TagObj),$R[0],["TW3Border.SetWidth",TObject.ClassName(S.ClassType),$R[49]])}},Destroy:TObject.Destroy};var TW3AnimationTiming=["atEase","atLinear","atEaseIn","atEaseOut","atEaseInOut"];var cW3AnimationTiming=["ease","linear","ease-in","ease-out","ease-in-out"];var TForm1={$ClassName:"TForm1",$Parent:TW3Form,$Init:function($){TW3Form.$Init($);$.ProductsDS=null},InitializeForm:function(S){TW3CustomForm.InitializeForm(S)},InitializeObject:function(S){var ds1="",ComboBox1=null;TW3CustomControl.InitializeObject(S);TW3CustomForm.setCaption(S,"W3Form");TW3Component.SetName(S,"Form1");ds1="{\"dhMagic\":51966,\"dhCount\":15,\"dhFieldDefs\":{\"ddMagic\":3401235116,\"ddDefs\":[{\"fdName\":\"productid\",\"fdDatatype\":4},{\"fdName\":\"description\",\"fdDatatype\":4},{\"fdName\":\"listprice\",\"fdDatatype\":3},{\"fdName\":\"shipping\",\"fdDatatype\":3}]},\"dhData\":[{\"productid\":\"9V-BATTERY-12PK\",\"description\":\"12-pack of 9-volt batteries\",\"listprice\":20,\"shipping\":2},{\"productid\":\"9V-BATTERY-4PK\",\"description\":\"4-pack of 9-volt batteries\",\"listprice\":4.5,\"shipping\":1.5},{\"productid\":\"CALCULATOR-BUSINESS\",\"description\":\"Business calculator\",\"listprice\":10,\"shipping\":1},{\"productid\":\"CASH-REGISTER\",\"description\":\"Cash register with thermal printer\",\"listprice\":170,\"shipping\":10},{\"productid\":\"FLASH-USB-16GB\",\"description\":\"16GB USB flash drive\",\"listprice\":15,\"shipping\":0.5},{\"productid\":\"FLASH-USB-32GB\",\"description\":\"32GB USB flash drive\",\"listprice\":25,\"shipping\":0.5},{\"productid\":\"FLASH-USB-8GB\",\"description\":\"8GB USB flash drive\",\"listprice\":10,\"shipping\":0.5},{\"productid\":\"LABEL-MAKER\",\"description\":\"Label maker - plastic labels\",\"listprice\":35,\"shipping\":2},{\"productid\":\"PEN-BP-12PK\",\"description\":\"12-pack of ballpoint pens\",\"listprice\":12,\"shipping\":0.6},{\"productid\":\"PHONE-HEADSET\",\"description\":\"Hands-free phone headset\",\"listprice\":15,\"shipping\":2},{\"productid\":\"PHONE-SYSTEM-4HS\",\"description\":\"4-handset phone system with main base\",\"listprice\":120,\"shipping\":4},{\"productid\":\"PROJECTOR-HD\",\"description\":\"1080p HD Projector\",\"listprice\":850,\"shipping\":56},{\"productid\":\"SCANNER-SF\",\"description\":\"Sheet-feed paper scanner\",\"listprice\":150,\"shipping\":7},{\"productid\":\"SHREDDER-SF-CC\",\"description\":\"Sheet-feed, cross-cut shredder with bin\",\"listprice\":8,\"shipping\":10},{\"productid\":\"USB-CARD-READER\",\"description\":\"USB magnetic strip card reader\",\"listprice\":25,\"shipping\":2}]}";S.ProductsDS=TW3Dataset.Create$61($New(TDataSet));TW3Dataset.LoadFromString(S.ProductsDS,ds1);TW3Dataset.CreateDataset(S.ProductsDS);TW3Dataset.setActive(S.ProductsDS,true);ComboBox1=TW3Component.Create$28$($New(TW3ComboBox),S);TW3MovableControl.SetWidth(ComboBox1,200);TW3MovableControl.SetTop(ComboBox1,30);TW3MovableControl.SetLeft(ComboBox1,30);TW3MovableControl.SetHeight(ComboBox1,32);TW3Component.SetName(ComboBox1,"ComboBox1");TW3CustomControl.SetStyleClass(ComboBox1,"dropdown");TW3CustomControl._setChanged(ComboBox1,function(Sender){WriteLn(TW3ComboBox.getValue$2(ComboBox1,TW3ComboBox.getSelIndex(ComboBox1)))});TW3TagObj.BeginUpdate(ComboBox1);TW3ComboBox.Clear$9(ComboBox1);TW3ComboBox.Add$5(ComboBox1,"Select a product");TW3Dataset.First(S.ProductsDS);while(!TW3Dataset.getEOF(S.ProductsDS)){TW3ComboBox.Add$5(ComboBox1,TW3DatasetField.a$41(TW3DatasetFields.FieldByName$2(S.ProductsDS.FFields,"productid")));TW3Dataset.Next(S.ProductsDS)}
TW3TagObj.EndUpdate(ComboBox1)},Resize:function(S){TW3MovableControl.Resize(S)},Destroy:TW3CustomForm.Destroy,AfterUpdate:TW3CustomControl.AfterUpdate,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject$:function($){return $.ClassType.InitializeObject($)},MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomForm.StyleTagObject,Create$28:TW3CustomForm.Create$28,Resize$:function($){return $.ClassType.Resize($)},InitializeForm$:function($){return $.ClassType.InitializeForm($)}};var TW3Dataset={$ClassName:"TW3Dataset",$Parent:TObject,$Init:function($){TObject.$Init($);$.FActive=$.FDestroying=false;$.FCache$1=[];$.FDefs=$.FFields=$.FOnAdd=$.FOnClosed=$.FOnCreated=$.FOnDelete=$.FOnPos=$.FOnState=null;$.FDsIndex=0;$.FState=0},Close:function(S){if(S.FActive){TW3Dataset.DoBeforeDatasetClosed(S);try{try{TW3DatasetFields.Clear$8(S.FFields);S.FCache$1.length=0}finally{S.FActive=false;S.FState=0;S.FDsIndex=-1;$AsIntf(S.FFields,"IDatasetFieldsAccess")[0]();$AsIntf(S.FFields,"IDatasetFieldsAccess")[1](false);$AsIntf(S.FDefs,"IFieldDefAccess")[0](false)}}finally{TW3Dataset.DoAfterDatasetClosed(S)}}else{throw Exception.Create($New(EW3Dataset),$R[17])}},Create$61:function(S){TObject.Create(S);S.FFields=TObject.Create($New(TW3DatasetFields));S.FDefs=TObject.Create($New(TW3FieldDefs));S.FState=0;S.FDestroying=false;S.FDsIndex=-1;return S},CreateDataset:function(S){function SetupFields(){var x$44=0;var $tM;for(x$44=0,$tM=TW3FieldDefs.a$57(S.FDefs);x$44<$tM;x$44++){TW3DatasetFields.Add$4(S.FFields,TW3FieldDefs.a$56(S.FDefs,x$44).FName$4,TW3FieldDefs.a$56(S.FDefs,x$44).FDatatype)}};if(!S.FActive){if(TW3FieldDefs.a$57(S.FDefs)>0){TW3DatasetFields.Clear$8(S.FFields);TW3Dataset.DoBeforeDatasetCreated(S);try{S.FActive=true;TW3Dataset.setState(S,0);TW3Dataset.setPosition(S,(-1));SetupFields();$AsIntf(S.FFields,"IDatasetFieldsAccess")[1](true);$AsIntf(S.FDefs,"IFieldDefAccess")[0](true)}finally{TW3Dataset.DoAfterDatasetCreated(S)}}else{throw Exception.Create($New(EW3Dataset),$R[32])}}},Destroy:function(S){S.FDestroying=true;if(S.FActive)TW3Dataset.Close(S);TObject.Free(S.FFields);TObject.Free(S.FDefs);TObject.Destroy(S)},DoAfterDatasetClosed:function(S){if(S.FOnClosed){if(!S.FDestroying)S.FOnClosed(S)}},DoAfterDatasetCreated:function(S){if(S.FOnCreated){if(!S.FDestroying)S.FOnCreated(S)}},DoBeforeDatasetClosed:function(S){},DoBeforeDatasetCreated:function(S){},First:function(S){var mpos=0;if(S.FActive){if(S.FState==0){if(TW3Dataset.getRecCount(S)>0){mpos=0}else mpos=-1;TW3Dataset.setPosition(S,mpos)}else{throw Exception.Create($New(EW3Dataset),$R[18])}}else{throw Exception.Create($New(EW3Dataset),$R[17])}},getEOF:function(S){var R=false;if(S.FActive){R=S.FDsIndex>=TW3Dataset.getRecCount(S)||TW3Dataset.getRecCount(S)<=0}else R=true;return R},getPacketToFields:function(S){if(S.FDsIndex>=0&&S.FDsIndex<S.FCache$1.length){TW3DatasetFields.DataImport(S.FFields,S.FCache$1[S.FDsIndex])}else TW3DatasetFields.ClearData(S.FFields)},getRecCount:function(S){var R=0;R=S.FCache$1.length;return R},LoadFromString:function(S,aText$1){var mHead={dhMagic:0,dhCount:0,dhFieldDefs:undefined,dhData:undefined};if(S.FActive)TW3Dataset.Close(S);if(aText$1.length>0){try{mHead=JSON.parse(aText$1)}catch($e){var e$7=$W($e);throw EW3Exception.CreateFmt($New(EW3Dataset),$R[29],[e$7.FMessage])}
if(mHead.dhMagic==51966){TW3FieldDefs.LoadFromString$1(S.FDefs,decodeURI(JSON.stringify(mHead.dhFieldDefs)));if(mHead.dhCount>0){try{S.FCache$1=(mHead).dhData}catch($e){var e$8=$W($e);throw EW3Exception.CreateFmt($New(EW3Dataset),$R[29],[e$8.FMessage])}}}else{throw Exception.Create($New(EW3Dataset),$R[30])}}else{throw Exception.Create($New(EW3Dataset),$R[31])}},Next:function(S){if(S.FActive){if(S.FState==0){TW3Dataset.setPosition(S,TInteger.EnsureRange((S.FDsIndex+1),(-1),TW3Dataset.getRecCount(S)))}else{throw Exception.Create($New(EW3Dataset),$R[18])}}else{throw Exception.Create($New(EW3Dataset),$R[17])}},setActive:function(S,aValue$29){if(aValue$29!=S.FActive){switch(aValue$29){case true:TW3Dataset.CreateDataset(S);break;case false:TW3Dataset.Close(S);break}}},setPosition:function(S,aNewPosition){var mOld=0;if(aNewPosition!=S.FDsIndex){mOld=S.FDsIndex;S.FDsIndex=aNewPosition;if(!(S.FState==1)){if(S.FDsIndex>=0&&S.FDsIndex<TW3Dataset.getRecCount(S))TW3Dataset.getPacketToFields(S)}
if(S.FOnPos)S.FOnPos(S,mOld,aNewPosition)}},setState:function(S,aState){S.FState=aState;if(S.FOnState)S.FOnState(S,aState)},Destroy$:function($){return $.ClassType.Destroy($)}};var TDataSet={$ClassName:"TDataSet",$Parent:TW3Dataset,$Init:function($){TW3Dataset.$Init($)},Destroy:TW3Dataset.Destroy};var TW3DatasetField={$ClassName:"TW3DatasetField",$Parent:TObject,$Init:function($){TObject.$Init($);$.FKind=0;$.FName$3="";$.FParent$1=null;$.FReadOnly=false;$.FValue=undefined},a$48:function(S,Value$11){S.FValue=Value$11},a$47:function(S){return TVariant.AsFloat(S.FValue)},a$46:function(S,Value$12){S.FValue=Value$12},a$45:function(S){return TVariant.AsBool(S.FValue)},a$44:function(S,Value$13){S.FValue=Value$13},a$43:function(S){return TVariant.AsInteger(S.FValue)},a$42:function(S,Value$14){S.FValue=Value$14},a$41:function(S){return TVariant.AsString(S.FValue)},Create$71:function(S,aParent$2){TObject.Create(S);S.FParent$1=aParent$2;S.FKind=0;S.FName$3="Field"+w3_GetUniqueNumber().toString();return S},Generate:function(S){},getGenerated:function(S){var R=false;R=false;return R},getValue:function(S){var R=undefined;R=S.FValue;return R},ReadBinaryValue:function(S,Reader){switch(S.FKind){case 1:TW3DatasetField.setValue(S,TReader.ReadBoolean(Reader));break;case 2:TW3DatasetField.setValue(S,TReader.ReadInteger(Reader));break;case 3:TW3DatasetField.setValue(S,TReader.ReadDouble(Reader));break;case 4:TW3DatasetField.setValue(S,TReader.ReadString(Reader));break;case 5:TW3DatasetField.setValue(S,TReader.ReadDouble(Reader));break;case 6:TW3DatasetField.setValue(S,TReader.ReadInteger(Reader));break;case 7:TW3DatasetField.setValue(S,TReader.ReadString(Reader));break;default:throw Exception.Create($New(EW3DatasetField),$R[38])}},setName:function(S,aValue$30){if(!S.FReadOnly){S.FName$3=(Trim$_String_(aValue$30)).toLowerCase()}else{throw Exception.Create($New(EW3DatasetField),$R[16])}},setReadOnly:function(S,aValue$31){S.FReadOnly=aValue$31},setValue:function(S,aValue$32){S.FValue=aValue$32},WriteBinaryValue:function(S,Writer){switch(S.FKind){case 1:TWriter.WriteBoolean(Writer,TW3DatasetField.a$45(S));break;case 2:TWriter.WriteInteger(Writer,TW3DatasetField.a$43(S));break;case 3:TWriter.WriteDouble(Writer,TW3DatasetField.a$47(S));break;case 4:TWriter.WriteString(Writer,TW3DatasetField.a$41(S));break;case 5:TWriter.WriteDouble(Writer,TW3DatasetField.a$47(S));break;case 6:TWriter.WriteInteger(Writer,TW3DatasetField.a$43(S));break;case 7:TWriter.WriteString(Writer,TW3DatasetField.a$41(S));break;default:throw Exception.Create($New(EW3DatasetField),$R[38])}},Destroy:TObject.Destroy,Generate$:function($){return $.ClassType.Generate($)},getGenerated$:function($){return $.ClassType.getGenerated($)},ReadBinaryValue$:function($){return $.ClassType.ReadBinaryValue.apply($.ClassType,arguments)},WriteBinaryValue$:function($){return $.ClassType.WriteBinaryValue.apply($.ClassType,arguments)}};var TW3StringField={$ClassName:"TW3StringField",$Parent:TW3DatasetField,$Init:function($){TW3DatasetField.$Init($)},Destroy:TObject.Destroy,Generate:TW3DatasetField.Generate,getGenerated:TW3DatasetField.getGenerated,ReadBinaryValue:TW3DatasetField.ReadBinaryValue,WriteBinaryValue:TW3DatasetField.WriteBinaryValue};var TW3IntegerField={$ClassName:"TW3IntegerField",$Parent:TW3DatasetField,$Init:function($){TW3DatasetField.$Init($)},Destroy:TObject.Destroy,Generate:TW3DatasetField.Generate,getGenerated:TW3DatasetField.getGenerated,ReadBinaryValue:TW3DatasetField.ReadBinaryValue,WriteBinaryValue:TW3DatasetField.WriteBinaryValue};var TW3GUIDField={$ClassName:"TW3GUIDField",$Parent:TW3DatasetField,$Init:function($){TW3DatasetField.$Init($)},Generate:function(S){TW3DatasetField.setValue(S,(TDatatype.CreateGUID(TDatatype)).toUpperCase())},getGenerated:function(S){var R=false;R=true;return R},WriteBinaryValue:function(S,Writer$1){TWriter.WriteString(Writer$1,TW3DatasetField.a$41(S))},ReadBinaryValue:function(S,Reader$1){TW3DatasetField.setValue(S,TReader.ReadString(Reader$1))},Destroy:TObject.Destroy,Generate$:function($){return $.ClassType.Generate($)},getGenerated$:function($){return $.ClassType.getGenerated($)},ReadBinaryValue$:function($){return $.ClassType.ReadBinaryValue.apply($.ClassType,arguments)},WriteBinaryValue$:function($){return $.ClassType.WriteBinaryValue.apply($.ClassType,arguments)}};var TW3FloatField={$ClassName:"TW3FloatField",$Parent:TW3DatasetField,$Init:function($){TW3DatasetField.$Init($)},Destroy:TObject.Destroy,Generate:TW3DatasetField.Generate,getGenerated:TW3DatasetField.getGenerated,ReadBinaryValue:TW3DatasetField.ReadBinaryValue,WriteBinaryValue:TW3DatasetField.WriteBinaryValue};var TW3FieldDefs={$ClassName:"TW3FieldDefs",$Parent:TObject,$Init:function($){TObject.$Init($);$.FFields$1=[];$.FId=0;$.FReadOnly$1=false},a$57:function(S){return S.FFields$1.length},a$56:function(S,index$1){return S.FFields$1[index$1]},Add$3:function(S,aName,aDataType){var R=null;R=null;if(!S.FReadOnly$1){aName=Trim$_String_((aName).toLowerCase());if(aName.length>0){if(TW3FieldDefs.IndexOf$3(S,aName)<0){R=TW3FieldDef.Create$72($New(TW3FieldDef),S);TW3FieldDef.setName$1(R,aName);TW3FieldDef.setType(R,aDataType);S.FFields$1.push(R)}else{throw Exception.Create($New(EW3FieldDefs),$R[22])}}else{throw Exception.Create($New(EW3FieldDefs),$R[23])}}else{throw Exception.Create($New(EW3FieldDefs),$R[20])}
return R},Clear$7:function(S){var x$45=0;if(S.FFields$1.length>0){try{var $tN;for(x$45=0,$tN=S.FFields$1.length;x$45<$tN;x$45++){TObject.Free(S.FFields$1[x$45])}}finally{S.FFields$1.length=0}}},Destroy:function(S){if(S.FFields$1.length>0)TW3FieldDefs.Clear$7(S);TObject.Destroy(S)},getFieldIdentifier:function(S){var R="";do{++S.FId;R="Field"+S.FId.toString()}while(!(TW3FieldDefs.IndexOf$3(S,R)<0));return R},IndexOf$3:function(S,aName$1){var R=0;var x$46=0;R=-1;if(S.FFields$1.length>0){aName$1=(Trim$_String_(aName$1)).toLowerCase();if(aName$1.length>0){var $tO;for(x$46=0,$tO=S.FFields$1.length;x$46<$tO;x$46++){if(aName$1==(S.FFields$1[x$46].FName$4).toLowerCase()){R=x$46;break}}}}
return R},LoadFromString$1:function(S,aText$2){var mHead$1={ddMagic:0,ddDefs:[]};var x$47=0;TW3FieldDefs.Clear$7(S);try{mHead$1=JSON.parse(aText$2)}catch($e){var e$9=$W($e);throw EW3Exception.CreateFmt($New(EW3FieldDefs),"Failed to load field-definitions, system threw exception: %s",[e$9.FMessage])}
if(mHead$1.ddMagic==3401235116){if(mHead$1.ddDefs.length>0){var $tP;for(x$47=0,$tP=mHead$1.ddDefs.length;x$47<$tP;x$47++){TW3FieldDefs.Add$3(S,mHead$1.ddDefs[x$47].fdName,mHead$1.ddDefs[x$47].fdDatatype)}}}else{throw Exception.Create($New(EW3FieldDefs),$R[25])}},SetReadOnly:function(S,aValue$33){var mItem=null;var a$85=0;var a$86=[];S.FReadOnly$1=aValue$33;if(S.FFields$1.length>0){a$86=S.FFields$1;var $tQ;for(a$85=0,$tQ=a$86.length;a$85<$tQ;a$85++){mItem=a$86[a$85];TW3FieldDef.setReadOnly$1(mItem,aValue$33)}}},Destroy$:function($){return $.ClassType.Destroy($)}};TW3FieldDefs.$Intf={IFieldDefAccess:[TW3FieldDefs.SetReadOnly,TW3FieldDefs.getFieldIdentifier]}
var TW3FieldDef={$ClassName:"TW3FieldDef",$Parent:TObject,$Init:function($){TObject.$Init($);$.FDatatype=0;$.FName$4="";$.FParent$2=null;$.FReadOnly$2=false},Create$72:function(S,aParent$3){TObject.Create(S);if(aParent$3!==null){S.FParent$2=aParent$3;S.FName$4=$AsIntf(S.FParent$2,"IFieldDefAccess")[1]()}
return S},setName$1:function(S,aName$2){if(!S.FReadOnly$2){S.FName$4=aName$2}},setReadOnly$1:function(S,aValue$34){S.FReadOnly$2=aValue$34},setType:function(S,aValue$35){if(!S.FReadOnly$2)S.FDatatype=aValue$35},Destroy:TObject.Destroy};var TW3DateTimeField={$ClassName:"TW3DateTimeField",$Parent:TW3DatasetField,$Init:function($){TW3DatasetField.$Init($)},Destroy:TObject.Destroy,Generate:TW3DatasetField.Generate,getGenerated:TW3DatasetField.getGenerated,ReadBinaryValue:TW3DatasetField.ReadBinaryValue,WriteBinaryValue:TW3DatasetField.WriteBinaryValue};var TW3DatasetState=["dsIdle","dsInsert","dsEdit"];var TW3DatasetLocateOption=["loCaseInsensitive","loStartFromCurrentPos"];var TW3DatasetFieldType=["ftUnknown","ftBoolean","ftInteger","ftFloat","ftString","ftDateTime","ftAutoInc","ftGUID"];var TW3DatasetFields={$ClassName:"TW3DatasetFields",$Parent:TObject,$Init:function($){TObject.$Init($);$.FFields$2=[]},Add$4:function(S,aName$3,aKind$1){var R=null;R=null;aName$3=(Trim$_String_(aName$3)).toLowerCase();if(aName$3.length>0){if(TW3DatasetFields.IndexOf$4(S,aName$3)==-1){switch(aKind$1){case 1:R=TW3DatasetField.Create$71($New(TW3BooleanField),S);break;case 2:R=TW3DatasetField.Create$71($New(TW3IntegerField),S);break;case 3:R=TW3DatasetField.Create$71($New(TW3FloatField),S);break;case 4:R=TW3DatasetField.Create$71($New(TW3StringField),S);break;case 5:R=TW3DatasetField.Create$71($New(TW3DateTimeField),S);break;case 6:R=TW3DatasetField.Create$71($New(TW3AutoIncField),S);break;case 7:R=TW3DatasetField.Create$71($New(TW3GUIDField),S);break;default:R=null}
if(R!==null){TW3DatasetField.setName(R,aName$3);S.FFields$2.push(R)}else{throw Exception.Create($New(EW3DatasetField),$R[19])}}}
return R},Clear$8:function(S){var x$48=0;if(S.FFields$2.length>0){try{var $tR;for(x$48=0,$tR=S.FFields$2.length;x$48<$tR;x$48++){TObject.Free(S.FFields$2[x$48])}}finally{S.FFields$2.length=0}}},ClearData:function(S){var mField=null;var a$87=0;if(S.FFields$2.length>0){var a$88=[];a$88=S.FFields$2;var $tS;for(a$87=0,$tS=a$88.length;a$87<$tS;a$87++){mField=a$88[a$87];TW3DatasetField.setValue(mField,null)}}},DataImport:function(S,aValue$36){var mField$1=null;var a$89=0;if(S.FFields$2.length>0){var a$90=[];a$90=S.FFields$2;var $tT;for(a$89=0,$tT=a$90.length;a$89<$tT;a$89++){mField$1=a$90[a$89];TW3DatasetField.setValue(mField$1,aValue$36[mField$1.FName$3])}}},Destroy:function(S){TW3DatasetFields.Clear$8(S);TObject.Destroy(S)},FieldByName$2:function(S,aName$4){var R=null;var x$49=0;R=null;aName$4=(Trim$_String_(aName$4)).toLowerCase();if(aName$4.length>0){var $tU;for(x$49=0,$tU=S.FFields$2.length;x$49<$tU;x$49++){if(S.FFields$2[x$49].FName$3==aName$4){R=S.FFields$2[x$49];break}}}
return R},IndexOf$4:function(S,aName$5){var R=0;var x$50=0;R=-1;aName$5=(Trim$_String_(aName$5)).toLowerCase();if(aName$5.length>0){var $tV;for(x$50=0,$tV=S.FFields$2.length;x$50<$tV;x$50++){if(S.FFields$2[x$50].FName$3==aName$5){R=x$50;break}}}
return R},ResetValues:function(S){var mItem$1=null;var a$91=0;if(S.FFields$2.length>0){var a$92=[];a$92=S.FFields$2;var $tW;for(a$91=0,$tW=a$92.length;a$91<$tW;a$91++){mItem$1=a$92[a$91];TW3DatasetField.setValue(mItem$1,null)}}},setReadOnly$2:function(S,aValue$37){var x$51=0;if(S.FFields$2.length>0){var $tX;for(x$51=0,$tX=S.FFields$2.length;x$51<$tX;x$51++){TW3DatasetField.setReadOnly(S.FFields$2[x$51],aValue$37)}}},Destroy$:function($){return $.ClassType.Destroy($)}};TW3DatasetFields.$Intf={IDatasetFieldsAccess:[TW3DatasetFields.ResetValues,TW3DatasetFields.setReadOnly$2]}
var TW3BooleanField={$ClassName:"TW3BooleanField",$Parent:TW3DatasetField,$Init:function($){TW3DatasetField.$Init($)},Destroy:TObject.Destroy,Generate:TW3DatasetField.Generate,getGenerated:TW3DatasetField.getGenerated,ReadBinaryValue:TW3DatasetField.ReadBinaryValue,WriteBinaryValue:TW3DatasetField.WriteBinaryValue};var TW3AutoIncField={$ClassName:"TW3AutoIncField",$Parent:TW3DatasetField,$Init:function($){TW3DatasetField.$Init($);$.FCalc=0},Generate:function(S){++S.FCalc;TW3DatasetField.setValue(S,S.FCalc)},getGenerated:function(S){var R=false;R=true;return R},ReadBinaryValue:function(S,Reader$2){S.FCalc=TReader.ReadInteger(Reader$2);TW3DatasetField.setValue(S,TReader.ReadInteger(Reader$2))},WriteBinaryValue:function(S,Writer$2){TWriter.WriteInteger(Writer$2,S.FCalc);TWriter.WriteInteger(Writer$2,TW3DatasetField.a$43(S))},Destroy:TObject.Destroy,Generate$:function($){return $.ClassType.Generate($)},getGenerated$:function($){return $.ClassType.getGenerated($)},ReadBinaryValue$:function($){return $.ClassType.ReadBinaryValue.apply($.ClassType,arguments)},WriteBinaryValue$:function($){return $.ClassType.WriteBinaryValue.apply($.ClassType,arguments)}};var EW3FieldDefs={$ClassName:"EW3FieldDefs",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var EW3DatasetField={$ClassName:"EW3DatasetField",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var EW3Dataset={$ClassName:"EW3Dataset",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};function Copy$TW3FieldDefHeader(s,d){d.ddMagic=s.ddMagic;d.ddDefs=s.ddDefs;return d}
function Clone$TW3FieldDefHeader($){return{ddMagic:$.ddMagic,ddDefs:$.ddDefs}}
function Copy$TW3FieldDefData(s,d){d.fdName=s.fdName;d.fdDatatype=s.fdDatatype;return d}
function Clone$TW3FieldDefData($){return{fdName:$.fdName,fdDatatype:$.fdDatatype}}
function Copy$TW3DatasetHeader(s,d){d.dhMagic=s.dhMagic;d.dhCount=s.dhCount;d.dhFieldDefs=s.dhFieldDefs;return d}
function Clone$TW3DatasetHeader($){return{dhMagic:$.dhMagic,dhCount:$.dhCount,dhFieldDefs:$.dhFieldDefs}}
var TRTLDatatype=["itBoolean","itByte","itChar","itWord","itLong","itInt16","itInt32","itFloat32","itFloat64"];var TDatatype={$ClassName:"TDatatype",$Parent:TObject,$Init:function($){TObject.$Init($)},BytesToBoolean:function(S,data$6){var R=false;if(data$6.length>=1){R=data$6[0]>0}else{throw Exception.Create($New(EDatatype),"Byte conversion [Bool] failed, insufficient source")}
return R},BytesToFloat32:function(S,Data$1){var R=0;if(Data$1.length>=4){__CONV_VIEW.setUint8(0,Data$1[0]);__CONV_VIEW.setUint8(1,Data$1[1]);__CONV_VIEW.setUint8(2,Data$1[2]);__CONV_VIEW.setUint8(3,Data$1[3]);R=__CONV_VIEW.getFloat32(0,LittleEndian)}else{throw Exception.Create($New(EDatatype),"Byte conversion [float32] failed, insufficient source")}
return R},BytesToFloat64:function(S,Data$2){var R=0;if(Data$2.length>=8){__CONV_VIEW.setUint8(0,Data$2[0]);__CONV_VIEW.setUint8(1,Data$2[1]);__CONV_VIEW.setUint8(2,Data$2[2]);__CONV_VIEW.setUint8(3,Data$2[3]);__CONV_VIEW.setUint8(4,Data$2[4]);__CONV_VIEW.setUint8(5,Data$2[5]);__CONV_VIEW.setUint8(6,Data$2[6]);__CONV_VIEW.setUint8(7,Data$2[7]);R=__CONV_VIEW.getFloat64(0,LittleEndian)}else{throw Exception.Create($New(EDatatype),"Byte conversion [float32] failed, insufficient source")}
return R},BytesToInt32:function(S,Data$3){var R=0;if(Data$3.length>=4){__CONV_VIEW.setUint8(0,Data$3[0]);__CONV_VIEW.setUint8(1,Data$3[1]);__CONV_VIEW.setUint8(2,Data$3[2]);__CONV_VIEW.setUint8(3,Data$3[3]);R=__CONV_VIEW.getUint32(0,LittleEndian)}else{throw Exception.Create($New(EDatatype),"Byte conversion [int32] failed, insufficient source")}
return R},BytesToString:function(S,Data$4){var R="";var x$52=0;var mSize$1=0;mSize$1=Data$4.length;if(mSize$1>0){var $tY;for(x$52=0,$tY=mSize$1;x$52<$tY;x$52++){R+=TDatatype.ByteToChar(S,Data$4[x$52])}}
return R},BytesToTypedArray:function(S,Values$1){var R=undefined;var mLen=0;mLen=Values$1.length;if(mLen>0){R=new Uint8Array(mLen);(R).set(Values$1,0)}else R=null;return R},ByteToChar:function(S,Value$15){var R="";R=String.fromCharCode(Value$15);return R},CharToByte:function(S,Value$16){var R=0;R=(Value$16).charCodeAt(0);return R},CreateGUID:function(S){var R="";var s=[];var hexDigits="0123456789abcdef";for(var i=0;i<36;i++){s[i]=hexDigits.substr(Math.floor(Math.random()*0x10),1)}
s[14]="4";s[19]=hexDigits.substr((s[19]&0x3)|0x8,1);s[8]=s[13]=s[18]=s[23]="-";R=s.join("");R=(R).toUpperCase();return R},Float32ToBytes:function(S,Value$17){var R=[];__CONV_VIEW.setFloat32(0,Value$17,LittleEndian);R.push(__CONV_VIEW.getUint8(0));R.push(__CONV_VIEW.getUint8(1));R.push(__CONV_VIEW.getUint8(2));R.push(__CONV_VIEW.getUint8(3));return R},Float64ToBytes:function(S,Value$18){var R=[];__CONV_VIEW.setFloat64(0,Number(Value$18),LittleEndian);R.push(__CONV_VIEW.getUint8(0));R.push(__CONV_VIEW.getUint8(1));R.push(__CONV_VIEW.getUint8(2));R.push(__CONV_VIEW.getUint8(3));R.push(__CONV_VIEW.getUint8(4));R.push(__CONV_VIEW.getUint8(5));R.push(__CONV_VIEW.getUint8(6));R.push(__CONV_VIEW.getUint8(7));return R},Int32ToBytes:function(S,Value$19){var R=[];__CONV_VIEW.setUint32(0,Value$19,LittleEndian);R.push(__CONV_VIEW.getUint8(0));R.push(__CONV_VIEW.getUint8(1));R.push(__CONV_VIEW.getUint8(2));R.push(__CONV_VIEW.getUint8(3));return R},SizeOfType:function(S,Kind$1){var R=0;R=__SIZES[Kind$1];return R},StringToBytes:function(S,Value$20){var R=[];var x$53=0;var $tZ;for(x$53=1,$tZ=Value$20.length;x$53<=$tZ;x$53++){R.push(TDatatype.CharToByte(S,Value$20.charAt(x$53-1)))}
return R},TypedArrayToBytes:function(S,value$7){var R=[];if(TVariant.ValidRef(value$7)){R=Array.prototype.slice.call(value$7)}
return R},TypedArrayToUInt32:function(S,value$8){var R=0;var mTemp$2=null;mTemp$2=new Uint32Array((value$8).buffer);R=mTemp$2[0];return R},Destroy:TObject.Destroy};var EDatatype={$ClassName:"EDatatype",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};function setupLUT(){try{__CONV_BUFFER=new ArrayBuffer(16);__CONV_VIEW=new DataView(__CONV_BUFFER);__CONV_ARRAY=new Uint8Array(__CONV_BUFFER,0,15)}catch($e){}};var TStreamSeekOrigin=["soFromBeginning","soFromCurrent","soFromEnd"];var TStream={$ClassName:"TStream",$Parent:TObject,$Init:function($){TObject.$Init($)},CopyFrom:function(S,Source,Count$8){var R=0;R=0;throw Exception.Create($New(EW3StreamNotImplemented),$R[41]);return R},GetPosition:function(S){var R=0;R=0;throw Exception.Create($New(EW3StreamNotImplemented),$R[41]);return R},GetSize$1:function(S){var R=0;R=0;throw Exception.Create($New(EW3StreamNotImplemented),$R[41]);return R},Read$1:function(S,Count$9){var R=[];R=TStream.ReadBuffer$(S,TStream.GetPosition$(S),Count$9);return R},ReadBuffer:function(S,Offset$4,Count$10){var R=[];R.length=0;throw Exception.Create($New(EW3StreamNotImplemented),$R[41]);return R},Seek:function(S,Offset$5,Origin){var R=0;R=0;throw Exception.Create($New(EW3StreamNotImplemented),$R[41]);return R},SetPosition:function(S,aPos){throw Exception.Create($New(EW3StreamNotImplemented),$R[41])},SetSize$6:function(S,NewSize){throw Exception.Create($New(EW3StreamNotImplemented),$R[41])},Skip:function(S,Amount){var R=0;R=0;throw Exception.Create($New(EW3StreamNotImplemented),$R[41]);return R},Write$1:function(S,Buffer$1){var R=0;TStream.WriteBuffer$(S,Buffer$1,TStream.GetPosition$(S));R=Buffer$1.length;return R},WriteBuffer:function(S,Buffer$2,Offset$6){throw Exception.Create($New(EW3StreamNotImplemented),$R[41])},Destroy:TObject.Destroy,CopyFrom$:function($){return $.ClassType.CopyFrom.apply($.ClassType,arguments)},GetPosition$:function($){return $.ClassType.GetPosition($)},GetSize$1$:function($){return $.ClassType.GetSize$1($)},ReadBuffer$:function($){return $.ClassType.ReadBuffer.apply($.ClassType,arguments)},Seek$:function($){return $.ClassType.Seek.apply($.ClassType,arguments)},SetPosition$:function($){return $.ClassType.SetPosition.apply($.ClassType,arguments)},SetSize$6$:function($){return $.ClassType.SetSize$6.apply($.ClassType,arguments)},Skip$:function($){return $.ClassType.Skip.apply($.ClassType,arguments)},WriteBuffer$:function($){return $.ClassType.WriteBuffer.apply($.ClassType,arguments)}};var TMemoryStream={$ClassName:"TMemoryStream",$Parent:TStream,$Init:function($){TStream.$Init($);$.FBuffer=null;$.FPos=0},CopyFrom:function(S,Source$1,Count$11){var R=0;var mData$7=[];mData$7=TStream.ReadBuffer$(Source$1,TStream.GetPosition$(Source$1),Count$11);TStream.WriteBuffer$(S,mData$7,TStream.GetPosition$(S));R=mData$7.length;return R},Create$62:function(S){TObject.Create(S);S.FBuffer=TAllocation.Create$66($New(TAllocation));return S},Destroy:function(S){TObject.Free(S.FBuffer);TObject.Destroy(S)},GetPosition:function(S){var R=0;R=S.FPos;return R},GetSize$1:function(S){var R=0;R=TAllocation.getSize(S.FBuffer);return R},ReadBuffer:function(S,Offset$7,Count$12){var R=[];var mTemp$3=undefined;var mLen$1=0;if(TStream.GetPosition$(S)<TStream.GetSize$1$(S)){mLen$1=TStream.GetSize$1$(S)-TStream.GetPosition$(S)}else mLen$1=0;if(mLen$1>0){try{mTemp$3=new Uint8Array(Count$12);TMarshal.Move$3(TMarshal,TAllocation.getHandle(S.FBuffer),Offset$7,mTemp$3,0,Count$12);R=TDatatype.TypedArrayToBytes(TDatatype,mTemp$3);TStream.SetPosition$(S,Offset$7+R.length)}catch($e){var e$10=$W($e);throw EW3Exception.CreateFmt($New(EW3StreamReadError),$R[43],[e$10.FMessage])}}
return R},Seek:function(S,Offset$8,Origin$1){var R=0;var mSize$2=0;mSize$2=TStream.GetSize$1$(S);if(mSize$2>0){switch(Origin$1){case 0:if(Offset$8>-1){TStream.SetPosition$(S,Offset$8);R=Offset$8}
break;case 1:R=TInteger.EnsureRange((TStream.GetPosition$(S)+Offset$8),0,mSize$2);TStream.SetPosition$(S,R);break;case 2:R=TInteger.EnsureRange((TStream.GetSize$1$(S)-Math.abs(Offset$8)),0,mSize$2);TStream.SetPosition$(S,R);break}}
return R},SetPosition:function(S,aPos$1){var mSize$3=0;mSize$3=TStream.GetSize$1$(S);if(mSize$3>0)S.FPos=TInteger.EnsureRange(aPos$1,0,TStream.GetSize$1$(S))},SetSize$6:function(S,NewSize$1){var mSize$4=0;var mDiff=0;mSize$4=TStream.GetSize$1$(S);if(NewSize$1>0){if(NewSize$1>mSize$4){mDiff=NewSize$1-mSize$4;if(TAllocation.getSize(S.FBuffer)+mDiff>0){TAllocation.Grow(S.FBuffer,mDiff)}else TAllocation.Release$1(S.FBuffer)}else{mDiff=mSize$4-NewSize$1;if(TAllocation.getSize(S.FBuffer)-mDiff>0){TAllocation.Shrink(S.FBuffer,mDiff)}else TAllocation.Release$1(S.FBuffer)}}else TAllocation.Release$1(S.FBuffer);S.FPos=TInteger.EnsureRange(S.FPos,0,TStream.GetSize$1$(S))},Skip:function(S,Amount$1){var R=0;var mTotal$1=0;var mSize$5=0;mSize$5=TStream.GetSize$1$(S);if(mSize$5>0){mTotal$1=TStream.GetPosition$(S)+Amount$1;if(mTotal$1>mSize$5)mTotal$1=mSize$5-mTotal$1;(S.FPos+=mTotal$1);R=mTotal$1}
return R},WriteBuffer:function(S,Buffer$3,Offset$9){var mData$8=undefined;try{if(TAllocation.a$35(S.FBuffer)&&Offset$9<1){TAllocation.Allocate$1(S.FBuffer,Buffer$3.length);mData$8=TDatatype.BytesToTypedArray(TDatatype,Buffer$3);TMarshal.Move$3(TMarshal,mData$8,0,TAllocation.getHandle(S.FBuffer),0,Buffer$3.length);TMarshal.Move$3(TMarshal,mData$8,0,TAllocation.getHandle(S.FBuffer),0,Buffer$3.length)}else{if(TStream.GetPosition$(S)==TStream.GetSize$1$(S)){TAllocation.Grow(S.FBuffer,Buffer$3.length);mData$8=TDatatype.BytesToTypedArray(TDatatype,Buffer$3);TMarshal.Move$3(TMarshal,mData$8,0,TAllocation.getHandle(S.FBuffer),Offset$9,Buffer$3.length)}else TMarshal.Move$3(TMarshal,TDatatype.BytesToTypedArray(TDatatype,Buffer$3),0,TAllocation.getHandle(S.FBuffer),Offset$9,Buffer$3.length)}
TStream.SetPosition$(S,Offset$9+Buffer$3.length)}catch($e){var e$11=$W($e);throw EW3Exception.CreateFmt($New(EW3StreamWriteError),$R[42],[e$11.FMessage])}},Destroy$:function($){return $.ClassType.Destroy($)},CopyFrom$:function($){return $.ClassType.CopyFrom.apply($.ClassType,arguments)},GetPosition$:function($){return $.ClassType.GetPosition($)},GetSize$1$:function($){return $.ClassType.GetSize$1($)},ReadBuffer$:function($){return $.ClassType.ReadBuffer.apply($.ClassType,arguments)},Seek$:function($){return $.ClassType.Seek.apply($.ClassType,arguments)},SetPosition$:function($){return $.ClassType.SetPosition.apply($.ClassType,arguments)},SetSize$6$:function($){return $.ClassType.SetSize$6.apply($.ClassType,arguments)},Skip$:function($){return $.ClassType.Skip.apply($.ClassType,arguments)},WriteBuffer$:function($){return $.ClassType.WriteBuffer.apply($.ClassType,arguments)}};var TAddress={$ClassName:"TAddress",$Parent:TObject,$Init:function($){TObject.$Init($);$.FBuffer$1=undefined;$.FOffset=0},Create$64:function(S,Stream){var mRef$18=undefined;if($Is(Stream,TMemoryStream)){mRef$18=TAllocation.getHandle($As(Stream,TMemoryStream).FBuffer);if(mRef$18){TAddress.Create$63(S,mRef$18,0)}else{throw Exception.Create($New(EAddress),$R[39])}}else{throw Exception.Create($New(EAddress),$R[40])}
return S},Create$63:function(S,aSegment,aEntrypoint){TObject.Create(S);if(TMemoryHandleHelper$Defined(aSegment)&&TMemoryHandleHelper$Valid$1(aSegment)){S.FBuffer$1=aSegment}else{throw Exception.Create($New(EAddress),"Failed to derive address, invalid segment error")}
if(aEntrypoint>=0){S.FOffset=aEntrypoint}else{throw Exception.Create($New(EAddress),"Failed to derive address, invalid entrypoint error")}
return S},Destroy:function(S){S.FBuffer$1=null;S.FOffset=0;TObject.Destroy(S)},Destroy$:function($){return $.ClassType.Destroy($)}};var EW3Stream={$ClassName:"EW3Stream",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var EW3StreamWriteError={$ClassName:"EW3StreamWriteError",$Parent:EW3Stream,$Init:function($){EW3Stream.$Init($)},Destroy:Exception.Destroy};var EW3StreamReadError={$ClassName:"EW3StreamReadError",$Parent:EW3Stream,$Init:function($){EW3Stream.$Init($)},Destroy:Exception.Destroy};var EW3StreamNotImplemented={$ClassName:"EW3StreamNotImplemented",$Parent:EW3Stream,$Init:function($){EW3Stream.$Init($)},Destroy:Exception.Destroy};var TUnManaged={$ClassName:"TUnManaged",$Parent:TObject,$Init:function($){TObject.$Init($)},AllocMemA:function(S,Size$4){var R=undefined;if(Size$4>0){R=new Uint8Array(Size$4)}else R=null;return R},ReAllocMemA:function(S,Memory$1,Size$5){var R=undefined;if(Memory$1){if(Size$5>0){R=new Uint8Array(Size$5);TMarshal.Move$3(TMarshal,Memory$1,0,R,0,Size$5)}}else R=TUnManaged.AllocMemA(S,Size$5);return R},ReadMemoryA:function(S,Memory$2,Offset$10,Size$6){var R=undefined;var mTotal$2=0;if(Memory$2){if(Offset$10>=0){mTotal$2=Offset$10+Size$6;if(mTotal$2>Memory$2.length)Size$6=parseInt((Memory$2.length-mTotal$2),10);if(Size$6>0)R=new Uint8Array(Memory$2.buffer.slice(Offset$10,Size$6))}}
return R},WriteMemoryA:function(S,Memory$3,Offset$11,Data$5){var R=0;var mTotal$3=0;var mChunk=null,mTemp$4=null;if(Memory$3){if(Data$5){mTotal$3=parseInt((Offset$11+Data$5.length),10);if(mTotal$3>Memory$3.length){R=parseInt((Memory$3.length-mTotal$3),10)}else R=parseInt(Data$5.length,10);if(R>0){if(Offset$11+Data$5.length<=Memory$3.length){Memory$3.set(Data$5,Offset$11)}else{mChunk=Data$5.buffer.slice(0,R-1);mTemp$4=new Uint8Array(mChunk);Memory$3.set(mTemp$4,Offset$11)}}}}
return R},Destroy:TObject.Destroy};var TMarshal={$ClassName:"TMarshal",$Parent:TObject,$Init:function($){TObject.$Init($)},Move$3:function(S,Source$2,SourceStart,Target$2,TargetStart,Size$7){var mRef$19=null;if(TMemoryHandleHelper$Valid$1(Source$2)&&SourceStart>=0&&TMemoryHandleHelper$Valid$1(Target$2)&&TargetStart>=0&&Size$7>0){mRef$19=Source$2.subarray(SourceStart,SourceStart+Size$7);Target$2.set(mRef$19,TargetStart)}},Move$2:function(S,Source$3,Target$3,Size$8){if(Source$3!==null){if(Target$3!==null){if(Size$8>0)TMarshal.Move$3(S,Source$3.FBuffer$1,Source$3.FOffset,Target$3.FBuffer$1,Target$3.FOffset,Size$8)}}},Destroy:TObject.Destroy};var EAddress={$ClassName:"EAddress",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var TAllocationOptions={$ClassName:"TAllocationOptions",$Parent:TW3OwnedObject,$Init:function($){TW3OwnedObject.$Init($);$.FCacheSize=0;$.FUseCache=false},a$34:function(S){return $As(S.FOwner,TAllocation)},Create$65:function(S,AOwner$8){TW3OwnedObject.Create$11(S,AOwner$8);S.FCacheSize=4096;S.FUseCache=true;return S},getCacheFree:function(S){var R=0;R=S.FCacheSize-TAllocationOptions.getCacheUsed(S);return R},getCacheUsed:function(S){var R=0;if(S.FUseCache){R=parseInt((S.FCacheSize-(TAllocation.getHandle(TAllocationOptions.a$34(S)).length-TAllocation.getSize(TAllocationOptions.a$34(S)))),10)}else R=0;return R},setCacheSize:function(S,value$9){S.FCacheSize=TInteger.EnsureRange(value$9,1024,(1024*1000))},setUseCache:function(S,Value$21){S.FUseCache=Value$21},Destroy:TObject.Destroy,AcceptParent:TW3OwnedObject.AcceptParent,Create$11:TW3OwnedObject.Create$11};var TAllocation={$ClassName:"TAllocation",$Parent:TObject,$Init:function($){TObject.$Init($);$.FHandle$6=undefined;$.FOptions=null;$.FSize=0},a$35:function(S){return((!S.FHandle$6)?true:false)},Allocate$1:function(S,Bytes){var mSize$6=0;if(S.FHandle$6)TAllocation.Release$1(S);if(Bytes>0){mSize$6=TInteger.ToNearest(Bytes,16);if(S.FOptions.FUseCache)(mSize$6+=S.FOptions.FCacheSize);S.FHandle$6=TUnManaged.AllocMemA(TUnManaged,mSize$6);S.FSize=Bytes;TAllocation.HandleAllocated(S)}},Create$66:function(S){TObject.Create(S);S.FOptions=TAllocationOptions.Create$65($New(TAllocationOptions),S);return S},dataGetSize:function(S){var R=0;R=TAllocation.getSize(S);return R},dataOffset:function(S){var R=0;R=0;return R},dataRead:function(S,Offset$12,ByteCount){var R=[];var mRef$20=undefined;mRef$20=TUnManaged.ReadMemoryA(TUnManaged,TAllocation.getHandle(S),Offset$12,ByteCount);R=TDatatype.TypedArrayToBytes(TDatatype,mRef$20);return R},dataWrite:function(S,Offset$13,Bytes$1){TUnManaged.WriteMemoryA(TUnManaged,TAllocation.getHandle(S),Offset$13,TDatatype.BytesToTypedArray(TDatatype,Bytes$1))},Destroy:function(S){if(S.FHandle$6)TAllocation.Release$1(S);TObject.Free(S.FOptions);TObject.Destroy(S)},getHandle:function(S){var R=undefined;R=S.FHandle$6;return R},getSize:function(S){var R=0;R=S.FSize;return R},getTotalSize:function(S){var R=0;if(S.FHandle$6)R=parseInt(S.FHandle$6.length,10);return R},GetTransport:function(S){var R=null;R=$AsIntf(S,"IDataTransport");return R},Grow:function(S,Bytes$2){if(S.FHandle$6){if(S.FOptions.FUseCache){if(Bytes$2<TAllocationOptions.getCacheFree(S.FOptions)){(S.FSize+=Bytes$2);return}else{TAllocation.ReAllocate(S,(S.FSize+Bytes$2))}
return}
(S.FSize+=Bytes$2);TAllocation.ReAllocate(S,S.FSize)}else TAllocation.Allocate$1(S,Bytes$2)},HandleAllocated:function(S){},HandleReleased:function(S){},ReAllocate:function(S,NewSize$2){var mSize$7=0;if(S.FHandle$6){TAllocation.HandleReleased(S);mSize$7=NewSize$2;if(S.FOptions.FUseCache)(mSize$7+=S.FOptions.FCacheSize);S.FHandle$6=TUnManaged.ReAllocMemA(TUnManaged,S.FHandle$6,mSize$7);S.FSize=NewSize$2}else TAllocation.Allocate$1(S,NewSize$2);TAllocation.HandleAllocated(S)},Release$1:function(S){if(S.FHandle$6){S.FHandle$6.buffer=null;S.FHandle$6=null;S.FSize=0;TAllocation.HandleReleased(S)}},Shrink:function(S,Bytes$3){var mSize$8=0;if(S.FHandle$6){if(S.FOptions.FUseCache){mSize$8=TInteger.EnsureRange((TAllocation.getSize(S)-Bytes$3),0,2147483647);if(mSize$8>0){if(mSize$8>S.FSize+S.FOptions.FCacheSize){TAllocation.ReAllocate(S,mSize$8)}else{S.FSize=mSize$8}}else TAllocation.Release$1(S);return}
mSize$8=TInteger.EnsureRange((TAllocation.getSize(S)-Bytes$3),0,2147483647);if(mSize$8>0){TAllocation.ReAllocate(S,mSize$8)}else TAllocation.Release$1(S)}},Transport:function(S,Target$4){var mOffset=0;if(Target$4){if(!TAllocation.a$35(S)){try{mOffset=Target$4[0]();Target$4[3](mOffset,TDatatype.TypedArrayToBytes(TDatatype,TAllocation.getHandle(S)))}catch($e){var e$12=$W($e);throw EW3Exception.CreateFmt($New(EAllocation),"Data transport failed, mechanism threw exception %s with error [%s]",[TObject.ClassName(e$12.ClassType),e$12.FMessage])}}}else{throw Exception.Create($New(EAllocation),"Invalid transport interface, reference was NIL error")}},Destroy$:function($){return $.ClassType.Destroy($)}};TAllocation.$Intf={IAllocation:[TAllocation.getHandle,TAllocation.getTotalSize,TAllocation.getSize,TAllocation.GetTransport,TAllocation.Allocate$1,TAllocation.Release$1,TAllocation.Grow,TAllocation.Shrink,TAllocation.ReAllocate,TAllocation.Transport],IDataTransport:[TAllocation.dataOffset,TAllocation.dataGetSize,TAllocation.dataRead,TAllocation.dataWrite]}
function a$93(S){return((!S[0]())?true:false)}
var EAllocation={$ClassName:"EAllocation",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var TReader={$ClassName:"TReader",$Parent:TObject,$Init:function($){TObject.$Init($);$.FStream$1=null},Create$68:function(S,Stream$1){TObject.Create(S);S.FStream$1=Stream$1;return S},ReadBoolean:function(S){var R=false;var mBytes=[];mBytes=TStream.Read$1(S.FStream$1,TDatatype.SizeOfType(TDatatype,1));if(mBytes.length==TDatatype.SizeOfType(TDatatype,1)){R=TDatatype.BytesToBoolean(TDatatype,mBytes)}else{throw EW3Exception.CreateFmt($New(EReadError),"Read failed, expected %d bytes, not %d [boolean]",[TDatatype.SizeOfType(TDatatype,1),mBytes.length])}
return R},ReadDouble:function(S){var R=undefined;var mBytes$1=[];mBytes$1=TStream.Read$1(S.FStream$1,TDatatype.SizeOfType(TDatatype,8));if(mBytes$1.length==TDatatype.SizeOfType(TDatatype,8)){R=TDatatype.BytesToFloat64(TDatatype,mBytes$1)}else{throw EW3Exception.CreateFmt($New(EReadError),"Read failed, expected %d bytes, not %d [double]",[TDatatype.SizeOfType(TDatatype,8),mBytes$1.length])}
return R},ReadInteger:function(S){var R=0;var mBytes$2=[];mBytes$2=TStream.Read$1(S.FStream$1,TDatatype.SizeOfType(TDatatype,6));if(mBytes$2.length==TDatatype.SizeOfType(TDatatype,6)){R=TDatatype.BytesToInt32(TDatatype,mBytes$2)}else{throw EW3Exception.CreateFmt($New(EReadError),"Read failed, expected %d bytes, not %d [integer]",[TDatatype.SizeOfType(TDatatype,8),mBytes$2.length])}
return R},ReadStr:function(S,Bytes$4){var R="";var mBytes$3=[];mBytes$3=TStream.Read$1(S.FStream$1,Bytes$4);if(mBytes$3.length==Bytes$4){R=TDatatype.BytesToString(TDatatype,mBytes$3)}else{throw EW3Exception.CreateFmt($New(EReadError),"Read failed, expected %d bytes, not %d [raw-string]",[Bytes$4,mBytes$3.length])}
return R},ReadString:function(S){var R="";var mLen$2=0;if(TReader.ReadInteger(S)==3131756270){mLen$2=TReader.ReadInteger(S);if(mLen$2>0)R=TReader.ReadStr(S,mLen$2)}else{throw Exception.Create($New(EReadError),"Read failed, invalid signature error [string]")}
return R},Destroy:TObject.Destroy};var EReadError={$ClassName:"EReadError",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var TWriter={$ClassName:"TWriter",$Parent:TObject,$Init:function($){TObject.$Init($);$.FStream=null},Create$67:function(S,Stream$2){TObject.Create(S);S.FStream=Stream$2;return S},WriteBoolean:function(S,Value$22){try{if(Value$22){TStream.Write$1(S.FStream,([1].slice()))}else TStream.Write$1(S.FStream,([0].slice()))}catch($e){var e$13=$W($e);throw Exception.Create($New(EWriterError),e$13.FMessage)}},WriteDouble:function(S,Value$23){try{TStream.Write$1(S.FStream,TDatatype.Float64ToBytes(TDatatype,Value$23))}catch($e){var e$14=$W($e);throw Exception.Create($New(EWriterError),e$14.FMessage)}},WriteInteger:function(S,Value$24){try{TStream.Write$1(S.FStream,TDatatype.Int32ToBytes(TDatatype,Value$24))}catch($e){var e$15=$W($e);throw Exception.Create($New(EWriterError),e$15.FMessage)}},WriteString:function(S,Value$25){try{TWriter.WriteInteger(S,3131756270);TWriter.WriteInteger(S,Value$25.length);TStream.Write$1(S.FStream,TDatatype.StringToBytes(TDatatype,Value$25))}catch($e){var e$16=$W($e);throw Exception.Create($New(EWriterError),e$16.FMessage)}},Destroy:TObject.Destroy};var EWriterError={$ClassName:"EWriterError",$Parent:EW3Stream,$Init:function($){EW3Stream.$Init($)},Destroy:Exception.Destroy};var TW3ComboBox={$ClassName:"TW3ComboBox",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($)},Add$5:function(S,aValue$38){var R=0;var mObj$11=undefined;if(S.FHandle){mObj$11=w3_createHtmlElement("option");mObj$11.text=aValue$38;TW3TagObj.BeginUpdate(S);try{S.FHandle.add(mObj$11)}finally{TW3TagObj.EndUpdate(S)}
R=TW3ComboBox.getCount$1(S)-1}else{throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3ComboBox.Add",TObject.ClassName(S.ClassType),"Invalid error"])}
return R},Clear$9:function(S){TW3TagObj.BeginUpdate(S);try{while(TW3ComboBox.getCount$1(S)>0){TW3ComboBox.Remove$3(S,0)}}finally{TW3TagObj.AddToComponentState(S,[8]);TW3TagObj.EndUpdate(S)}},getCount$1:function(S){var R=0;if(S.FHandle){try{R=parseInt(S.FHandle.options.length,10)}catch($e){var E=$W($e);throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3ComboBox.getCount",TObject.ClassName(S.ClassType),E.FMessage])}}else{throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3ComboBox.getCount",TObject.ClassName(S.ClassType),"invalid handle error"])}
return R},getSelIndex:function(S){var R=0;if(S.FHandle){try{R=TVariant.AsInteger(S.FHandle.selectedIndex)}catch($e){var E$1=$W($e);throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3ComboBox.getSelIndex",TObject.ClassName(S.ClassType),E$1.FMessage])}}else{throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3ComboBox.getSelIndex",TObject.ClassName(S.ClassType),"Invalid handle error"])}
return R},getValue$2:function(S,index$2){var R=undefined;if(S.FHandle){try{R=S.FHandle.options[index$2].value}catch($e){var E$2=$W($e);throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3ComboBox.getValue",TObject.ClassName(S.ClassType),E$2.FMessage])}}else{throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3ComboBox.getValue",TObject.ClassName(S.ClassType),"invalid handle error"])}
return R},MakeElementTagObj:function(S){var R=undefined;R=w3_createHtmlElement("select");return R},Remove$3:function(S,aIndex){if(S.FHandle){try{S.FHandle.options.remove(aIndex)}catch($e){var E$3=$W($e);throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3ComboBox.Remove",TObject.ClassName(S.ClassType),E$3.FMessage])}}else{throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3ComboBox.Remove",TObject.ClassName(S.ClassType),"invalid handle error"])}},setSelIndex:function(S,aValue$39){if(S.FHandle){try{S.FHandle.selectedIndex=aValue$39}catch($e){var E$4=$W($e);throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3ComboBox.setSelIndex",TObject.ClassName(S.ClassType),E$4.FMessage])}}else{throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3ComboBox.setSelIndex",TObject.ClassName(S.ClassType),"Invalid handle error"])}},setValue$2:function(S,index$3,aValue$40){if(S.FHandle){try{S.FHandle.options[index$3].value=aValue$40}catch($e){var E$5=$W($e);throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3ComboBox.setValue",TObject.ClassName(S.ClassType),E$5.FMessage])}}else{throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3ComboBox.setValue",TObject.ClassName(S.ClassType),"invalid handle error"])}},Destroy:TW3TagObj.Destroy,AfterUpdate:TW3CustomControl.AfterUpdate,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3CustomControl.InitializeObject,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)},Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,Create$28:TW3CustomControl.Create$28,Resize:TW3MovableControl.Resize};var vColorNames=[],vColorNames=["aqua","black","blue","fuchsia","green","gray","lime","maroon","navy","olive","purple","red","silver","teal","white","yellow"].slice();var vColorValues=[],vColorValues=["#0ff","#000","#00f","#f0f","#008000","#808080","#0f0","#800000","#000080","#808000","#800080","#f00","#c0c0c0","#008080","#fff","#ff00"].slice();var vCurrent=null;var RegisterComponentsProc=null;var DefaultDuration=0,DefaultDuration=2;var DefaultTiming=0,DefaultTiming=1;var Instance=null;var LittleEndian=false,LittleEndian=false;var a$33=null;var vGetNow,vIsHighResolution=false;var Application$1=null;var __CONV_BUFFER=null;var __CONV_VIEW=null;var __CONV_ARRAY=null;var __SIZES=[0,0,0,0,0,0,0,0,0];var __SIZES=[1,1,1,2,4,2,4,4,8];var GForms=null;var _FontDetect=null;var vUniqueNumber=0;var vVendor=0;var vDriver=null;var vRequestAnimFrame=null;var vCancelAnimFrame=null;TApplicationFormsList.RegisterForm(Forms$2(),"Form1",TForm1);setupLUT();TApplicationFormsList.RegisterAutoCreate(Forms$2(),"Form1",true,true);var $Application=function(){try{Application$1=TW3CustomApplication.Create$3($New(TApplication));TW3CustomApplication.RunApp(Application$1)}catch($e){var e$17=$W($e);alert(e$17.FMessage)}}
$Application();var $Application=function(){if(_FontDetect)TObject.Free(_FontDetect)}
$Application();
