<!DOCTYPE html>
<html manifest="app.manifest">
<head>	
  <meta charset="UTF-8" />
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="format-detection" content="telephone=yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="default">
	<meta name="viewport" content="width=device-width, maximum-scale=1.0, initial-scale=1.0, user-scalable=no"/>
  <link rel="manifest" href="webapp.json">
  

	<title>RandomPlatformScroller</title>

	<link rel="stylesheet" type="text/css" href="res/app.css"/>


  	<script type="text/javascript">	/* This prevents the window being moved by touches,
	  to give the impression of a native app */
	document.ontouchmove = function(e) { e.preventDefault(); }

	/* Note: If you build with the CSS as an external file,
	the app may execute before the CSS has been properly loaded.
	You may want to use a different bootstrap mechanism. jQuery
	provides a good preloading mechanism for instance. */

	function bootstrap() { var $R = [
	"Method %s in class %s threw exception [%s]",
	"Procedure %s threw exception [%s]",
	"Internal tag-object is null error",
	"Failed to create internal tag-object",
	"Invalid tag handle error",
	"Invalid attribute-name error",
	"Invalid property-name error",
	"Invalid style-name error",
	"Failed to attach element to owner",
	"Owner tag-object is NIL error",
	"invalid owner handle error",
	"Invalid component registration",
	"Failed to create attribute storage object, invalid handle error",
	"Failed to read attribute field, browser threw exception: %s",
	"Failed to write attribute field, browser threw exception: %s",
	"invalid owner handle error",
	"Failed to initialize from graphics-context: "];
function Trunc(v) { return (v>=0)?Math.floor(v):Math.ceil(v) }
function Trim$_String_Integer_Integer_(s,a,b) { if (a<0) a=0; if (b<0) b=0; return s.substr(a,s.length-a-b) }
function Trim$_String_(s) { return s.replace(/^\s\s*/, "").replace(/\s\s*$/, "") }
var TObject={
	$ClassName: "TObject",
	$Parent: null,
	ClassName: function (s) { return s.$ClassName },
	ClassType: function (s) { return s },
	ClassParent: function (s) { return s.$Parent },
	$Init: function () {},
	Create: function (s) { return s },
	Destroy: function (s) { for (var prop in s) if (s.hasOwnProperty(prop)) delete s.prop },
	Destroy$: function(s) { return s.ClassType.Destroy(s) },
	Free: function (s) { if (s!==null) s.ClassType.Destroy(s) }
}
function Tanh(v) { return (v==0)?0:(Math.exp(v)-Math.exp(-v))/(Math.exp(v)+Math.exp(-v)) }
function StrReplace(s,o,n) { return o?s.replace(new RegExp(StrRegExp(o), "g"), n):s }
function StrRegExp(s) { return s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&") }
function RandomInt(i) { return Math.floor(Random()*i) }
/*

Copyright (C) 2010 by Johannes Baage <baagoe@baagoe.org>

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

From http://baagoe.com/en/RandomMusings/javascript/
*/
function $alea() {
  return (function(args) {
    // Johannes Baag√∏e <baagoe@baagoe.com>, 2010
    var s0 = 0;
    var s1 = 0;
    var s2 = 0;
    var c = 1;

    if (args.length == 0) {
      args = [+new Date];
    }
    var mash = function() {
       var n = 0xefc8249d;
    
       var mash = function(data) {
         data = data.toString();
         for (var i = 0; i < data.length; i++) {
           n += data.charCodeAt(i);
           var h = 0.02519603282416938 * n;
           n = h >>> 0;
           h -= n;
           h *= n;
           n = h >>> 0;
           h -= n;
           n += h * 0x100000000; // 2^32
         }
         return (n >>> 0) * 2.3283064365386963e-10; // 2^-32
       };
    
       //mash.version = 'Mash 0.9';
       return mash;
    }();
    s0 = mash(' ');
    s1 = mash(' ');
    s2 = mash(' ');

    for (var i = 0; i < args.length; i++) {
      s0 -= mash(args[i]);
      if (s0 < 0) {
        s0 += 1;
      }
      s1 -= mash(args[i]);
      if (s1 < 0) {
        s1 += 1;
      }
      s2 -= mash(args[i]);
      if (s2 < 0) {
        s2 += 1;
      }
    }
    mash = null;

    var random = function() {
      var t = 2091639 * s0 + c * 2.3283064365386963e-10; // 2^-32
      s0 = s1;
      s1 = s2;
      return s2 = t - (c = t | 0);
    };
    /*random.uint32 = function() {
      return random() * 0x100000000; // 2^32
    };
    random.fract53 = function() {
      return random() +
        (random() * 0x200000 | 0) * 1.1102230246251565e-16; // 2^-53
    };*/
    //random.version = 'Alea 0.9';
    random.args = args;
    return random;

  } (Array.prototype.slice.call(arguments)));
};var Random = $alea();
function IntToHex2(v) { var r=v.toString(16); return (r.length==1)?"0"+r:r }
/**
sprintf() for JavaScript 0.7-beta1
http://www.diveintojavascript.com/projects/javascript-sprintf

Copyright (c) Alexandru Marasteanu <alexaholic [at) gmail (dot] com>
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:
    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
    * Neither the name of sprintf() for JavaScript nor the
      names of its contributors may be used to endorse or promote products
      derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL Alexandru Marasteanu BE LIABLE FOR ANY
DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
**/

var sprintf = (function() {
	function get_type(variable) {
		return Object.prototype.toString.call(variable).slice(8, -1).toLowerCase();
	}
	function str_repeat(input, multiplier) {
		for (var output = []; multiplier > 0; output[--multiplier] = input) {/* do nothing */}
		return output.join('');
	}

	var str_format = function() {
		if (!str_format.cache.hasOwnProperty(arguments[0])) {
			str_format.cache[arguments[0]] = str_format.parse(arguments[0]);
		}
		return str_format.format.call(null, str_format.cache[arguments[0]], arguments);
	};

	str_format.format = function(parse_tree, argv) {
		var cursor = 1, tree_length = parse_tree.length, node_type = '', arg, output = [], i, k, match, pad, pad_character, pad_length;
		for (i = 0; i < tree_length; i++) {
			node_type = get_type(parse_tree[i]);
			if (node_type === 'string') {
				output.push(parse_tree[i]);
			}
			else if (node_type === 'array') {
				match = parse_tree[i]; // convenience purposes only
				if (match[2]) { // keyword argument
					arg = argv[cursor];
					for (k = 0; k < match[2].length; k++) {
						if (!arg.hasOwnProperty(match[2][k])) {
							throw(sprintf('[sprintf] property "%s" does not exist', match[2][k]));
						}
						arg = arg[match[2][k]];
					}
				}
				else if (match[1]) { // positional argument (explicit)
					arg = argv[match[1]];
				}
				else { // positional argument (implicit)
					arg = argv[cursor++];
				}

				if (/[^s]/.test(match[8]) && (get_type(arg) != 'number')) {
					throw(sprintf('[sprintf] expecting number but found %s', get_type(arg)));
				}
				switch (match[8]) {
					case 'b': arg = arg.toString(2); break;
					case 'c': arg = String.fromCharCode(arg); break;
					case 'd': arg = String(parseInt(arg, 10)); if (match[7]) { arg = str_repeat('0', match[7]-arg.length)+arg } break;
					case 'e': arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential(); break;
					case 'f': arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg); break;
					case 'o': arg = arg.toString(8); break;
					case 's': arg = ((arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg); break;
					case 'u': arg = Math.abs(arg); break;
					case 'x': arg = arg.toString(16); break;
					case 'X': arg = arg.toString(16).toUpperCase(); break;
				}
				arg = (/[def]/.test(match[8]) && match[3] && arg >= 0 ? '+'+ arg : arg);
				pad_character = match[4] ? match[4] == '0' ? '0' : match[4].charAt(1) : ' ';
				pad_length = match[6] - String(arg).length;
				pad = match[6] ? str_repeat(pad_character, pad_length) : '';
				output.push(match[5] ? arg + pad : pad + arg);
			}
		}
		return output.join('');
	};

	str_format.cache = {};

	str_format.parse = function(fmt) {
		var _fmt = fmt, match = [], parse_tree = [], arg_names = 0;
		while (_fmt) {
			if ((match = /^[^\x25]+/.exec(_fmt)) !== null) {
				parse_tree.push(match[0]);
			}
			else if ((match = /^\x25{2}/.exec(_fmt)) !== null) {
				parse_tree.push('%');
			}
			else if ((match = /^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(_fmt)) !== null) {
				if (match[2]) {
					arg_names |= 1;
					var field_list = [], replacement_field = match[2], field_match = [];
					if ((field_match = /^([a-z_][a-z_\d]*)/i.exec(replacement_field)) !== null) {
						field_list.push(field_match[1]);
						while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {
							if ((field_match = /^\.([a-z_][a-z_\d]*)/i.exec(replacement_field)) !== null) {
								field_list.push(field_match[1]);
							}
							else if ((field_match = /^\[(\d+)\]/.exec(replacement_field)) !== null) {
								field_list.push(field_match[1]);
							}
							else {
								throw('[sprintf] huh?');
							}
						}
					}
					else {
						throw('[sprintf] huh?');
					}
					match[2] = field_list;
				}
				else {
					arg_names |= 2;
				}
				if (arg_names === 3) {
					throw('[sprintf] mixing positional and named placeholders is not (yet) supported');
				}
				parse_tree.push(match);
			}
			else {
				throw('[sprintf] huh?');
			}
			_fmt = _fmt.substring(match[0].length);
		}
		return parse_tree;
	};

	return str_format;
})();
function Format(f,a) { a.unshift(f); return sprintf.apply(null,a) }
function FloatToStr$_Float_(i) { return i.toString() }
function FloatToStr$_Float_Integer_(i,p) { return (p==99)?i.toString():i.toFixed(p) }
var Exception={
	$ClassName: "Exception",
	$Parent: TObject,
	$Init: function () { FMessage="" },
	Create: function (s,Msg) { s.FMessage=Msg; return s }
}
function Delete(s,i,n) { var v=s.v; if ((i<=0)||(i>v.length)||(n<=0)) return; s.v=v.substr(0,i-1)+v.substr(i+n-1); }
function ClampInt(v,mi,ma) { return v<mi ? mi : v>ma ? ma : v }
function $W(e) { return e.ClassType?e:Exception.Create($New(Exception),e.constructor.name+", "+e.message) }
function $SetInc(s,v,m,n) { v-=m; if (v>=0 && v<n) s[v>>5]|=1<<(v&31) }
function $SetIn(s,v,m,n) { v-=m; return (v<0 && v>=n)?false:(s[v>>5]&(1<<(v&31)))!=0 }
function $SetExc(s,v,m,n) { v-=m; if (v>=0 && v<n) s[v>>5]&=~(1<<(v&31)) }
function $NewDyn(c,z) {
	if (c==null) throw Exception.Create($New(Exception),"ClassType is nil"+z);
	var i={ClassType:c};
	c.$Init(i);
	return i
}
function $New(c) { var i={ClassType:c}; c.$Init(i); return i }
function $Is(o,c) {
	if (o===null) return false;
	return $Inh(o.ClassType,c);
}
;
function $Inh(s,c) {
	if (s===null) return false;
	while ((s)&&(s!==c)) s=s.$Parent;
	return (s)?true:false;
}
;
function $Event2(i,f) {
	var li=i,lf=f;
	return function(a,b) {
		return lf.call(li,li,a,b)
	}
}
function $Event1(i,f) {
	var li=i,lf=f;
	return function(a) {
		return lf.call(li,li,a)
	}
}
function $Event0(i,f) {
	var li=i,lf=f;
	return function() {
		return lf.call(li,li)
	}
}
function $Div(a,b) { var r=a/b; return (r>=0)?Math.floor(r):Math.ceil(r) }
function $AsClass(s,c) {
	if ((s===null)||$Inh(s,c)) return s;
	throw Exception.Create($New(Exception),"Cannot cast class \""+s.$ClassName+"\" to class \""+c.$ClassName+"\"");
}
function $As(o,c) {
	if ((o===null)||$Is(o,c)) return o;
	throw Exception.Create($New(Exception),"Cannot cast instance of type \""+o.ClassType.$ClassName+"\" to class \""+c.$ClassName+"\"");
}
function $ArraySwap(a,i1,i2) { var t=a[i1]; a[i1]=a[i2]; a[i2]=t }
function WriteLn(value$5) {
   if (window.console) {
      window.console.log(value$5);
   }
};
function w3_setStyle(tagRef, aStyleName, aStyleValue) {
   tagRef.style[aStyleName] = aStyleValue;
};
function w3_setElementParentByRef(aElement, aParent) {
   aParent.appendChild(aElement);
};
function w3_setAttrib(tagRef$1, aAttribName, aValue) {
   tagRef$1.setAttribute(aAttribName,aValue);
};
function w3_RequestAnimationFrame(aMethod) {
   var Result = undefined;
   if (!vRequestAnimFrame) {
      InitAnimationFrameShim();
   }
   Result = vRequestAnimFrame(aMethod);
   return Result
};
function w3_RemoveEvent(a_tagRef, a_eventName, a_callback, a_useCapture) {
   if (a_eventName=="mousewheel") {
      a_eventName = "DOMMouseScroll";
   }
   a_tagRef.removeEventListener(a_eventName,a_callback,a_useCapture);
};
function w3_RemoveElementByRef(aElement$1, aParent$1) {
   aParent$1.removeChild(aElement$1);
};
function w3_RemoveClass(tagRef$2, aClassName) {
   var reg;
   
    reg = new RegExp("(\\s|^)" + aClassName + "(\\s|$)");
    (tagRef$2).className=(tagRef$2).className.replace(reg," ").replace('  ',' ').trim();
  };
function w3_RegisterBrowserAPI(aDriver) {
   vDriver = aDriver;
};
function w3_NameToUrlStr(aUrl) {
   return "url("+aUrl+")";
};
function w3_HasClass(tagRef$3, aClassName$1) {
   var Result = false;
   
    Result = ((tagRef$3).className.match(new RegExp("(\\s|^)"+aClassName$1+"(\\s|$)")))?true:false;
  return Result
};
function w3_GetUniqueObjId() {
   var Result = "";
   ++vUniqueNumber;
   Result = "OBJ"+vUniqueNumber.toString();
   return Result
};
function w3_GetUniqueNumber() {
   var Result = 0;
   ++vUniqueNumber;
   Result = vUniqueNumber;
   return Result
};
function w3_getStyleAsStr(tagRef$4, aStyleName$1) {
   var Result = "";
   var mObj = undefined;
   var mData;
   
    mObj   = document.defaultView.getComputedStyle(tagRef$4,null);

    if (mObj)
    mData = (mObj).getPropertyValue(aStyleName$1);

    if (mData)
    {
      if (typeof(mData) === "number") {
        Result = String(mData);
      } else {
        if (typeof(mData) === "string")
        Result = mData;
      }
    }
  return Result
};
function w3_getStyleAsInt(tagRef$5, aStyleName$2) {
   var Result = 0;
   var mObj$1 = undefined;
   var mData$1;
   
    mObj$1   = document.defaultView.getComputedStyle(tagRef$5,null);

    if (mObj$1)
      mData$1 = (mObj$1).getPropertyValue(aStyleName$2);

    if (mData$1)
    {
      if (typeof(mData$1) === "number")
      {
        Result = mData$1;
      } else {
        if (typeof(mData$1) === "string")
        {
          mData$1 = parseInt(mData$1);
          if (typeof(mData$1) === "number")
          Result = mData$1;
        }
      }
    }
  return Result
};
function w3_getStyleAsFloat(tagRef$6, aStyleName$3) {
   var Result = 0;
   var mObj$2 = undefined;
   var mData$2;
   
    mObj$2   = document.defaultView.getComputedStyle(tagRef$6,null);

    if (mObj$2)
    mData$2 = (mObj$2).getPropertyValue(aStyleName$3);

    if (mData$2)
    {
      if (typeof(mData$2) === "number") {
        Result = mData$2
      } else {
        if (typeof(mData$2) === "string")
        {
          mData$2 = parseFloat(mData$2);
          if (!isNaN(mData$2))
          Result = mData;
        }
      }
    }
  return Result
};
function w3_getStyle(tagRef$7, aStyleName$4) {
   var Result = undefined;
   var mObj$3 = undefined;
   
    mObj$3   = document.defaultView.getComputedStyle(tagRef$7,null);
    if (mObj$3)
    Result = (mObj$3).getPropertyValue(aStyleName$4);
  return Result
};
function w3_getPropertyAsInt(tagRef$8, aPropName) {
   return parseInt(tagRef$8[aPropName],10);
};
function w3_getIsSafari() {
   var Result = false;
   
    if (navigator.userAgent.match(/Safari/i)) Result=true;
  return Result
};
function w3_getIsOpera() {
   var Result = false;
   
    if (navigator.userAgent.match(/Opera/i)) Result=true;
  return Result
};
function w3_getIsIPod() {
   var Result = false;
   
    if (navigator.userAgent.match(/iPod/i)) Result=true;
  return Result
};
function w3_getIsIPhone() {
   var Result = false;
   
    if (navigator.userAgent.match(/iPhone/i)) Result=true;
  return Result
};
function w3_getIsIPad() {
   var Result = false;
   
    if (navigator.userAgent.match(/iPad/i)) Result=true;
  return Result
};
function w3_getIsInternetExplorer() {
   var Result = false;
   
    if (navigator.userAgent.match(/MSIE/i)) Result=true;
  return Result
};
function w3_getIsFirefox() {
   var Result = false;
   
    if (navigator.userAgent.match(/Firefox/i)) Result=true;
  return Result
};
function w3_getIsChrome() {
   var Result = false;
   
    if (navigator.userAgent.match(/Chrome/i)) Result=true;
  return Result
};
function w3_getIsAndroid() {
   var Result = false;
   
    if (navigator.userAgent.match(/Android/i)) Result=true;
  return Result
};
function w3_getAttribAsStr(tagRef$9, aAttribName$1) {
   return ""+tagRef$9.getAttribute(aAttribName$1,0);
};
function w3_CSSPrefixDef(aCSS) {
   return "-"+BrowserAPI().FCSSToken+"-"+aCSS;
};
function w3_CSSPrefix(aCSS$1) {
   return BrowserAPI().FCSSToken+aCSS$1;
};
function w3_createHtmlElement(aTypeName) {
   return document.createElement(aTypeName);
};
function w3_CancelAnimationFrame(handle) {
   if (!vCancelAnimFrame) {
      InitAnimationFrameShim();
   }
   vCancelAnimFrame(handle);
};
function w3_bind2(obj_ref, event_name, callback) {
   obj_ref[event_name] = callback;
};
function w3_AddEvent(a_tagRef$1, a_eventName$1, a_callback$1, a_useCapture$1) {
   if (a_eventName$1=="mousewheel") {
      a_eventName$1 = "DOMMouseScroll";
   }
   a_tagRef$1.addEventListener(a_eventName$1,a_callback$1,a_useCapture$1);
};
function w3_AddClass(tagRef$10, aClassName$2) {
   
    var _qr = ((tagRef$10).className.match(new RegExp("(\\s|^)"+aClassName$2+"(\\s|$)"))) ? true : false;
    if (_qr === false)
      (tagRef$10).className += (" " + aClassName$2);
  };
/// TW3CustomBrowserAPI = class (TObject)
///  [line: 80, column: 3, file: SmartCL.System]
var TW3CustomBrowserAPI = {
   $ClassName:"TW3CustomBrowserAPI",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FCSSAnimation = $.FCSSBackgroundColor = $.FCSSBackgroundImage = $.FCSSBackgroundPos = $.FCSSBackgroundSize = $.FCSSToken = $.FCSSTransform = "";
   }
   /// function TW3CustomBrowserAPI.DevicePixelRatio() : Float
   ///  [line: 576, column: 36, file: SmartCL.System]
   ,DevicePixelRatio:function() {
      var Result = 0;
      
   Result = window.devicePixelRatio || 1;
   return Result
   }
   ,Destroy:TObject.Destroy
};
/// TW3WebkitBrowserAPI = class (TW3CustomBrowserAPI)
///  [line: 128, column: 3, file: SmartCL.System]
var TW3WebkitBrowserAPI = {
   $ClassName:"TW3WebkitBrowserAPI",$Parent:TW3CustomBrowserAPI
   ,$Init:function ($) {
      TW3CustomBrowserAPI.$Init($);
   }
   /// constructor TW3WebkitBrowserAPI.Create()
   ///  [line: 617, column: 33, file: SmartCL.System]
   ,Create$14:function(Self) {
      Self.FCSSToken = "webkit";
      Self.FCSSBackgroundImage = "background-image";
      Self.FCSSBackgroundSize = "webkitbackgroundSize";
      Self.FCSSBackgroundPos = "webkitbackgroundPosition";
      Self.FCSSBackgroundColor = "webkitbackgroundColor";
      Self.FCSSTransform = "webkitTransform";
      Self.FCSSAnimation = "webkitAnimation";
      return Self
   }
   ,Destroy:TObject.Destroy
};
/// TW3OwnedObject = class (TObject)
///  [line: 69, column: 3, file: SmartCL.System]
var TW3OwnedObject = {
   $ClassName:"TW3OwnedObject",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FOwner = null;
   }
   /// function TW3OwnedObject.AcceptParent(aObject: TObject) : Boolean
   ///  [line: 872, column: 25, file: SmartCL.System]
   ,AcceptParent:function(Self, aObject) {
      return true;
   }
   /// constructor TW3OwnedObject.Create(AOwner: TObject)
   ///  [line: 862, column: 28, file: SmartCL.System]
   ,Create$15:function(Self, AOwner) {
      TObject.Create(Self);
      if (TW3OwnedObject.AcceptParent$(Self,AOwner)) {
         Self.FOwner = AOwner;
      } else {
         throw EW3Exception.CreateFmt($New(EW3OwnedObject),$R[0],["constructor", TObject.ClassName(Self.ClassType), "Unsuitable owner object-type error"]);
      }
      return Self
   }
   ,Destroy:TObject.Destroy
   ,AcceptParent$:function($){return $.ClassType.AcceptParent.apply($.ClassType, arguments)}
   ,Create$15$:function($){return $.ClassType.Create$15.apply($.ClassType, arguments)}
};
/// TW3OperaBrowserAPI = class (TW3CustomBrowserAPI)
///  [line: 139, column: 3, file: SmartCL.System]
var TW3OperaBrowserAPI = {
   $ClassName:"TW3OperaBrowserAPI",$Parent:TW3CustomBrowserAPI
   ,$Init:function ($) {
      TW3CustomBrowserAPI.$Init($);
   }
   /// constructor TW3OperaBrowserAPI.Create()
   ///  [line: 602, column: 32, file: SmartCL.System]
   ,Create$16:function(Self) {
      Self.FCSSToken = "O";
      Self.FCSSBackgroundImage = "OBackgroundImage";
      Self.FCSSBackgroundSize = "OBackgroundSize";
      Self.FCSSBackgroundPos = "OBackgroundPosition";
      Self.FCSSBackgroundColor = "backgroundColor";
      Self.FCSSTransform = "OTransform";
      Self.FCSSAnimation = "OAnimation";
      return Self
   }
   ,Destroy:TObject.Destroy
};
/// TW3IEBrowserAPI = class (TW3CustomBrowserAPI)
///  [line: 144, column: 3, file: SmartCL.System]
var TW3IEBrowserAPI = {
   $ClassName:"TW3IEBrowserAPI",$Parent:TW3CustomBrowserAPI
   ,$Init:function ($) {
      TW3CustomBrowserAPI.$Init($);
   }
   /// constructor TW3IEBrowserAPI.Create()
   ///  [line: 587, column: 29, file: SmartCL.System]
   ,Create$17:function(Self) {
      Self.FCSSToken = "ms";
      Self.FCSSBackgroundImage = "msBackgroundImage";
      Self.FCSSBackgroundSize = "msBackgroundSize";
      Self.FCSSBackgroundPos = "msBackgroundPosition";
      Self.FCSSBackgroundColor = "backgroundColor";
      Self.FCSSTransform = "msTransform";
      Self.FCSSAnimation = "msAnimation";
      return Self
   }
   ,Destroy:TObject.Destroy
};
/// TW3FirefoxBrowserAPI = class (TW3CustomBrowserAPI)
///  [line: 134, column: 3, file: SmartCL.System]
var TW3FirefoxBrowserAPI = {
   $ClassName:"TW3FirefoxBrowserAPI",$Parent:TW3CustomBrowserAPI
   ,$Init:function ($) {
      TW3CustomBrowserAPI.$Init($);
   }
   /// constructor TW3FirefoxBrowserAPI.Create()
   ///  [line: 632, column: 34, file: SmartCL.System]
   ,Create$18:function(Self) {
      Self.FCSSToken = "Moz";
      Self.FCSSBackgroundImage = "backgroundImage";
      Self.FCSSBackgroundSize = "backgroundSize";
      Self.FCSSBackgroundPos = "backgroundPosition";
      Self.FCSSBackgroundColor = "backgroundColor";
      Self.FCSSTransform = "MozTransform";
      Self.FCSSAnimation = "MozAnimation";
      return Self
   }
   ,Destroy:TObject.Destroy
};
/// TW3BrowserVendor enumeration
///  [line: 296, column: 3, file: SmartCL.System]
var TW3BrowserVendor = [ "bvUnknown", "bviOS", "bvAndroid", "bvChrome", "bvSafari", "bvFirefox", "bvOpera", "bvIE" ];
/// function TControlHandleHelper.Ready(const Self: TControlHandle) : Boolean
///  [line: 478, column: 32, file: SmartCL.System]
function TControlHandleHelper$Ready$1(Self$2) {
   var Result = false;
   var mRef = undefined;
   if (TControlHandleHelper$Valid(Self$2)) {
      mRef = TControlHandleHelper$Root(Self$2);
      Result = TControlHandleHelper$Valid(mRef)&&mRef.body;
   }
   return Result
}
/// procedure TControlHandleHelper.ReadyExecute(const Self: TControlHandle; OnReady: TProcedureRef)
///  [line: 539, column: 32, file: SmartCL.System]
function TControlHandleHelper$ReadyExecute(Self$3, OnReady) {
   function DelayedDispatch(EntryPoint, Delay$1) {
      
      setTimeout(EntryPoint,Delay$1);
       };
   if (TControlHandleHelper$Valid(Self$3)) {
      if (TControlHandleHelper$Ready$1(Self$3)) {
         OnReady();
      } else {
         DelayedDispatch(function () {
            TControlHandleHelper$ReadyExecute(Self$3,OnReady);
         },100);
      }
   }
}
/// function TControlHandleHelper.Root(const Self: TControlHandle) : TControlHandle
///  [line: 496, column: 32, file: SmartCL.System]
function TControlHandleHelper$Root(Self$4) {
   var Result = undefined;
   var mAncestor = undefined;
   if (TControlHandleHelper$Valid(Self$4)) {
      mAncestor = Self$4;
      while (mAncestor.parentNode) {
         mAncestor = mAncestor.parentNode;
      }
      Result = mAncestor;
   } else {
      Result = null;
   }
   return Result
}
/// function TControlHandleHelper.Valid(const Self: TControlHandle) : Boolean
///  [line: 471, column: 32, file: SmartCL.System]
function TControlHandleHelper$Valid(Self$5) {
   var Result = false;
   
    Result = !( (Self$5 == undefined) || (Self$5 == null) );
  return Result
}
/// function TBufferHandleHelper.Valid(const Self: TBufferHandle) : Boolean
///  [line: 1073, column: 30, file: SmartCL.System]
function TBufferHandleHelper$Valid$1(Self$6) {
   var Result = false;
   
    Result = !( (Self$6 == undefined) || (Self$6 == null) );
  return Result
}
/// EW3Exception = class (Exception)
///  [line: 60, column: 3, file: SmartCL.System]
var EW3Exception = {
   $ClassName:"EW3Exception",$Parent:Exception
   ,$Init:function ($) {
      Exception.$Init($);
   }
   /// constructor EW3Exception.CreateFmt(aText: String; const aValues: array of const)
   ///  [line: 1210, column: 26, file: SmartCL.System]
   ,CreateFmt:function(Self, aText, aValues) {
      Exception.Create(Self,Format(aText,aValues.slice(0)));
      return Self
   }
   ,Destroy:Exception.Destroy
};
/// EW3OwnedObject = class (EW3Exception)
///  [line: 66, column: 3, file: SmartCL.System]
var EW3OwnedObject = {
   $ClassName:"EW3OwnedObject",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
function BrowserAPI() {
   var Result = null;
   if (vDriver===null) {
      InternalInitVendorInfo();
   }
   Result = vDriver;
   return Result
};
function InternalInitVendorInfo() {
   if (w3_getIsAndroid()) {
      vVendor = 2;
   } else if (w3_getIsSafari()) {
      vVendor = 4;
   } else if (w3_getIsFirefox()) {
      vVendor = 5;
   } else if (w3_getIsChrome()) {
      vVendor = 3;
   } else if (w3_getIsInternetExplorer()) {
      vVendor = 7;
   } else if (w3_getIsOpera()) {
      vVendor = 6;
   }
   if (!vVendor) {
      if ((w3_getIsIPhone()||w3_getIsIPad())||w3_getIsIPod()) {
         vVendor = 1;
      }
   }
   switch (vVendor) {
      case 1 :
      case 4 :
      case 3 :
      case 2 :
         w3_RegisterBrowserAPI(TW3WebkitBrowserAPI.Create$14($New(TW3WebkitBrowserAPI)));
         break;
      case 5 :
         w3_RegisterBrowserAPI(TW3FirefoxBrowserAPI.Create$18($New(TW3FirefoxBrowserAPI)));
         break;
      case 7 :
         w3_RegisterBrowserAPI(TW3IEBrowserAPI.Create$17($New(TW3IEBrowserAPI)));
         break;
      case 6 :
         w3_RegisterBrowserAPI(TW3OperaBrowserAPI.Create$16($New(TW3OperaBrowserAPI)));
         break;
      default :
         w3_RegisterBrowserAPI(TW3FirefoxBrowserAPI.Create$18($New(TW3FirefoxBrowserAPI)))   }
};
function InitAnimationFrameShim() {
   
    vRequestAnimFrame = (function(){
      return  window.requestAnimationFrame       ||
              window.webkitRequestAnimationFrame ||
              window.mozRequestAnimationFrame    ||
              window.msRequestAnimationFrame     ||
              function( callback ){
                return window.setTimeout(callback, 1000 / 60);
              };
    })();
    vCancelAnimFrame = (function(){
      return  window.cancelAnimationFrame       ||
              window.webkitCancelAnimationFrame ||
              window.mozCancelAnimationFrame    ||
              window.msCancelAnimationFrame     ||
              function( handle ){
                window.clearTimeout(handle);
              };
    })();
  };
function VarIsValidRef(aRef) {
   var Result = false;
   
    Result = !((aRef == null) || (aRef == undefined));
  return Result
};
/// function TW3VariantHelper.IsArray(const Self: Variant) : Boolean
///  [line: 377, column: 27, file: System.Types]
function TW3VariantHelper$IsArray(Self$7) {
   var Result = false;
   
    Result = ((Self$7) !== undefined)
      && (typeof Self$7 !== null)
      && (typeof Self$7 === "object")
      && ((Self$7).length !== undefined);
  return Result
}
/// function TW3VariantHelper.IsBoolean(const Self: Variant) : Boolean
///  [line: 339, column: 27, file: System.Types]
function TW3VariantHelper$IsBoolean(Self$8) {
   var Result = false;
   
    Result = ((Self$8) !== undefined)
      && (typeof Self$8 !== null)
      && (typeof Self$8  === "boolean");
  return Result
}
/// function TW3VariantHelper.IsFloat(const Self: Variant) : Boolean
///  [line: 357, column: 27, file: System.Types]
function TW3VariantHelper$IsFloat(Self$9) {
   var Result = false;
   
    Result = ((Self$9) !== undefined)
      && (typeof Self$9 !== null)
      && (typeof Self$9  === "number")
      && (Math.round(Self$9) != Self$9);
  return Result
}
/// function TW3VariantHelper.IsFunction(const Self: Variant) : Boolean
///  [line: 330, column: 27, file: System.Types]
function TW3VariantHelper$IsFunction(Self$10) {
   var Result = false;
   
    Result = ((Self$10) !== undefined)
      && (typeof Self$10 !== null)
      && (typeof Self$10  === "function");
  return Result
}
/// function TW3VariantHelper.IsInteger(const Self: Variant) : Boolean
///  [line: 367, column: 27, file: System.Types]
function TW3VariantHelper$IsInteger$1(Self$11) {
   var Result = false;
   
    Result = ((Self$11) !== undefined)
      && (typeof Self$11 !== null)
      && (typeof Self$11  === "number")
      && (Math.round(Self$11) === Self$11);
  return Result
}
/// function TW3VariantHelper.IsObject(const Self: Variant) : Boolean
///  [line: 311, column: 27, file: System.Types]
function TW3VariantHelper$IsObject(Self$12) {
   var Result = false;
   
    Result = ((Self$12) !== undefined)
      && (typeof Self$12 !== null)
      && (typeof Self$12  === "object")
      && ((Self$12).length === undefined);
  return Result
}
/// function TW3VariantHelper.IsString(const Self: Variant) : Boolean
///  [line: 348, column: 27, file: System.Types]
function TW3VariantHelper$IsString$1(Self$13) {
   var Result = false;
   
    Result = ((Self$13) !== undefined)
      && (typeof Self$13 !== null)
      && (typeof Self$13  === "string");
  return Result
}
/// function TW3VariantHelper.IsSymbol(const Self: Variant) : Boolean
///  [line: 321, column: 27, file: System.Types]
function TW3VariantHelper$IsSymbol(Self$14) {
   var Result = false;
   
    Result = ((Self$14) !== undefined)
      && (typeof Self$14 !== null)
      && (typeof Self$14  === "symbol");
  return Result
}
/// TW3VariantDataType enumeration
///  [line: 249, column: 3, file: System.Types]
var TW3VariantDataType = [ "vdUnknown", "vdBoolean", "vdInteger", "vdFloat", "vdString", "vdSymbol", "vdFunction", "vdObject", "vdArray" ];
/// TVariant = class (TObject)
///  [line: 230, column: 3, file: System.Types]
var TVariant = {
   $ClassName:"TVariant",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// function TVariant.AsInteger(const aValue: Variant) : Integer
   ///  [line: 1373, column: 25, file: System.Types]
   ,AsInteger:function(aValue$1) {
      var Result = 0;
      if ((aValue$1!=undefined)&&(aValue$1!=null)) {
         Result = parseInt(aValue$1,10);
      }
      return Result
   }
   /// function TVariant.AsObject(const aValue: Variant) : TObject
   ///  [line: 1394, column: 25, file: System.Types]
   ,AsObject:function(aValue$2) {
      var Result = null;
      if ((aValue$2!=undefined)&&(aValue$2!=null)) {
         
      Result = aValue$2;
          }
      return Result
   }
   /// function TVariant.AsString(const aValue: Variant) : String
   ///  [line: 1380, column: 25, file: System.Types]
   ,AsString:function(aValue$3) {
      var Result = "";
      if ((aValue$3!=undefined)&&(aValue$3!=null)) {
         Result = ""+aValue$3;
      }
      return Result
   }
   /// function TVariant.CreateObject() : Variant
   ///  [line: 1413, column: 25, file: System.Types]
   ,CreateObject:function() {
      var Result = undefined;
      
    return {};
  return Result
   }
   /// function TVariant.IsNumber(const aValue: Variant) : Boolean
   ///  [line: 1442, column: 25, file: System.Types]
   ,IsNumber:function(aValue$4) {
      var Result = false;
      
    if (aValue$4 == null) return false;
    if (aValue$4 == undefined) return false;
    if (typeof(aValue$4) === "number") return true;
  return Result
   }
   /// function TVariant.IsString(const aValue: Variant) : Boolean
   ///  [line: 1433, column: 25, file: System.Types]
   ,IsString:function(aValue$5) {
      var Result = false;
      
    if (aValue$5 == null) return false;
    if (aValue$5 == undefined) return false;
    if (typeof(aValue$5) === "string") return true;
  return Result
   }
   ,Destroy:TObject.Destroy
};
/// TRectF = record
///  [line: 165, column: 3, file: System.Types]
function Copy$TRectF(s,d) {
   d.Bottom=s.Bottom;
   d.Left=s.Left;
   d.Right=s.Right;
   d.Top=s.Top;
   return d;
}
function Clone$TRectF($) {
   return {
      Bottom:$.Bottom,
      Left:$.Left,
      Right:$.Right,
      Top:$.Top
   }
}
/// function TRectF.CreateBounded(x1: Float; y1: Float; x2: Float; y2: Float) : TRectF
///  [line: 886, column: 23, file: System.Types]
function CreateBounded(x1$6, y1$6, x2$6, y2$6) {
   var Result = {Bottom:0,Left:0,Right:0,Top:0};
   if (x1$6<x2$6) {
      Result.Left = x1$6;
      Result.Right = x2$6;
   } else {
      Result.Left = x2$6;
      Result.Right = x1$6;
   }
   if (y1$6<y2$6) {
      Result.Top = y1$6;
      Result.Bottom = y2$6;
   } else {
      Result.Top = y2$6;
      Result.Bottom = y1$6;
   }
   return Result
}
/// function TRectF.Height(var Self: TRectF) : Float
///  [line: 1010, column: 17, file: System.Types]
function TRectF$Height(Self$15) {
   return Self$15.Bottom-Self$15.Top;
}
/// function TRectF.Width(var Self: TRectF) : Float
///  [line: 1005, column: 17, file: System.Types]
function TRectF$Width(Self$16) {
   return Self$16.Right-Self$16.Left;
}
/// TRect = record
///  [line: 129, column: 3, file: System.Types]
function Copy$TRect(s,d) {
   d.Bottom$1=s.Bottom$1;
   d.Left$1=s.Left$1;
   d.Right$1=s.Right$1;
   d.Top$1=s.Top$1;
   return d;
}
function Clone$TRect($) {
   return {
      Bottom$1:$.Bottom$1,
      Left$1:$.Left$1,
      Right$1:$.Right$1,
      Top$1:$.Top$1
   }
}
/// function TRect.ContainsPos(var Self: TRect; const aLeft: Integer; const aTop: Integer) : Boolean
///  [line: 811, column: 16, file: System.Types]
function TRect$ContainsPos$1(Self$17, aLeft, aTop) {
   return (((aLeft>=Self$17.Left$1)&&(aLeft<=Self$17.Right$1))&&(aTop>=Self$17.Top$1))&&(aTop<=Self$17.Bottom$1);
}
/// function TRect.Height(var Self: TRect) : Integer
///  [line: 665, column: 16, file: System.Types]
function TRect$Height$1(Self$18) {
   return Self$18.Bottom$1-Self$18.Top$1;
}
/// function TRect.Width(var Self: TRect) : Integer
///  [line: 660, column: 16, file: System.Types]
function TRect$Width$1(Self$19) {
   return Self$19.Right$1-Self$19.Left$1;
}
/// TPointF = record
///  [line: 88, column: 3, file: System.Types]
function Copy$TPointF(s,d) {
   d.X=s.X;
   d.Y=s.Y;
   return d;
}
function Clone$TPointF($) {
   return {
      X:$.X,
      Y:$.Y
   }
}
/// TPoint = record
///  [line: 53, column: 3, file: System.Types]
function Copy$TPoint(s,d) {
   d.X$1=s.X$1;
   d.Y$1=s.Y$1;
   return d;
}
function Clone$TPoint($) {
   return {
      X$1:$.X$1,
      Y$1:$.Y$1
   }
}
/// function TPoint.Create(const aCol: Integer; const aRow: Integer) : TPoint
///  [line: 396, column: 23, file: System.Types]
function Create$11(aCol, aRow) {
   var Result = {X$1:0,Y$1:0};
   Result.X$1 = aCol;
   Result.Y$1 = aRow;
   return Result
}
/// TInteger = class (TObject)
///  [line: 199, column: 3, file: System.Types]
var TInteger = {
   $ClassName:"TInteger",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// function TInteger.Diff(const Primary: Integer; const Secondary: Integer) : Integer
   ///  [line: 1275, column: 25, file: System.Types]
   ,Diff:function(Primary, Secondary) {
      var Result = 0;
      if (Primary!=Secondary) {
         if (Primary>Secondary) {
            Result = Primary-Secondary;
         } else {
            Result = Secondary-Primary;
         }
         if (Result<0) {
            Result = (Result-1)^(-1);
         }
      } else {
         Result = 0;
      }
      return Result
   }
   /// function TInteger.EnsureRange(const aValue: Integer; const aMin: Integer; const aMax: Integer) : Integer
   ///  [line: 1229, column: 25, file: System.Types]
   ,EnsureRange:function(aValue$6, aMin, aMax) {
      return ClampInt(aValue$6,aMin,aMax);
   }
   /// function TInteger.ToPxStr(const aValue: Integer) : String
   ///  [line: 1207, column: 25, file: System.Types]
   ,ToPxStr:function(aValue$7) {
      return aValue$7.toString()+"px";
   }
   /// function TInteger.WrapRange(const aValue: Integer; const aLowRange: Integer; const aHighRange: Integer) : Integer
   ///  [line: 1243, column: 25, file: System.Types]
   ,WrapRange:function(aValue$8, aLowRange, aHighRange) {
      var Result = 0;
      if (aValue$8>aHighRange) {
         Result = aLowRange+TInteger.Diff(aHighRange,(aValue$8-1));
         if (Result>aHighRange) {
            Result = TInteger.WrapRange(Result,aLowRange,aHighRange);
         }
      } else if (aValue$8<aLowRange) {
         Result = aHighRange-TInteger.Diff(aLowRange,(aValue$8+1));
         if (Result<aLowRange) {
            Result = TInteger.WrapRange(Result,aLowRange,aHighRange);
         }
      } else {
         Result = aValue$8;
      }
      return Result
   }
   ,Destroy:TObject.Destroy
};
/// TExposure enumeration
///  [line: 126, column: 3, file: System.Types]
var TExposure = [ "esVisible", "esPartly", "esNone" ];
function OffsetPoint(a$37, b$2) {
   var Result = {X$1:0,Y$1:0};
   Result.X$1 = a$37.X$1+b$2.X$1;
   Result.Y$1 = a$37.Y$1+b$2.Y$1;
   return Result
};
function OffsetPoint$1(a$38, b$3) {
   var Result = {X$1:0,Y$1:0};
   Result.X$1 = a$38.X$1+b$3;
   Result.Y$1 = a$38.Y$1+b$3;
   return Result
};
function OffsetPoint$2(a$39, b$4) {
   var Result = {X:0,Y:0};
   Result.X = a$39.X+b$4.X;
   Result.Y = a$39.Y+b$4.Y;
   return Result
};
function OffsetPoint$3(a$40, b$5) {
   var Result = {X:0,Y:0};
   Result.X = a$40.X+b$5;
   Result.Y = a$40.Y+b$5;
   return Result
};
function OffsetPoint$4(a$41, b$6) {
   var Result = {X:0,Y:0};
   Result.X = a$41.X+b$6;
   Result.Y = a$41.Y+b$6;
   return Result
};
function MinusPoint(a$42, b$7) {
   var Result = {X$1:0,Y$1:0};
   Result.X$1 = a$42.X$1-b$7.X$1;
   Result.Y$1 = a$42.Y$1-b$7.Y$1;
   return Result
};
function MinusPoint$1(a$43, b$8) {
   var Result = {X$1:0,Y$1:0};
   Result.X$1 = a$43.X$1-b$8;
   Result.Y$1 = a$43.Y$1-b$8;
   return Result
};
function MinusPoint$2(a$44, b$9) {
   var Result = {X:0,Y:0};
   Result.X = a$44.X-b$9.X;
   Result.Y = a$44.Y-b$9.Y;
   return Result
};
function MinusPoint$3(a$45, b$10) {
   var Result = {X:0,Y:0};
   Result.X = a$45.X-b$10;
   Result.Y = a$45.Y-b$10;
   return Result
};
function MinusPoint$4(a$46, b$11) {
   var Result = {X:0,Y:0};
   Result.X = a$46.X-b$11;
   Result.Y = a$46.Y-b$11;
   return Result
};
function ExpandPoint(a$47, b$12) {
   var Result = {X$1:0,Y$1:0};
   Result.X$1 = Math.round(a$47.X$1*b$12.X$1);
   Result.Y$1 = Math.round(a$47.Y$1*b$12.Y$1);
   return Result
};
function ExpandPoint$1(a$48, b$13) {
   var Result = {X$1:0,Y$1:0};
   Result.X$1 = Math.round(a$48.X$1*b$13);
   Result.Y$1 = Math.round(a$48.Y$1*b$13);
   return Result
};
function ExpandPoint$2(a$49, b$14) {
   var Result = {X$1:0,Y$1:0};
   Result.X$1 = Math.round(a$49.X$1*b$14);
   Result.Y$1 = Math.round(a$49.Y$1*b$14);
   return Result
};
function ExpandPoint$3(a$50, b$15) {
   var Result = {X:0,Y:0};
   Result.X = a$50.X*b$15.X;
   Result.Y = a$50.Y*b$15.Y;
   return Result
};
function ExpandPoint$4(a$51, b$16) {
   var Result = {X:0,Y:0};
   Result.X = a$51.X*b$16;
   Result.Y = a$51.Y*b$16;
   return Result
};
function ExpandPoint$5(a$52, b$17) {
   var Result = {X:0,Y:0};
   Result.X = a$52.X*b$17;
   Result.Y = a$52.Y*b$17;
   return Result
};
/// TW3CustomApplication = class (TObject)
///  [line: 253, column: 3, file: SmartCL.Application]
var TW3CustomApplication = {
   $ClassName:"TW3CustomApplication",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FBody = $.FCurrentForm = $.FDisplay = $.FEnterAnim = $.FLeaveAnim = $.FMainForm = $.FOnBeforeUnload = $.FOnUnload = $.FTransDst = $.FTransSrc = null;
      $.FEntryEffect = 0;
      $.FFormChangeActive = $.FTerminated = false;
      $.FForms = [];
   }
   /// procedure TW3CustomApplication.AdjustScreen()
   ///  [line: 954, column: 32, file: SmartCL.Application]
   ,AdjustScreen:function(Self) {
      TW3ScrollInfo.ScrollTo(TW3CustomControl.GetScrollInfo(Self.FDisplay),0,0);
      TW3MovableControl.SetBounds$2(Self.FDisplay,0,0,TDocumentBody.GetWidth$5(Self.FBody),TDocumentBody.GetHeight$5(Self.FBody));
   }
   /// procedure TW3CustomApplication.ApplicationClosing()
   ///  [line: 989, column: 32, file: SmartCL.Application]
   ,ApplicationClosing:function(Self) {
      /* null */
   }
   /// procedure TW3CustomApplication.ApplicationStarted()
   ///  [line: 979, column: 32, file: SmartCL.Application]
   ,ApplicationStarted:function(Self) {
      /* null */
   }
   /// procedure TW3CustomApplication.ApplicationStarting()
   ///  [line: 984, column: 32, file: SmartCL.Application]
   ,ApplicationStarting:function(Self) {
      TW3CustomApplication.AdjustScreen(Self);
   }
   /// procedure TW3CustomApplication.CBOnBeforeUnload()
   ///  [line: 906, column: 32, file: SmartCL.Application]
   ,CBOnBeforeUnload:function(Self) {
      if (Self.FOnBeforeUnload) {
         Self.FOnBeforeUnload(Self);
      }
   }
   /// procedure TW3CustomApplication.CBOnOrientationChange()
   ///  [line: 928, column: 32, file: SmartCL.Application]
   ,CBOnOrientationChange:function(Self) {
      var mOrientation = 0;
      var mTemp$1 = 0;
      var mEntry = null;
      mTemp$1 = parseInt(window.orientation,10);
      switch (mTemp$1) {
         case 0 :
            mOrientation = 0;
            break;
         case 90 :
            mOrientation = 1;
            break;
         case (-90) :
            mOrientation = 2;
            break;
         case 180 :
            mOrientation = 3;
            break;
      }
      try {
         if (Self.FDisplay) {
            mEntry = Self.FDisplay.FOnOrient;
            if (mEntry) {
               mEntry(Self.FDisplay,mOrientation,mTemp$1);
            }
         }
      } finally {
         TW3CustomApplication.AdjustScreen(Self);
      }
   }
   /// procedure TW3CustomApplication.CBOnReSize()
   ///  [line: 923, column: 32, file: SmartCL.Application]
   ,CBOnReSize:function(Self) {
      TW3CustomApplication.AdjustScreen(Self);
   }
   /// procedure TW3CustomApplication.CBOnUnLoad()
   ///  [line: 912, column: 32, file: SmartCL.Application]
   ,CBOnUnLoad:function(Self) {
      try {
         if (Self.FOnUnload) {
            Self.FOnUnload(Self);
         }
      } finally {
         if (!Self.FTerminated) {
            TW3CustomApplication.Terminate(Self);
         }
      }
   }
   /// constructor TW3CustomApplication.Create()
   ///  [line: 684, column: 34, file: SmartCL.Application]
   ,Create$42:function(Self) {
      TObject.Create(Self);
      Self.FBody = TW3Component.Create$44$($New(TDocumentBody),null);
      Self.FDisplay = TW3Component.Create$44$($New(TW3Display),Self.FBody);
      if (!Instance) {
         Instance = Self;
      }
      return Self
   }
   /// destructor TW3CustomApplication.Destroy()
   ///  [line: 695, column: 33, file: SmartCL.Application]
   ,Destroy:function(Self) {
      if (!Self.FTerminated) {
         TW3CustomApplication.Terminate(Self);
      }
      TObject.Free(Self.FDisplay);
      TObject.Free(Self.FBody);
      Instance = null;
      TObject.Destroy(Self);
   }
   /// procedure TW3CustomApplication.GotoFormByRef(aForm: TW3CustomForm; Effect: TFormEntryEffect = 0)
   ///  [line: 1155, column: 32, file: SmartCL.Application]
   ,GotoFormByRef:function(Self, aForm, Effect) {
      var mIndex = 0;
      if (Self.FTerminated) {
         return;
      }
      if (Self.FFormChangeActive) {
         throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.GotoFormByRef", TObject.ClassName(Self.ClassType), "A form transition is already active error"]);
      }
      if (aForm===null) {
         throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.GotoFormByRef", TObject.ClassName(Self.ClassType), "Form parameter is NIL error"]);
      }
      mIndex = Self.FForms.indexOf(aForm);
      if (mIndex<0) {
         throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.GotoFormByRef", TObject.ClassName(Self.ClassType), "Form not registered error"]);
      }
      if (aForm===Self.FCurrentForm) {
         return;
      }
      if (Self.FCurrentForm===null) {
         Self.FCurrentForm = aForm;
         TW3Display.PositionFormInView(Self.FDisplay,aForm);
         TW3MovableControl.SetVisible(aForm,true);
         TW3CustomForm.FormActivated(aForm);
         return;
      }
      if (!Effect) {
         TW3CustomForm.FormDeactivated(Self.FCurrentForm);
         TW3MovableControl.SetVisible(Self.FCurrentForm,false);
         TW3MovableControl.SetVisible(aForm,true);
         TW3Display.PositionFormInView(Self.FDisplay,aForm);
         TW3CustomForm.FormActivated(aForm);
         Self.FCurrentForm = aForm;
         return;
      }
      Self.FFormChangeActive = true;
      Self.FEntryEffect = Effect;
      TW3CustomControl.BringToFront(aForm);
      TW3CustomForm.FormDeactivated(Self.FCurrentForm);
      Self.FTransSrc = Self.FCurrentForm;
      Self.FTransDst = aForm;
      TW3MovableControl.SetVisible(aForm,true);
      TW3Display.PositionFormInView(Self.FDisplay,aForm);
      if ((Self.FEnterAnim===null)||(Self.FLeaveAnim===null)) {
         Self.FEnterAnim = TW3CustomAnimation.Create$54$($New(TW3NamedAnimation));
         TW3CustomAnimation.SetDuration(Self.FEnterAnim,0.3);
         Self.FLeaveAnim = TW3CustomAnimation.Create$54$($New(TW3NamedAnimation));
         TW3CustomAnimation.SetDuration(Self.FLeaveAnim,0.3);
      }
      switch (Effect) {
         case 1 :
            Self.FEnterAnim.FName$2 = "MOVE-LEFT";
            Self.FLeaveAnim.FName$2 = "MOVE-OUT-LEFT";
            break;
         case 2 :
            Self.FEnterAnim.FName$2 = "MOVE-RIGHT";
            Self.FLeaveAnim.FName$2 = "MOVE-OUT-RIGHT";
            break;
      }
      TW3CustomAnimation.ExecuteEx(Self.FEnterAnim,aForm,null,$Event1(Self,TW3CustomApplication.HandleEnterAnimEnds));
      TW3CustomAnimation.ExecuteEx(Self.FLeaveAnim,Self.FCurrentForm,null,$Event1(Self,TW3CustomApplication.HandleLeaveAnimEnds));
   }
   /// procedure TW3CustomApplication.HandleEnterAnimEnds(Sender: TObject)
   ///  [line: 1116, column: 32, file: SmartCL.Application]
   ,HandleEnterAnimEnds:function(Self, Sender) {
      var mAnim = null;
      mAnim = $As(Sender,TW3NamedAnimation);
      switch (Self.FEntryEffect) {
         case 1 :
            TW3MovableControl.MoveTo$1(Self.FTransDst,0,0);
            Self.FCurrentForm = Self.FTransDst;
            TW3CustomForm.FormActivated(Self.FCurrentForm);
            Self.FFormChangeActive = false;
            break;
         case 2 :
            TW3MovableControl.MoveTo$1(Self.FTransDst,0,0);
            Self.FCurrentForm = Self.FTransDst;
            TW3CustomForm.FormActivated(Self.FCurrentForm);
            TW3MovableControl.SetVisible(Self.FTransSrc,false);
            TW3Display.PositionFormInView(Self.FDisplay,Self.FTransSrc);
            Self.FFormChangeActive = false;
            break;
      }
      TObject.Free(mAnim);
      mAnim = null;
   }
   /// procedure TW3CustomApplication.HandleLeaveAnimEnds(Sender: TObject)
   ///  [line: 1107, column: 32, file: SmartCL.Application]
   ,HandleLeaveAnimEnds:function(Self, Sender$1) {
      var mAnim$1 = null;
      mAnim$1 = $As(Sender$1,TW3NamedAnimation);
      TW3MovableControl.SetVisible(Self.FTransSrc,false);
      TObject.Free(mAnim$1);
   }
   /// procedure TW3CustomApplication.HookWindowEvents()
   ///  [line: 717, column: 32, file: SmartCL.Application]
   ,HookWindowEvents:function(Self) {
      w3_bind2(document.body,"onunload",$Event0(Self,TW3CustomApplication.CBOnUnLoad));
      w3_bind2(document.body,"onbeforeunload",$Event0(Self,TW3CustomApplication.CBOnBeforeUnload));
      w3_bind2(window,"onresize",$Event0(Self,TW3CustomApplication.CBOnReSize));
      w3_bind2(window,"onorientationchange",$Event0(Self,TW3CustomApplication.CBOnOrientationChange));
   }
   /// procedure TW3CustomApplication.RegisterFormInstance(aForm: TW3CustomForm; isMainForm: Boolean = False)
   ///  [line: 1026, column: 32, file: SmartCL.Application]
   ,RegisterFormInstance:function(Self, aForm$1, isMainForm) {
      if (Self.FTerminated) {
         return;
      }
      if (aForm$1) {
         if (Self.FForms.indexOf(aForm$1)<0) {
            try {
               Self.FForms.push(aForm$1);
            } catch ($e) {
               var e$1 = $W($e);
               throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3CustomApplication.RegisterFormInstance", TObject.ClassName(Self.ClassType), e$1.FMessage]);
            }
            w3_RequestAnimationFrame($Event0(aForm$1,TW3MovableControl.AdjustToParentBox));
            if (isMainForm) {
               Self.FMainForm = aForm$1;
            } else {
               TW3MovableControl.SetVisible(aForm$1,false);
            }
         } else {
            throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.RegisterFormInstance", TObject.ClassName(Self.ClassType), "Form already registered"]);
         }
      } else {
         throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.RegisterFormInstance", TObject.ClassName(Self.ClassType), "Form parameter is NIL error"]);
      }
   }
   /// procedure TW3CustomApplication.RunApp()
   ///  [line: 994, column: 32, file: SmartCL.Application]
   ,RunApp:function(Self) {
      var FTemp = null;
      TW3CustomApplication.HookWindowEvents(Self);
      TW3CustomApplication.ApplicationStarting$(Self);
      TApplicationFormsList.AutoCreateForms(FormsFactory(),Self.FDisplay.FView);
      if (Self.FMainForm) {
         FTemp = Self.FMainForm;
         Self.FMainForm = null;
         TW3CustomApplication.GotoFormByRef(Self,FTemp,0);
      }
      TW3CustomApplication.ApplicationStarted(Self);
   }
   /// procedure TW3CustomApplication.Terminate()
   ///  [line: 960, column: 32, file: SmartCL.Application]
   ,Terminate:function(Self) {
      var x$34 = 0;
      if (Self.FTerminated) {
         return;
      }
      Self.FTerminated = true;
      TW3CustomApplication.ApplicationClosing$(Self);
      try {
         var $temp1;
         for(x$34=0,$temp1=Self.FForms.length;x$34<$temp1;x$34++) {
            TObject.Free(Self.FForms[x$34]);
            Self.FForms[x$34]=null;
         }
         Self.FForms.length=0;
      } finally {
         TObject.Free(Self);
      }
   }
   /// procedure TW3CustomApplication.UnRegisterFormInstance(aForm: TW3CustomForm)
   ///  [line: 1064, column: 32, file: SmartCL.Application]
   ,UnRegisterFormInstance:function(Self, aForm$2) {
      var mIndex$1 = 0;
      if (!Self.FTerminated) {
         if (aForm$2) {
            mIndex$1 = Self.FForms.indexOf(aForm$2);
            if (mIndex$1>=0) {
               if (Self.FMainForm!==aForm$2) {
                  if (Self.FCurrentForm===aForm$2) {
                     TW3CustomApplication.GotoFormByRef(Self,Self.FMainForm,0);
                  }
                  Self.FForms.splice(mIndex$1,1)
                  ;
                  try {
                     TObject.Free(aForm$2);
                  } catch ($e) {
                     var e$2 = $W($e);
                     throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.UnRegisterFormInstance", TObject.ClassName(Self.ClassType), e$2.FMessage]);
                  }
               } else {
                  throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.UnRegisterFormInstance", TObject.ClassName(Self.ClassType), "Main form cannot be removed error"]);
               }
            } else {
               throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.UnRegisterFormInstance", TObject.ClassName(Self.ClassType), "Form is not registered"]);
            }
         } else {
            throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.UnRegisterFormInstance", TObject.ClassName(Self.ClassType), "Form parameter is NIL error"]);
         }
      }
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,ApplicationClosing$:function($){return $.ClassType.ApplicationClosing($)}
   ,ApplicationStarting$:function($){return $.ClassType.ApplicationStarting($)}
};
/// TW3CustomGameApplication = class (TW3CustomApplication)
///  [line: 24, column: 3, file: SmartCL.GameApp]
var TW3CustomGameApplication = {
   $ClassName:"TW3CustomGameApplication",$Parent:TW3CustomApplication
   ,$Init:function ($) {
      TW3CustomApplication.$Init($);
      $.FViewer = null;
   }
   /// procedure TW3CustomGameApplication.HandlePaintEvent(Sender: TObject; Canvas: TW3Canvas)
   ///  [line: 59, column: 36, file: SmartCL.GameApp]
   ,HandlePaintEvent:function(Self, Sender$2, Canvas$1) {
      TW3CustomGameApplication.PaintView$(Self,Canvas$1);
   }
   /// procedure TW3CustomGameApplication.ApplicationStarting()
   ///  [line: 44, column: 36, file: SmartCL.GameApp]
   ,ApplicationStarting:function(Self) {
      Self.FViewer = TW3Component.Create$44$($New(TW3GameView),Self.FDisplay.FView);
      TW3CustomApplication.ApplicationStarting(Self);
      Self.FViewer.FOnPaint = $Event2(Self,TW3CustomGameApplication.HandlePaintEvent);
   }
   /// procedure TW3CustomGameApplication.ApplicationClosing()
   ///  [line: 51, column: 36, file: SmartCL.GameApp]
   ,ApplicationClosing:function(Self) {
      if (Self.FViewer.FActive) {
         TW3GameView.EndSession(Self.FViewer);
      }
      TObject.Free(Self.FViewer);
      TW3CustomApplication.ApplicationClosing(Self);
   }
   ,Destroy:TW3CustomApplication.Destroy
   ,ApplicationClosing$:function($){return $.ClassType.ApplicationClosing($)}
   ,ApplicationStarting$:function($){return $.ClassType.ApplicationStarting($)}
   ,PaintView$:function($){return $.ClassType.PaintView.apply($.ClassType, arguments)}
};
/// TApplication = class (TW3CustomGameApplication)
///  [line: 18, column: 3, file: PlatformScroller]
var TApplication = {
   $ClassName:"TApplication",$Parent:TW3CustomGameApplication
   ,$Init:function ($) {
      TW3CustomGameApplication.$Init($);
   }
   /// procedure TApplication.ApplicationStarting()
   ///  [line: 46, column: 24, file: PlatformScroller]
   ,ApplicationStarting:function(Self) {
      TW3CustomGameApplication.ApplicationStarting(Self);
      Player = TPlayer.start($New(TPlayer));
      TPlayer.create$1(Player,10,10,"red",45,FPlats,RandPlats,15);
      i$12 = 0;
      while (i$12<AIS) {
         Ai$1[i$12]=TPlayer.start($New(TAi));
         TPlayer.create$1(Ai$1[i$12],10,10,"blue",30,FPlats,RandPlats,15);
         i$12+=1;
      }
      i$12 = 0;
      Level = 0;
      gamemode = 1;
      Selector = TSelect.create$5($New(TSelect));
      Options$1[0]=TOptionsButton.create$3($New(TOptionsButton),10,10,200,65,"Change Escape Key",15,60);
      Options$1[1]=TOptionsButton.create$3($New(TOptionsButton),430,10,200,65,"Change Enter Key",435,60);
      Options$1[2]=TOptionsButton.create$3($New(TOptionsButton),10,200,200,65,"Change Left Key",15,250);
      Options$1[3]=TOptionsButton.create$3($New(TOptionsButton),220,125,200,65,"Change Jump Key",225,175);
      Options$1[4]=TOptionsButton.create$3($New(TOptionsButton),220,200,200,65,"Change Fall Key",225,250);
      Options$1[5]=TOptionsButton.create$3($New(TOptionsButton),430,200,200,65,"Change Right Key",435,250);
      Options$1[6]=TOptionsButton.create$3($New(TOptionsButton),430,125,200,65,"Change Shoot Key",435,175);
      Options$1[7]=TOptionsButton.create$3($New(TOptionsButton),220,350,200,65,"Return to Game",225,400);
      Options$1[8]=TOptionsButton.create$3($New(TOptionsButton),10,10,60,30,"Options",15,33);
      Options$1[9]=TOptionsButton.create$3($New(TOptionsButton),80,10,60,30,"Restart",85,33);
      Options$1[10]=TOptionsButton.create$3($New(TOptionsButton),150,10,80,30,"Level Selector",155,33);
      ControlButtons[0]=TOptionsButton.create$3($New(TOptionsButton),0,0,50,30,"Move Left",0,0);
      ControlButtons[1]=TOptionsButton.create$3($New(TOptionsButton),0,0,50,30,"Move Right",0,0);
      ControlButtons[2]=TOptionsButton.create$3($New(TOptionsButton),0,0,50,30,"Jump",0,0);
      ControlButtons[3]=TOptionsButton.create$3($New(TOptionsButton),0,0,50,30,"Fall",0,0);
      ControlButtons[4]=TOptionsButton.create$3($New(TOptionsButton),0,0,50,30,"Shoot",0,0);
      ControlButtons[5]=TOptionsButton.create$3($New(TOptionsButton),0,0,50,30,"Enter Door",0,0);
      Controls[0]=TText.create$4($New(TText),"Jump: "+CodeToKeyName(JumpKey),"blue",700,50);
      Controls[1]=TText.create$4($New(TText),"Fall: "+CodeToKeyName(FallKey),"blue",700,100);
      Controls[2]=TText.create$4($New(TText),"Left: "+CodeToKeyName(LeftKey),"blue",700,150);
      Controls[3]=TText.create$4($New(TText),"Right: "+CodeToKeyName(RightKey),"blue",700,200);
      Controls[4]=TText.create$4($New(TText),"Shoot: "+CodeToKeyName(ShootKey),"blue",700,250);
      Controls[5]=TText.create$4($New(TText),"Enter\/Use: "+CodeToKeyName(EnterKey),"blue",700,300);
      Controls[6]=TText.create$4($New(TText),"Escape: "+CodeToKeyName(EscapeKey),"blue",700,350);
      EscapeKey = 27;
      EnterKey = 32;
      RightKey = 68;
      JumpKey = 87;
      FallKey = 83;
      LeftKey = 65;
      ShootKey = 69;
      UnlockedDoors = 1;
       //Sets up the "KeyDownEvent"
    window.onkeydown=function(e)
    {
      TApplication.KeyDownEvent(Self,e.keyCode);
    }
  TApplication.KeyDownEvent(Self,0);
       //Sets up the "KeyUpEvent"
    window.onkeyup=function(e)
    {
      TApplication.KeyUpEvent(Self,e.keyCode);
    }
  TApplication.KeyUpEvent(Self,0);
      TW3GameView.SetDelay(Self.FViewer,20);
      TW3GameView.StartSession(Self.FViewer,true);
   }
   /// procedure TApplication.ApplicationClosing()
   ///  [line: 212, column: 24, file: PlatformScroller]
   ,ApplicationClosing:function(Self) {
      TW3GameView.EndSession(Self.FViewer);
      TW3CustomGameApplication.ApplicationClosing(Self);
   }
   /// procedure TApplication.PaintView(Canvas: TW3Canvas)
   ///  [line: 218, column: 24, file: PlatformScroller]
   ,PaintView:function(Self, Canvas$2) {
      var i$13 = 0;
      var i$14 = 0;
      var i$15 = 0;
      function SideScroll(Player$1, FPlats$1, RandPlats$1, maxX$2, maxY$2, Ai$2) {
         if (TW3MovableControl.GetWidth$4(Self.FViewer)<=maxX$2) {
            if (Player$1.dead) {
               TPlayer.FallDead(Player$1);
            } else {
               TPlayer.update(Player$1,maxX$2,45);
               TPlayer.updateShoot(Player$1);
            }
            i$12 = 0;
            while (i$12<AIS) {
               if (Ai$2[i$12].dead) {
                  TPlayer.FallDead(Ai$2[i$12]);
               } else {
                  /* null */
               }
               i$12+=1;
            }
            if ((Player$1.X$4-offsetX)>(TW3MovableControl.GetWidth$4(Self.FViewer)/2)) {
               offsetX = Player$1.X$4-(TW3MovableControl.GetWidth$4(Self.FViewer)/2);
               if ((offsetX+TW3MovableControl.GetWidth$4(Self.FViewer))>maxX$2) {
                  offsetX = maxX$2-TW3MovableControl.GetWidth$4(Self.FViewer);
               }
            }
            if ((Player$1.X$4-offsetX)<((TW3MovableControl.GetWidth$4(Self.FViewer)/10)*2)) {
               offsetX = Player$1.X$4-((TW3MovableControl.GetWidth$4(Self.FViewer)/10)*2);
               if (offsetX<0) {
                  offsetX = 0;
               }
            }
         } else {
            if (Player$1.dead) {
               TPlayer.FallDead(Player$1);
            } else {
               TPlayer.update(Player$1,TW3MovableControl.GetWidth$4(Self.FViewer),45);
               TPlayer.updateShoot(Player$1);
            }
            i$12 = 0;
            while (i$12<AIS) {
               if (Ai$2[i$12].dead) {
                  TPlayer.FallDead(Ai$2[i$12]);
               } else {
                  /* null */
               }
               i$12+=1;
            }
         }
         if (TW3MovableControl.GetHeight$4(Self.FViewer)<=maxY$2) {
            if (Player$1.dead==false) {
               TPlayer.isGrounded(Player$1,maxY$2,FPlats$1,RandPlats$1);
            }
            if (((Player$1.Y$4+45)-offsetY)>(TW3MovableControl.GetHeight$4(Self.FViewer)/2)) {
               offsetY = (Player$1.Y$4+45)-(TW3MovableControl.GetHeight$4(Self.FViewer)/2);
               if ((offsetY+TW3MovableControl.GetHeight$4(Self.FViewer))>maxY$2) {
                  offsetY = maxY$2-TW3MovableControl.GetHeight$4(Self.FViewer);
               }
            }
            if ((Player$1.Y$4-offsetY)<((TW3MovableControl.GetHeight$4(Self.FViewer)/10)*2)) {
               offsetY = Player$1.Y$4-((TW3MovableControl.GetHeight$4(Self.FViewer)/10)*2);
               if (offsetY<0) {
                  offsetY = 0;
               }
            }
         } else {
            if (Player$1.dead==false) {
               TPlayer.isGrounded(Player$1,TW3MovableControl.GetHeight$4(Self.FViewer),FPlats$1,RandPlats$1);
            }
         }
      };
      function Touch(o, d$1) {
         var j = 0;
         var x$35 = 0;
         var y$33 = 0;
         TApplication.KeyUpEvent(Self,LeftKey);
         TApplication.KeyUpEvent(Self,RightKey);
         for(j=0;j<=9223372036854775807;j++) {
            x$35 = TW3TouchList.a$2(TW3TouchData.GetTouches(d$1),j).FPageX;
            y$33 = TW3TouchList.a$2(TW3TouchData.GetTouches(d$1),j).FPageY;
            if (TOptionsButton.clicked(ControlButtons[0],x$35,y$33)) {
               TApplication.KeyDownEvent(Self,LeftKey);
            } else if (TOptionsButton.clicked(ControlButtons[1],x$35,y$33)) {
               TApplication.KeyDownEvent(Self,RightKey);
            } else if (TOptionsButton.clicked(ControlButtons[2],x$35,y$33)) {
               TApplication.KeyDownEvent(Self,JumpKey);
            } else if (TOptionsButton.clicked(ControlButtons[3],x$35,y$33)) {
               TApplication.KeyDownEvent(Self,FallKey);
            } else if (TOptionsButton.clicked(ControlButtons[4],x$35,y$33)) {
               TApplication.KeyDownEvent(Self,ShootKey);
            } else if (TOptionsButton.clicked(ControlButtons[5],x$35,y$33)) {
               TApplication.KeyDownEvent(Self,EnterKey);
            } else if (TOptionsButton.clicked(Options$1[8],x$35,y$33)) {
               gamemode = 2;
            } else if (TOptionsButton.clicked(Options$1[9],x$35,y$33)) {
               LevelStarter(Level);
            } else if (TOptionsButton.clicked(Options$1[10],x$35,y$33)) {
               TApplication.KeyDownEvent(Self,EscapeKey);
            } else if (TOptionsButton.clicked(Options$1[8],x$35,y$33)) {
               gamemode = 2;
            } else if (!gamemode) {
               if (Player.canShoot) {
                  i$12 = -1;
                  do {
                     i$12+=1;
                  } while (!((Bullets[i$12].Shot==false)||(i$12==(Bullets.length-1))));
                  if (i$12==(Bullets.length-1)) {
                     i$12+=1;
                  }
                  if (Player.FaceLeft==true) {
                     Bullets[i$12]=TBullet.create$2($New(TBullet),Player.FaceLeft,Player.X$4-15-1,Player.Y$4+15+3,Player.Damage,TPlayer.ShootAngle(Player,x$35+offsetX,y$33+offsetY));
                  } else {
                     Bullets[i$12]=TBullet.create$2($New(TBullet),Player.FaceLeft,Player.X$4+15+1,Player.Y$4+15+3,Player.Damage,TPlayer.ShootAngle(Player,x$35+offsetX,y$33+offsetY));
                  }
                  TPlayer.resetShoot(Player);
               }
            }
         }
      };
      function MouseDown$1(o$1, b$18, t, x$36, y$34) {
         if (TOptionsButton.clicked(ControlButtons[0],x$36,y$34)) {
            TApplication.KeyDownEvent(Self,LeftKey);
         } else if (TOptionsButton.clicked(ControlButtons[1],x$36,y$34)) {
            TApplication.KeyDownEvent(Self,RightKey);
         } else if (TOptionsButton.clicked(ControlButtons[2],x$36,y$34)) {
            TApplication.KeyDownEvent(Self,JumpKey);
         } else if (TOptionsButton.clicked(ControlButtons[3],x$36,y$34)) {
            TApplication.KeyDownEvent(Self,FallKey);
         } else if (TOptionsButton.clicked(ControlButtons[4],x$36,y$34)) {
            TApplication.KeyDownEvent(Self,ShootKey);
         } else if (TOptionsButton.clicked(ControlButtons[5],x$36,y$34)) {
            TApplication.KeyDownEvent(Self,EnterKey);
         } else if (TOptionsButton.clicked(Options$1[8],x$36,y$34)) {
            gamemode = 2;
         } else if (TOptionsButton.clicked(Options$1[9],x$36,y$34)) {
            LevelStarter(Level);
         } else if (TOptionsButton.clicked(Options$1[10],x$36,y$34)) {
            TApplication.KeyDownEvent(Self,EscapeKey);
         } else if (!gamemode) {
            if (Player.canShoot) {
               i$12 = -1;
               do {
                  i$12+=1;
               } while (!((Bullets[i$12].Shot==false)||(i$12==(Bullets.length-1))));
               if (i$12==(Bullets.length-1)) {
                  i$12+=1;
               }
               if (Player.FaceLeft==true) {
                  Bullets[i$12]=TBullet.create$2($New(TBullet),Player.FaceLeft,Player.X$4-15-1,Player.Y$4+15+3,Player.Damage,TPlayer.ShootAngle(Player,x$36+offsetX,y$34+offsetY));
               } else {
                  Bullets[i$12]=TBullet.create$2($New(TBullet),Player.FaceLeft,Player.X$4+15+1,Player.Y$4+15+3,Player.Damage,TPlayer.ShootAngle(Player,x$36+offsetX,y$34+offsetY));
               }
               TPlayer.resetShoot(Player);
            }
         }
      };
      screenWidth = TW3MovableControl.GetWidth$4(Self.FViewer);
      screenHeight = TW3MovableControl.GetHeight$4(Self.FViewer);
      if (Changed) {
         --Changed;
      }
      if (gamemode==1) {
         SideScroll(Player,Selector.Plats,Selector.Plats,Selector.maxX$1,Selector.maxY$1,Selector.Ai);
         TW3Canvas.SetFillStyle(Canvas$2,"white");
         TW3Canvas.FillRectF$2(Canvas$2,0,0,TW3MovableControl.GetWidth$4(Self.FViewer),TW3MovableControl.GetHeight$4(Self.FViewer));
         TW3Canvas.SetFont(Canvas$2,"10pt verdana");
         TW3Canvas.SetFillStyle(Canvas$2,"red");
         TW3Canvas.FillTextF(Canvas$2,"FPS: "+Self.FViewer.FFrameRate.toString(),80,20,2147483647);
         DrawButton(Options$1[8],20,Canvas$2);
         PostionMoveButtons(TW3MovableControl.GetWidth$4(Self.FViewer),TW3MovableControl.GetHeight$4(Self.FViewer));
         var $temp2;
         for(i$13=0,$temp2=ControlButtons.length;i$13<$temp2;i$13++) {
            DrawControlButton(ControlButtons[i$13],15,Canvas$2);
         }
         TW3CustomControl._setMouseDown(Self.FViewer,MouseDown$1);
         TW3CustomControl._setTouchBegins(Self.FViewer,Touch);
         TW3CustomControl._setTouchMoves(Self.FViewer,Touch);
         TW3CustomControl._setTouchEnds(Self.FViewer,Touch);
         TW3CustomControl._setMouseUp(Self.FViewer,function (o$2, b$19, t$1, x$37, y$35) {
            TApplication.KeyUpEvent(Self,LeftKey);
            TApplication.KeyUpEvent(Self,RightKey);
         });
         Selector.Text$3[0].text = "Use "+CodeToKeyName(EnterKey)+" to go through the door";
         Selector.Text$3[1].text = "Use "+CodeToKeyName(LeftKey)+" and "+CodeToKeyName(RightKey)+" to move left and right";
         DrawPlats(Selector.Plats,Canvas$2);
         DrawDoors(Selector.Doors,Canvas$2);
         DrawText(Selector.Text$3,Canvas$2,10);
         DrawPlayer(Player,Canvas$2);
         if ((Player.Y$4-offsetY)>TW3MovableControl.GetHeight$4(Self.FViewer)) {
            TApplication.KeyDownEvent(Self,EscapeKey);
         }
      }
      if (!gamemode) {
         SideScroll(Player,FPlats,RandPlats,maxX,maxY,Ai$1);
         i$12 = 0;
         while (i$12<=(Bullets.length-1)) {
            if (TW3MovableControl.GetWidth$4(Self.FViewer)>maxX) {
               TBullet.update$1(Bullets[i$12],TW3MovableControl.GetWidth$4(Self.FViewer),Player,Ai$1,FPlats,RandPlats);
            } else {
               TBullet.update$1(Bullets[i$12],maxX,Player,Ai$1,FPlats,RandPlats);
            }
            i$12+=1;
         }
         var $temp3;
         for(i$14=0,$temp3=Turrets.length;i$14<$temp3;i$14++) {
            TTurret.Update$3(Turrets[i$14],Player,Bullets,Ai$1,FPlats,RandPlats);
         }
         TW3Canvas.SetFillStyle(Canvas$2,"white");
         TW3Canvas.FillRectF$2(Canvas$2,0,0,TW3MovableControl.GetWidth$4(Self.FViewer),TW3MovableControl.GetHeight$4(Self.FViewer));
         TW3Canvas.SetFont(Canvas$2,"10pt verdana");
         TW3Canvas.SetFillStyle(Canvas$2,"red");
         TW3Canvas.FillTextF(Canvas$2,"FPS: "+Self.FViewer.FFrameRate.toString(),240,20,2147483647);
         DrawDoor(EntranceDoor,Canvas$2,false);
         DrawDoor(ExitDoor,Canvas$2,false);
         DrawPlats(FPlats,Canvas$2);
         DrawPlats(RandPlats,Canvas$2);
         DrawBullet(Bullets,Canvas$2);
         DrawText(gameText,Canvas$2,10);
         DrawAI(Ai$1,Canvas$2);
         DrawPlayer(Player,Canvas$2);
         DrawTurret(Turrets,Canvas$2);
         DrawButton(Options$1[8],20,Canvas$2);
         DrawButton(Options$1[9],20,Canvas$2);
         DrawButton(Options$1[10],20,Canvas$2);
         PostionMoveButtons(TW3MovableControl.GetWidth$4(Self.FViewer),TW3MovableControl.GetHeight$4(Self.FViewer));
         var $temp4;
         for(i$15=0,$temp4=ControlButtons.length;i$15<$temp4;i$15++) {
            DrawControlButton(ControlButtons[i$15],20,Canvas$2);
         }
         TW3CustomControl._setMouseDown(Self.FViewer,MouseDown$1);
         TW3CustomControl._setTouchBegins(Self.FViewer,Touch);
         TW3CustomControl._setTouchMoves(Self.FViewer,Touch);
         TW3CustomControl._setTouchEnds(Self.FViewer,Touch);
         TW3CustomControl._setMouseUp(Self.FViewer,function (o$3, b$20, t$2, x$38, y$36) {
            TApplication.KeyUpEvent(Self,LeftKey);
            TApplication.KeyUpEvent(Self,RightKey);
         });
         TW3CustomControl._setMouseMove(Self.FViewer,function (o$4, ss, x$39, y$37) {
            MouseX = x$39;
            MouseY = y$37;
         });
         switch (Level) {
            case 1 :
               gameText[0].text = "Use "+CodeToKeyName(LeftKey)+" and "+CodeToKeyName(RightKey)+" to move left and right";
               gameText[1].text = "Use "+CodeToKeyName(EnterKey)+" to go through the door";
               break;
            case 2 :
               gameText[0].text = "Use "+CodeToKeyName(JumpKey)+" to jump";
               break;
            case 4 :
               gameText[0].text = "Use "+CodeToKeyName(FallKey)+" to fall through the platform";
               break;
            case 7 :
               gameText[3].text = "Use "+CodeToKeyName(ShootKey)+" to shoot stright";
               break;
         }
         if (((Player.dead==true)&&(Player.Y$4>TW3MovableControl.GetHeight$4(Self.FViewer)))&&(Player.Y$4>maxY)) {
            LevelStarter(Level);
         }
      }
      if (gamemode==2) {
         offsetX = 0;
         offsetY = 0;
         TW3Canvas.SetFillStyle(Canvas$2,"white");
         TW3Canvas.BeginPath(Canvas$2);
         TW3Canvas.FillRectF$2(Canvas$2,0,0,TW3MovableControl.GetWidth$4(Self.FViewer),TW3MovableControl.GetHeight$4(Self.FViewer));
         TW3Canvas.ClosePath(Canvas$2);
         TW3Canvas.Fill(Canvas$2);
         Controls[0]=TText.create$4($New(TText),"Jump: "+CodeToKeyName(JumpKey),"blue",700,50);
         Controls[1]=TText.create$4($New(TText),"Fall: "+CodeToKeyName(FallKey),"blue",700,100);
         Controls[2]=TText.create$4($New(TText),"Left: "+CodeToKeyName(LeftKey),"blue",700,150);
         Controls[3]=TText.create$4($New(TText),"Right: "+CodeToKeyName(RightKey),"blue",700,200);
         Controls[4]=TText.create$4($New(TText),"Shoot: "+CodeToKeyName(ShootKey),"blue",700,250);
         Controls[5]=TText.create$4($New(TText),"Enter\/Use: "+CodeToKeyName(EnterKey),"blue",700,300);
         Controls[6]=TText.create$4($New(TText),"Escape: "+CodeToKeyName(EscapeKey),"blue",700,350);
         DrawButton(Options$1[0],40,Canvas$2);
         DrawButton(Options$1[1],40,Canvas$2);
         DrawButton(Options$1[2],40,Canvas$2);
         DrawButton(Options$1[3],40,Canvas$2);
         DrawButton(Options$1[4],40,Canvas$2);
         DrawButton(Options$1[5],40,Canvas$2);
         DrawButton(Options$1[6],40,Canvas$2);
         DrawButton(Options$1[7],40,Canvas$2);
         DrawText(Controls,Canvas$2,25);
         TW3Canvas.SetFillStyle(Canvas$2,"blue");
         TW3Canvas.SetFont(Canvas$2,"20pt verdana");
         if (Changed) {
            TW3Canvas.FillTextF(Canvas$2,"Key was changed!",10,110,2147483647);
         } else if (EscapeKeyChange) {
            TW3Canvas.FillTextF(Canvas$2,"Click the desired key to be Escape",10,110,2147483647);
         } else if (EnterKeyChange) {
            TW3Canvas.FillTextF(Canvas$2,"Click the desired key to be Enter Door\/Use",10,110,2147483647);
         } else if (LeftKeyChange) {
            TW3Canvas.FillTextF(Canvas$2,"Click the desired key to be Move Left",10,110,2147483647);
         } else if (JumpKeyChange) {
            TW3Canvas.FillTextF(Canvas$2,"Click the desired key to be Jump",10,110,2147483647);
         } else if (FallKeyChange) {
            TW3Canvas.FillTextF(Canvas$2,"Click the desired key to be Fall",10,110,2147483647);
         } else if (RightKeyChange) {
            TW3Canvas.FillTextF(Canvas$2,"Click the desired key to be Move Right",10,110,2147483647);
         } else if (ShootKeyChange) {
            TW3Canvas.FillTextF(Canvas$2,"Click the desired key to be Shoot",10,110,2147483647);
         }
         if (!Changed) {
            TW3CustomControl._setMouseDown(Self.FViewer,function (o$5, b$21, t$3, x$40, y$38) {
               if (TOptionsButton.clicked(Options$1[0],x$40,y$38)) {
                  EscapeKeyChange = true;
                  EnterKeyChange = false;
                  LeftKeyChange = false;
                  JumpKeyChange = false;
                  FallKeyChange = false;
                  RightKeyChange = false;
                  ShootKeyChange = false;
               } else if (TOptionsButton.clicked(Options$1[1],x$40,y$38)) {
                  EscapeKeyChange = false;
                  EnterKeyChange = true;
                  LeftKeyChange = false;
                  JumpKeyChange = false;
                  FallKeyChange = false;
                  RightKeyChange = false;
                  ShootKeyChange = false;
               } else if (TOptionsButton.clicked(Options$1[2],x$40,y$38)) {
                  EscapeKeyChange = false;
                  EnterKeyChange = false;
                  LeftKeyChange = true;
                  JumpKeyChange = false;
                  FallKeyChange = false;
                  RightKeyChange = false;
                  ShootKeyChange = false;
               } else if (TOptionsButton.clicked(Options$1[3],x$40,y$38)) {
                  EscapeKeyChange = false;
                  EnterKeyChange = false;
                  LeftKeyChange = false;
                  JumpKeyChange = true;
                  FallKeyChange = false;
                  RightKeyChange = false;
                  ShootKeyChange = false;
               } else if (TOptionsButton.clicked(Options$1[4],x$40,y$38)) {
                  EscapeKeyChange = false;
                  EnterKeyChange = false;
                  LeftKeyChange = false;
                  JumpKeyChange = false;
                  FallKeyChange = true;
                  RightKeyChange = false;
                  ShootKeyChange = false;
               } else if (TOptionsButton.clicked(Options$1[5],x$40,y$38)) {
                  EscapeKeyChange = false;
                  EnterKeyChange = false;
                  LeftKeyChange = false;
                  JumpKeyChange = false;
                  FallKeyChange = false;
                  RightKeyChange = true;
                  ShootKeyChange = false;
               } else if (TOptionsButton.clicked(Options$1[6],x$40,y$38)) {
                  EscapeKeyChange = false;
                  EnterKeyChange = false;
                  LeftKeyChange = false;
                  JumpKeyChange = false;
                  FallKeyChange = false;
                  RightKeyChange = false;
                  ShootKeyChange = true;
               } else if (TOptionsButton.clicked(Options$1[7],x$40,y$38)) {
                  EscapeKeyChange = false;
                  EnterKeyChange = false;
                  LeftKeyChange = false;
                  JumpKeyChange = false;
                  FallKeyChange = false;
                  RightKeyChange = false;
                  ShootKeyChange = false;
                  if (!Level) {
                     gamemode = 1;
                  } else {
                     gamemode = 0;
                  }
               }
            });
         }
      }
   }
   /// procedure TApplication.KeyDownEvent(mCode: Integer)
   ///  [line: 116, column: 24, file: PlatformScroller]
   ,KeyDownEvent:function(Self, mCode) {
      if (gamemode==2) {
         SwapKeys(mCode);
      } else {
         {var $temp5 = mCode;
            if ($temp5==EscapeKey) {
               gamemode = 1;
               TPlayer.create$1(Player,10,10,"red",45,FPlats,RandPlats,15);
               offsetX = 0;
               offsetY = 0;
               maxX = 0;
               maxY = 0;
               Level = 0;
            }
             else if ($temp5==EnterKey) {
               if (gamemode==1) {
                  ClearVARS();
                  LevelStarter(TSelect.selected(Selector,Player.X$4,Player.Y$4,Player.X$4+15,45));
               }
               if (!gamemode) {
                  if (TE.isDone(ExitDoor,Player.X$4,Player.X$4+15,Player.Y$4+45)) {
                     if (Level<=17) {
                        if (UnlockedDoors<=Level) {
                           UnlockedDoors = Level+1;
                        }
                        LevelStarter(Level+1);
                     } else {
                        TApplication.KeyDownEvent(Self,EscapeKey);
                     }
                  }
               }
            }
             else if ($temp5==RightKey) {
               if (Player.dead==false) {
                  TPlayer.Move$2(Player,0);
               }
               Player.X$4+=1;
            }
             else if ($temp5==LeftKey) {
               if (Player.dead==false) {
                  TPlayer.Move$2(Player,1);
               }
               Player.X$4-=1;
            }
             else if ($temp5==JumpKey) {
               if ((Player.KnockBackFrame==(-1))&&(Player.dead==false)) {
                  TPlayer.doJump(Player);
               }
            }
             else if ($temp5==FallKey) {
               if (Player.dead==false) {
                  TPlayer.doFall(Player);
               }
            }
             else if ($temp5==ShootKey) {
               if (((gamemode==0)&&(Player.canShoot==true))&&(Player.dead==false)) {
                  i$12 = -1;
                  do {
                     i$12+=1;
                  } while (!((Bullets[i$12].Shot==false)||(i$12==(Bullets.length-1))));
                  if (i$12==(Bullets.length-1)) {
                     i$12+=1;
                  }
                  if (Player.FaceLeft==true) {
                     Bullets[i$12]=TBullet.create$2($New(TBullet),Player.FaceLeft,Player.X$4-15-1,Player.Y$4+15+3,Player.Damage,270);
                  } else {
                     Bullets[i$12]=TBullet.create$2($New(TBullet),Player.FaceLeft,Player.X$4+15+1,Player.Y$4+15+3,Player.Damage,90);
                  }
                  TPlayer.resetShoot(Player);
               }
            }
         }
      }
   }
   /// procedure TApplication.KeyUpEvent(mCode: Integer)
   ///  [line: 200, column: 24, file: PlatformScroller]
   ,KeyUpEvent:function(Self, mCode$1) {
      {var $temp6 = mCode$1;
         if ($temp6==RightKey) {
            TPlayer.Move$2(Player,2)         }
          else if ($temp6==LeftKey) {
            TPlayer.Move$2(Player,2)         }
      }
   }
   ,Destroy:TW3CustomApplication.Destroy
   ,ApplicationClosing$:function($){return $.ClassType.ApplicationClosing($)}
   ,ApplicationStarting$:function($){return $.ClassType.ApplicationStarting($)}
   ,PaintView$:function($){return $.ClassType.PaintView.apply($.ClassType, arguments)}
};
function SwapKeys(mCode$2) {
   var CurrentKeyNum = 0;
   var CurrentKeyVal = 0;
   var i$16 = 0;
   if (LeftKeyChange) {
      CurrentKeyNum = 0;
      CurrentKeyVal = LeftKey;
      LeftKeyChange = false;
   } else if (RightKeyChange) {
      CurrentKeyNum = 1;
      CurrentKeyVal = RightKey;
      RightKeyChange = false;
   } else if (JumpKeyChange) {
      CurrentKeyNum = 2;
      CurrentKeyVal = JumpKey;
      JumpKeyChange = false;
   } else if (FallKeyChange) {
      CurrentKeyNum = 3;
      CurrentKeyVal = FallKey;
      FallKeyChange = false;
   } else if (ShootKeyChange) {
      CurrentKeyNum = 4;
      CurrentKeyVal = ShootKey;
      ShootKeyChange = false;
   } else if (EnterKeyChange) {
      CurrentKeyNum = 5;
      CurrentKeyVal = EnterKey;
      EnterKeyChange = false;
   } else if (EscapeKeyChange) {
      CurrentKeyNum = 6;
      CurrentKeyVal = EscapeKey;
      EscapeKeyChange = false;
   }
   for(i$16=0;i$16<=6;i$16++) {
      if (i$16==CurrentKeyNum) {
         continue;
      } else {
         {var $temp7 = i$16;
            if ($temp7==0) {
               if (LeftKey==mCode$2) {
                  LeftKey = CurrentKeyVal;
               }
               break;
            }
             else if ($temp7==1) {
               if (RightKey==mCode$2) {
                  RightKey = CurrentKeyVal;
               }
               break;
            }
             else if ($temp7==2) {
               if (JumpKey==mCode$2) {
                  JumpKey = CurrentKeyVal;
               }
               break;
            }
             else if ($temp7==3) {
               if (FallKey==mCode$2) {
                  FallKey = CurrentKeyVal;
               }
               break;
            }
             else if ($temp7==4) {
               if (ShootKey==mCode$2) {
                  ShootKey = CurrentKeyVal;
               }
               break;
            }
             else if ($temp7==5) {
               if (EnterKey==mCode$2) {
                  EnterKey = CurrentKeyVal;
               }
               break;
            }
             else if ($temp7==6) {
               if (EscapeKey==mCode$2) {
                  EscapeKey = CurrentKeyVal;
               }
               break;
            }
         }
      }
   }
   if (!CurrentKeyNum) {
      LeftKey = mCode$2;
   } else if (CurrentKeyNum==1) {
      RightKey = mCode$2;
   } else if (CurrentKeyNum==2) {
      JumpKey = mCode$2;
   } else if (CurrentKeyNum==3) {
      FallKey = mCode$2;
   } else if (CurrentKeyNum==4) {
      ShootKey = mCode$2;
   } else if (CurrentKeyNum==5) {
      EnterKey = mCode$2;
   } else if (CurrentKeyNum==6) {
      EscapeKey = mCode$2;
   }
};
function PostionMoveButtons(GameWidth, GameHeight) {
   ControlButtons[0]=TOptionsButton.create$3($New(TOptionsButton),10,GameHeight-40,50,30,"Left",15,GameHeight-17);
   ControlButtons[1]=TOptionsButton.create$3($New(TOptionsButton),130,GameHeight-40,50,30,"Right",135,GameHeight-17);
   ControlButtons[2]=TOptionsButton.create$3($New(TOptionsButton),70,GameHeight-40,50,30,"Jump",75,GameHeight-17);
   ControlButtons[3]=TOptionsButton.create$3($New(TOptionsButton),GameWidth-60,GameHeight-100,50,30,"Fall",GameWidth-55,GameHeight-77);
   ControlButtons[4]=TOptionsButton.create$3($New(TOptionsButton),GameWidth-60,GameHeight-40,50,30,"Shoot",GameWidth-55,GameHeight-17);
   ControlButtons[5]=TOptionsButton.create$3($New(TOptionsButton),10,50,60,30,"Enter Door",15,73);
};
function LevelStarter(level) {
   switch (level) {
      case 0 :
         /* null */
break;
      case 1 :
         if (UnlockedDoors>=1) {
            Initialize$16();
            Level = 1;
            gamemode = 0;
         }
         break;
      case 2 :
         if (UnlockedDoors>=2) {
            Initialize$7();
            Level = 2;
            gamemode = 0;
         }
         break;
      case 3 :
         if (UnlockedDoors>=3) {
            Initialize$6();
            Level = 3;
            gamemode = 0;
         }
         break;
      case 4 :
         if (UnlockedDoors>=4) {
            Initialize$5();
            Level = 4;
            gamemode = 0;
         }
         break;
      case 5 :
         if (UnlockedDoors>=5) {
            Initialize$4();
            Level = 5;
            gamemode = 0;
         }
         break;
      case 6 :
         if (UnlockedDoors>=6) {
            Initialize$3();
            Level = 6;
            gamemode = 0;
         }
         break;
      case 7 :
         if (UnlockedDoors>=7) {
            Initialize$2();
            Level = 7;
            gamemode = 0;
         }
         break;
      case 8 :
         if (UnlockedDoors>=8) {
            Initialize$1();
            Level = 8;
            gamemode = 0;
         }
         break;
      case 9 :
         if (UnlockedDoors>=9) {
            Initialize();
            Level = 9;
            gamemode = 0;
         }
         break;
      case 10 :
         if (UnlockedDoors>=10) {
            Initialize$15();
            Level = 10;
            gamemode = 0;
         }
         break;
      case 11 :
         if (UnlockedDoors>=11) {
            Initialize$14();
            Level = 11;
            gamemode = 0;
         }
         break;
      case 12 :
         if (UnlockedDoors>=12) {
            Initialize$13();
            Level = 12;
            gamemode = 0;
         }
         break;
      case 13 :
         if (UnlockedDoors>=13) {
            Initialize$12();
            Level = 13;
            gamemode = 0;
         }
         break;
      case 14 :
         if (UnlockedDoors>=14) {
            Initialize$11();
            Level = 14;
            gamemode = 0;
         }
         break;
      case 15 :
         if (UnlockedDoors>=15) {
            Initialize$10();
            Level = 15;
            gamemode = 0;
         }
         break;
      case 16 :
         if (UnlockedDoors>=16) {
            Initialize$9();
            Level = 16;
            gamemode = 0;
         }
         break;
      case 17 :
         if (UnlockedDoors>=17) {
            Initialize$8();
            Level = 17;
            gamemode = 0;
         }
         break;
      default :
         if (UnlockedDoors>=18) {
            ClearVARS();
            InDoor(1600,700);
            OutDoor(100,125);
            FixPlats(EntranceDoor.X$2,EntranceDoor.Y$2+60,50,10,false,false,false,false,false,200,false,false);
            FixPlats(ExitDoor.X$2-15,ExitDoor.Y$2+60,50,10,false,false,false,false,false,200,false,false);
            SideScrollSize(2000,1000);
            PercentofRands(10);
            PercentofVerticals(30);
            PercentofNoFalls(30);
            PercentofJumpThoughs(45);
            PercentofCrumble(10);
            PercentofMovings(25);
            PercentofMovesThatMoveX(30);
            MaxMoveForMoves(1000);
            PercentofTurretsOnLeftorTop(0.7);
            PercentofTurretsOnRightorBottom(0.7);
            SpawnRands();
            Level = 18;
            gamemode = 0;
            StartLvl(0);
         }
   }
};
/// TW3RGBA = record
///  [line: 175, column: 3, file: System.Colors]
function Copy$TW3RGBA(s,d) {
   d.A$1=s.A$1;
   d.B=s.B;
   d.G=s.G;
   d.R=s.R;
   return d;
}
function Clone$TW3RGBA($) {
   return {
      A$1:$.A$1,
      B:$.B,
      G:$.G,
      R:$.R
   }
}
function StrToColor(aColorStr) {
   aColorStr={v:aColorStr};
   var Result = {v:0};
   try {
      var mTemp = "";
      var xpos = 0;
      var r = 0;
      var g = 0;
      var b = 0;
      aColorStr.v = Trim$_String_(aColorStr.v);
      if (!aColorStr.v.length) {
         return Result.v;
      }
      if ((aColorStr.v).toLocaleLowerCase()=="transparent") {
         Result.v = 536870911;
         return Result.v;
      }
      if ((aColorStr.v.charAt(0)=="#")||(aColorStr.v.charAt(0)=="$")) {
         Result.v = parseInt("0x"+Trim$_String_Integer_Integer_(aColorStr.v,1,0),16);
      } else {
         if ((aColorStr.v).substr(0,2)=="0x") {
            Result.v = parseInt(aColorStr.v,16);
         } else if (((aColorStr.v).substr(0,4)).toLowerCase()=="rgb(") {
            aColorStr.v = Trim$_String_Integer_Integer_(aColorStr.v,4,0);
            try {
               xpos = (aColorStr.v.indexOf(",")+1);
               if (xpos>1) {
                  mTemp = aColorStr.v.substr(0,(xpos-1));
                  Delete(aColorStr,1,xpos);
                  if (mTemp.charAt(0)=="$") {
                     mTemp = "0x"+Trim$_String_Integer_Integer_(mTemp,1,0);
                  }
                  r = parseInt(mTemp,10);
               }
               xpos = (aColorStr.v.indexOf(",")+1);
               if (xpos>1) {
                  mTemp = aColorStr.v.substr(0,(xpos-1));
                  Delete(aColorStr,1,xpos);
                  if (mTemp.charAt(0)=="$") {
                     mTemp = "0x"+Trim$_String_Integer_Integer_(mTemp,1,0);
                  }
                  g = parseInt(mTemp,10);
               }
               xpos = (aColorStr.v.indexOf(")")+1);
               if (xpos>1) {
                  mTemp = aColorStr.v.substr(0,(xpos-1));
                  if (mTemp.charAt(0)=="$") {
                     mTemp = "0x"+Trim$_String_Integer_Integer_(mTemp,1,0);
                  }
                  b = parseInt(mTemp,10);
               }
               Result.v = RGBToColor(r,g,b);
            } catch ($e) {
               var e$3 = $W($e);
               return Result.v;
            }
         }
      }
   } finally {return Result.v}
};
function RGBToColor(aRed, aGreen, aBlue) {
   return (aBlue|(aGreen<<8))|(aRed<<16);
};
function ColorToWebStr(aColor, alpha) {
   return ColorToWebStr$1((aColor>>>16)&255,(aColor>>>8)&255,aColor&255,alpha);
};
function ColorToWebStr$1(r$3, g$1, b$22, a$53) {
   return (a$53==255)?"#"+IntToHex2(r$3)+IntToHex2(g$1)+IntToHex2(b$22):"rgba("+r$3.toString()+","+g$1.toString()+","+b$22.toString()+","+FloatToStr$_Float_(a$53/255)+")";
};
/// TW3TagObj = class (TObject)
///  [line: 190, column: 3, file: SmartCL.Components]
var TW3TagObj = {
   $ClassName:"TW3TagObj",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FAccess = null;
      $.FComponentState = [0];
      $.FHandle$3 = undefined;
      $.FOwner$2 = undefined;
      $.FTagId = "";
      $.FUpdating = 0;
   }
   /// procedure TW3TagObj.AddToComponentState(const Flags: TComponentState)
   ///  [line: 1156, column: 21, file: SmartCL.Components]
   ,AddToComponentState:function(Self, Flags) {
      if ($SetIn(Flags,0,0,6)) {
         $SetInc(Self.FComponentState,0,0,6);
      }
      if ($SetIn(Flags,1,0,6)) {
         $SetInc(Self.FComponentState,1,0,6);
      }
      if ($SetIn(Flags,2,0,6)) {
         $SetInc(Self.FComponentState,2,0,6);
      }
      if ($SetIn(Flags,3,0,6)) {
         $SetInc(Self.FComponentState,3,0,6);
      }
      if ($SetIn(Flags,4,0,6)) {
         $SetInc(Self.FComponentState,4,0,6);
      }
      if ($SetIn(Flags,5,0,6)) {
         $SetInc(Self.FComponentState,5,0,6);
      }
   }
   /// procedure TW3TagObj.AfterUpdate()
   ///  [line: 1196, column: 21, file: SmartCL.Components]
   ,AfterUpdate:function(Self) {
      /* null */
   }
   /// procedure TW3TagObj.BeginUpdate()
   ///  [line: 1181, column: 21, file: SmartCL.Components]
   ,BeginUpdate:function(Self) {
      ++Self.FUpdating;
   }
   /// constructor TW3TagObj.Create()
   ///  [line: 1028, column: 23, file: SmartCL.Components]
   ,Create$43:function(Self) {
      TObject.Create(Self);
      $SetInc(Self.FComponentState,0,0,6);
      try {
         Self.FTagId = TW3TagObj.MakeElementTagId$(Self);
         Self.FHandle$3 = TW3TagObj.MakeElementTagObj$(Self);
      } catch ($e) {
         var e$4 = $W($e);
         EW3TagObj.RaiseCntErrMethod("TW3TagObj.Create",Self,e$4.FMessage)      }
      $SetInc(Self.FComponentState,1,0,6);
      if (TVariant.AsObject(Self.FHandle$3)!==TVariant.AsObject(document.body)) {
         if (Self.FTagId.length>0) {
            w3_setAttrib(Self.FHandle$3,"id",Self.FTagId);
         }
      }
      TW3TagObj.StyleTagObject$(Self);
      TW3TagObj.BeginUpdate(Self);
      try {
         TW3TagObj.InitializeObject$(Self);
      } finally {
         TW3TagObj.EndUpdate(Self);
      }
      setTimeout(function () {
         $SetExc(Self.FComponentState,1,0,6);
         $SetExc(Self.FComponentState,0,0,6);
      },100);
      $SetInc(Self.FComponentState,2,0,6);
      return Self
   }
   /// constructor TW3TagObj.Criar(htmlElement: String = 'div')
   ///  [line: 1073, column: 23, file: SmartCL.Components]
   ,Criar:function(Self, htmlElement) {
      TObject.Create(Self);
      $SetInc(Self.FComponentState,0,0,6);
      try {
         Self.FTagId = TW3TagObj.MakeElementTagId$(Self);
         Self.FHandle$3 = TW3TagObj.makeElementTagObj2(Self,htmlElement);
      } catch ($e) {
         var e$5 = $W($e);
         EW3TagObj.RaiseCntErrMethod("TW3TagObj.Criar",Self,e$5.FMessage)      }
      $SetInc(Self.FComponentState,1,0,6);
      if (TVariant.AsObject(Self.FHandle$3)!==TVariant.AsObject(document.body)) {
         if (Self.FTagId.length>0) {
            w3_setAttrib(Self.FHandle$3,"id",Self.FTagId);
         }
      }
      TW3TagObj.BeginUpdate(Self);
      try {
         TW3TagObj.InitializeObject$(Self);
      } finally {
         TW3TagObj.EndUpdate(Self);
      }
      setTimeout(function () {
         $SetExc(Self.FComponentState,1,0,6);
         $SetExc(Self.FComponentState,0,0,6);
      },100);
      $SetInc(Self.FComponentState,2,0,6);
      return Self
   }
   /// destructor TW3TagObj.Destroy()
   ///  [line: 1121, column: 22, file: SmartCL.Components]
   ,Destroy:function(Self) {
      $SetInc(Self.FComponentState,5,0,6);
      if (Self.FHandle$3) {
         try {
            TW3TagObj.UnHookEvents(Self);
            if (Self.FOwner$2) {
               TW3TagObj.RemoveFrom(Self);
            }
         } finally {
            TW3TagObj.FinalizeObject$(Self);
            Self.FTagId = "";
            Self.FHandle$3 = null;
         }
         TObject.Destroy(Self);
      }
      if (Self.FAccess) {
         TObject.Free(Self.FAccess);
      }
      TObject.Destroy(Self);
   }
   /// procedure TW3TagObj.EndUpdate()
   ///  [line: 1186, column: 21, file: SmartCL.Components]
   ,EndUpdate:function(Self) {
      if (Self.FUpdating>0) {
         --Self.FUpdating;
         if (!Self.FUpdating) {
            TW3TagObj.AfterUpdate$(Self);
         }
      }
   }
   /// procedure TW3TagObj.FinalizeObject()
   ///  [line: 1252, column: 21, file: SmartCL.Components]
   ,FinalizeObject:function(Self) {
      /* null */
   }
   /// function TW3TagObj.getAccess() : TW3AttrAccess
   ///  [line: 1291, column: 20, file: SmartCL.Components]
   ,getAccess:function(Self) {
      var Result = null;
      if (Self.FAccess===null) {
         Self.FAccess = TW3AttrAccess.Create$48($New(TW3AttrAccess),Self.FHandle$3);
      }
      Result = Self.FAccess;
      return Result
   }
   /// function TW3TagObj.GetInnerHTML() : String
   ///  [line: 1224, column: 20, file: SmartCL.Components]
   ,GetInnerHTML:function(Self) {
      var Result = "";
      if (Self.FHandle$3) {
         Result = ""+Self.FHandle$3.innerHTML;
      }
      return Result
   }
   /// function TW3TagObj.GetUpdating() : Boolean
   ///  [line: 1176, column: 20, file: SmartCL.Components]
   ,GetUpdating:function(Self) {
      return Self.FUpdating>0;
   }
   /// procedure TW3TagObj.InitializeObject()
   ///  [line: 1248, column: 21, file: SmartCL.Components]
   ,InitializeObject:function(Self) {
      /* null */
   }
   /// procedure TW3TagObj.InsertInto(const OwnerHandle: THandle)
   ///  [line: 1306, column: 21, file: SmartCL.Components]
   ,InsertInto:function(Self, OwnerHandle) {
      if (!OwnerHandle) {
         EW3TagObj.RaiseCntErrMethod("TW3TagObj.InsertInto",Self,$R[9]);
      }
      if (!Self.FHandle$3) {
         EW3TagObj.RaiseCntErrMethod("TW3TagObj.InsertInto",Self,$R[2]);
      }
      try {
         if (Self.FOwner$2) {
            TW3TagObj.RemoveFrom(Self);
         }
         if (OwnerHandle) {
            w3_setElementParentByRef(Self.FHandle$3,OwnerHandle);
         }
         Self.FOwner$2 = OwnerHandle;
      } catch ($e) {
         var e$6 = $W($e);
         EW3TagObj.RaiseCntErrMethod("TW3TagObj.InsertInto",Self,e$6.FMessage)      }
   }
   /// function TW3TagObj.MakeElementTagId() : String
   ///  [line: 1275, column: 20, file: SmartCL.Components]
   ,MakeElementTagId:function(Self) {
      return w3_GetUniqueObjId();
   }
   /// function TW3TagObj.MakeElementTagObj() : THandle
   ///  [line: 1280, column: 20, file: SmartCL.Components]
   ,MakeElementTagObj:function(Self) {
      return w3_createHtmlElement("div");
   }
   /// function TW3TagObj.makeElementTagObj2(htmlElement: String = 'div') : THandle
   ///  [line: 1285, column: 20, file: SmartCL.Components]
   ,makeElementTagObj2:function(Self, htmlElement$1) {
      return w3_createHtmlElement(htmlElement$1);
   }
   /// procedure TW3TagObj.RemoveFrom()
   ///  [line: 1330, column: 21, file: SmartCL.Components]
   ,RemoveFrom:function(Self) {
      if (!Self.FOwner$2) {
         EW3TagObj.RaiseCntErrMethod("TW3TagObj.RemoveFrom",Self,$R[9]);
      }
      if (!Self.FHandle$3) {
         EW3TagObj.RaiseCntErrMethod("TW3TagObj.RemoveFrom",Self,$R[2]);
      }
      try {
         w3_RemoveElementByRef(Self.FHandle$3,Self.FOwner$2);
         Self.FOwner$2 = undefined;
      } catch ($e) {
         var e$7 = $W($e);
         EW3TagObj.RaiseCntErrMethod("TW3TagObj.RemoveFrom",Self,e$7.FMessage)      }
   }
   /// procedure TW3TagObj.RemoveFromComponentState(const Flags: TComponentState)
   ///  [line: 1166, column: 21, file: SmartCL.Components]
   ,RemoveFromComponentState:function(Self, Flags$1) {
      if ($SetIn(Flags$1,0,0,6)) {
         $SetExc(Self.FComponentState,0,0,6);
      }
      if ($SetIn(Flags$1,1,0,6)) {
         $SetExc(Self.FComponentState,1,0,6);
      }
      if ($SetIn(Flags$1,2,0,6)) {
         $SetExc(Self.FComponentState,2,0,6);
      }
      if ($SetIn(Flags$1,3,0,6)) {
         $SetExc(Self.FComponentState,3,0,6);
      }
      if ($SetIn(Flags$1,4,0,6)) {
         $SetExc(Self.FComponentState,4,0,6);
      }
      if ($SetIn(Flags$1,5,0,6)) {
         $SetExc(Self.FComponentState,5,0,6);
      }
   }
   /// procedure TW3TagObj.SetInnerHTML(aValue: String)
   ///  [line: 1230, column: 21, file: SmartCL.Components]
   ,SetInnerHTML:function(Self, aValue$9) {
      Self.FHandle$3.innerHTML = aValue$9;
   }
   /// function TW3TagObj.Showing() : Boolean
   ///  [line: 1149, column: 20, file: SmartCL.Components]
   ,Showing:function(Self) {
      return ((Self.FHandle$3!=undefined)&&(Self.FHandle$3!=null))&&$SetIn(Self.FComponentState,2,0,6);
   }
   /// procedure TW3TagObj.StyleTagObject()
   ///  [line: 1256, column: 21, file: SmartCL.Components]
   ,StyleTagObject:function(Self) {
      Self.FHandle$3.style["visibility"] = "hidden";
      Self.FHandle$3.style["display"] = "none";
      Self.FHandle$3.style["position"] = "absolute";
      Self.FHandle$3.style["overflow"] = "hidden";
      Self.FHandle$3.style["left"] = "0px";
      Self.FHandle$3.style["top"] = "0px";
   }
   /// procedure TW3TagObj.UnHookEvents()
   ///  [line: 1200, column: 21, file: SmartCL.Components]
   ,UnHookEvents:function(Self) {
      Self.FHandle$3.onresize = null;
      Self.FHandle$3.onselectstart = null;
      Self.FHandle$3.onfocus = null;
      Self.FHandle$3.onblur = null;
      Self.FHandle$3.onchange = null;
      Self.FHandle$3.onmousedown = null;
      Self.FHandle$3.onmouseup = null;
      Self.FHandle$3.onmousemove = null;
      Self.FHandle$3.onmouseover = null;
      Self.FHandle$3.onmouseout = null;
      Self.FHandle$3.onclick = null;
      Self.FHandle$3.ondblclick = null;
      Self.FHandle$3.onkeydown = null;
      Self.FHandle$3.onkeyup = null;
      Self.FHandle$3.onkeypress = null;
      Self.FHandle$3.webkitAnimationStart = null;
      Self.FHandle$3.webkitAnimationEnd = null;
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,AfterUpdate$:function($){return $.ClassType.AfterUpdate($)}
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,MakeElementTagId$:function($){return $.ClassType.MakeElementTagId($)}
   ,MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)}
   ,Showing$:function($){return $.ClassType.Showing($)}
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
};
/// TW3ScrollInfo = class (TW3OwnedObject)
///  [line: 364, column: 3, file: SmartCL.Components]
var TW3ScrollInfo = {
   $ClassName:"TW3ScrollInfo",$Parent:TW3OwnedObject
   ,$Init:function ($) {
      TW3OwnedObject.$Init($);
   }
   /// function TW3ScrollInfo.AcceptParent(aObject: TObject) : Boolean
   ///  [line: 1632, column: 24, file: SmartCL.Components]
   ,AcceptParent:function(Self, aObject$1) {
      return (aObject$1!==null)&&$Is(aObject$1,TW3TagObj);
   }
   /// function TW3ScrollInfo.GetScrollHeight() : Integer
   ///  [line: 1679, column: 24, file: SmartCL.Components]
   ,GetScrollHeight:function(Self) {
      var Result = 0;
      var mRef$1 = undefined;
      mRef$1 = $As(Self.FOwner,TW3TagObj).FHandle$3;
      if (mRef$1) {
         Result = parseInt(mRef$1.scrollHeight,10);
      } else {
         EW3TagObj.RaiseCntErrMethod("TW3ScrollInfo.GetScrollHeight",Self,"invalid owner handle error");
      }
      return Result
   }
   /// function TW3ScrollInfo.GetScrollLeft() : Integer
   ///  [line: 1690, column: 24, file: SmartCL.Components]
   ,GetScrollLeft:function(Self) {
      var Result = 0;
      var mRef$2 = undefined;
      mRef$2 = $As(Self.FOwner,TW3TagObj).FHandle$3;
      if (mRef$2) {
         Result = parseInt(mRef$2.scrollLeft,10);
      } else {
         EW3TagObj.RaiseCntErrMethod("TW3ScrollInfo.GetScrollLeft",Self,"invalid owner handle error");
      }
      return Result
   }
   /// function TW3ScrollInfo.GetScrollTop() : Integer
   ///  [line: 1701, column: 24, file: SmartCL.Components]
   ,GetScrollTop:function(Self) {
      var Result = 0;
      var mRef$3 = undefined;
      mRef$3 = $As(Self.FOwner,TW3TagObj).FHandle$3;
      if (mRef$3) {
         Result = parseInt(mRef$3.scrollTop,10);
      } else {
         EW3TagObj.RaiseCntErrMethod("TW3ScrollInfo.GetScrollTop",Self,"invalid owner handle error");
      }
      return Result
   }
   /// function TW3ScrollInfo.GetScrollWidth() : Integer
   ///  [line: 1668, column: 24, file: SmartCL.Components]
   ,GetScrollWidth:function(Self) {
      var Result = 0;
      var mRef$4 = undefined;
      mRef$4 = $As(Self.FOwner,TW3TagObj).FHandle$3;
      if (mRef$4) {
         Result = parseInt(mRef$4.scrollWidth,10);
      } else {
         EW3TagObj.RaiseCntErrMethod("TW3ScrollInfo.GetScrollWidth",Self,"invalid owner handle error");
      }
      return Result
   }
   /// procedure TW3ScrollInfo.ScrollTo(aLeft: Integer; aTop: Integer)
   ///  [line: 1712, column: 25, file: SmartCL.Components]
   ,ScrollTo:function(Self, aLeft$1, aTop$1) {
      var mRef$5 = undefined;
      mRef$5 = $As(Self.FOwner,TW3TagObj).FHandle$3;
      if (mRef$5) {
         mRef$5.scrollLeft = aLeft$1;
         mRef$5.scrollTop = aTop$1;
      } else {
         EW3TagObj.RaiseCntErrMethod("TW3ScrollInfo.ScrollTo",Self,"invalid owner handle error");
      }
   }
   ,Destroy:TObject.Destroy
   ,AcceptParent$:function($){return $.ClassType.AcceptParent.apply($.ClassType, arguments)}
   ,Create$15:TW3OwnedObject.Create$15
};
/// TW3Component = class (TW3TagObj)
///  [line: 248, column: 3, file: SmartCL.Components]
var TW3Component = {
   $ClassName:"TW3Component",$Parent:TW3TagObj
   ,$Init:function ($) {
      TW3TagObj.$Init($);
      $.FChildren = [];
      $.FName$1 = "";
      $.FParent = null;
   }
   /// procedure TW3Component.CBNoBehavior()
   ///  [line: 1388, column: 24, file: SmartCL.Components]
   ,CBNoBehavior:function(Self) {
      if (event) {
         event.preventDefault();
      }
   }
   /// procedure TW3Component.ChildAdded(aChild: TW3Component)
   ///  [line: 1497, column: 24, file: SmartCL.Components]
   ,ChildAdded:function(Self, aChild) {
      /* null */
   }
   /// function TW3Component.ChildByName(const compName: String) : TW3Component
   ///  [line: 1395, column: 23, file: SmartCL.Components]
   ,ChildByName:function(Self, compName) {
      var Result = null;
      var lcName = "";
      var i$17 = 0;
      lcName = (Trim$_String_(compName)).toLowerCase();
      var $temp8;
      for(i$17=0,$temp8=TW3Component.GetChildCount(Self);i$17<$temp8;i$17++) {
         Result = TW3Component.GetChildObject(Self,i$17);
         if ((Result.FName$1).toLowerCase()==lcName) {
            return Result;
         }
      }
      Result = null;
      return Result
   }
   /// procedure TW3Component.ChildRemoved(aChild: TW3Component)
   ///  [line: 1501, column: 24, file: SmartCL.Components]
   ,ChildRemoved:function(Self, aChild$1) {
      /* null */
   }
   /// constructor TW3Component.Create(AOwner: TW3Component)
   ///  [line: 1354, column: 26, file: SmartCL.Components]
   ,Create$44:function(Self, AOwner$1) {
      Self.FParent = AOwner$1;
      TW3TagObj.Create$43(Self);
      if (Self.FParent!==null) {
         TW3Component.RegisterChild(Self.FParent,Self);
      }
      return Self
   }
   /// constructor TW3Component.Criar(AOwner: TW3Component; htmlElement: String = 'div')
   ///  [line: 1368, column: 26, file: SmartCL.Components]
   ,Criar$1:function(Self, AOwner$2, htmlElement$2) {
      Self.FParent = AOwner$2;
      TW3TagObj.Criar(Self,htmlElement$2);
      if (Self.FParent!==null) {
         TW3Component.RegisterChild(Self.FParent,Self);
      }
      return Self
   }
   /// procedure TW3Component.FinalizeObject()
   ///  [line: 1441, column: 24, file: SmartCL.Components]
   ,FinalizeObject:function(Self) {
      TW3Component.FreeChildren(Self);
      if (Self.FParent!==null) {
         TW3Component.UnRegisterChild(Self.FParent,Self);
      }
      Self.FChildren.length=0;
      TW3TagObj.FinalizeObject(Self);
   }
   /// procedure TW3Component.FreeChildren()
   ///  [line: 1471, column: 24, file: SmartCL.Components]
   ,FreeChildren:function(Self) {
      var oldCount = 0;
      try {
         while (Self.FChildren.length>0) {
            oldCount = Self.FChildren.length;
            TObject.Free(Self.FChildren[0]);
            if (oldCount==Self.FChildren.length) {
               Self.FChildren.shift();
            }
         }
      } finally {
         Self.FChildren.length=0;
      }
   }
   /// function TW3Component.GetChildCount() : Integer
   ///  [line: 1456, column: 23, file: SmartCL.Components]
   ,GetChildCount:function(Self) {
      return Self.FChildren.length;
   }
   /// function TW3Component.GetChildObject(index: Integer) : TW3Component
   ///  [line: 1461, column: 23, file: SmartCL.Components]
   ,GetChildObject:function(Self, index) {
      return Self.FChildren[index];
   }
   /// procedure TW3Component.InitializeObject()
   ///  [line: 1436, column: 24, file: SmartCL.Components]
   ,InitializeObject:function(Self) {
      TW3TagObj.InitializeObject(Self);
   }
   /// procedure TW3Component.RegisterChild(aChild: TW3Component)
   ///  [line: 1505, column: 24, file: SmartCL.Components]
   ,RegisterChild:function(Self, aChild$2) {
      if ((aChild$2!==null)&&(Self.FChildren.indexOf(aChild$2)<0)) {
         Self.FChildren.push(aChild$2);
         TW3TagObj.InsertInto(aChild$2,Self.FHandle$3);
         TW3Component.ChildAdded(Self,aChild$2);
      }
   }
   /// procedure TW3Component.SetName(Value: String)
   ///  [line: 1466, column: 24, file: SmartCL.Components]
   ,SetName:function(Self, Value) {
      Self.FName$1 = Value;
   }
   /// function TW3Component.Showing() : Boolean
   ///  [line: 1382, column: 23, file: SmartCL.Components]
   ,Showing:function(Self) {
      return TW3TagObj.Showing(Self)&&(Self.FParent!==null);
   }
   /// procedure TW3Component.UnRegisterChild(aChild: TW3Component)
   ///  [line: 1515, column: 24, file: SmartCL.Components]
   ,UnRegisterChild:function(Self, aChild$3) {
      var mIndex$2 = 0;
      if (aChild$3!==null) {
         mIndex$2 = Self.FChildren.indexOf(aChild$3);
         if (mIndex$2>=0) {
            Self.FChildren.splice(mIndex$2,1)
            ;
            TW3Component.ChildRemoved(Self,aChild$3);
         }
         TW3TagObj.RemoveFrom(aChild$3);
      }
   }
   ,Destroy:TW3TagObj.Destroy
   ,AfterUpdate:TW3TagObj.AfterUpdate
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing$:function($){return $.ClassType.Showing($)}
   ,StyleTagObject:TW3TagObj.StyleTagObject
   ,Create$44$:function($){return $.ClassType.Create$44.apply($.ClassType, arguments)}
   ,Criar$1$:function($){return $.ClassType.Criar$1.apply($.ClassType, arguments)}
};
/// TW3MovableControl = class (TW3Component)
///  [line: 229, column: 3, file: SmartCL.Effects]
var TW3MovableControl = {
   $ClassName:"TW3MovableControl",$Parent:TW3Component
   ,$Init:function ($) {
      TW3Component.$Init($);
      $.FAdjusted = $.FTransparent = $.FUseAlpha = false;
      $.FAlpha$1 = $.FSyncCount = 0;
      $.FBackground = $.FBorders = $.FConstraints = null;
      $.FColor = 0;
   }
   /// procedure TW3MovableControl.AdjustToParentBox()
   ///  [line: 1930, column: 29, file: SmartCL.Components]
   ,AdjustToParentBox:function(Self) {
      var x$41 = 0;
      var dx$3 = 0;
      var dy$3 = 0;
      var mChild = null;
      var mCtrl = null;
      if (Self.FHandle$3) {
         if (!Self.FAdjusted) {
            Self.FAdjusted = true;
            dx$3 = TW3Borders.GetHSpace(TW3MovableControl.GetBorder(Self));
            dy$3 = TW3Borders.GetVSpace(TW3MovableControl.GetBorder(Self));
            var $temp9;
            for(x$41=0,$temp9=TW3Component.GetChildCount(Self);x$41<$temp9;x$41++) {
               mChild = TW3Component.GetChildObject(Self,x$41);
               if ($Is(mChild,TW3MovableControl)) {
                  mCtrl = $As(mChild,TW3MovableControl);
                  if (TW3MovableControl.supportAdjustment$(mCtrl.ClassType)) {
                     if ((dx$3>0)||(dy$3>0)) {
                        TW3MovableControl.SetSize$4(mCtrl,TW3MovableControl.GetWidth$4(mCtrl)-dx$3,TW3MovableControl.GetHeight$4(mCtrl)-dy$3);
                     }
                     setTimeout($Event0(mCtrl,TW3MovableControl.AdjustToParentBox),1);
                  }
               }
            }
         }
      }
   }
   /// procedure TW3MovableControl.AfterUpdate()
   ///  [line: 2061, column: 29, file: SmartCL.Components]
   ,AfterUpdate:function(Self) {
      TW3TagObj.RemoveFromComponentState(Self,[24]);
   }
   /// function TW3MovableControl.ClientHeight() : Integer
   ///  [line: 1976, column: 28, file: SmartCL.Components]
   ,ClientHeight:function(Self) {
      var Result = 0;
      if (Self.FHandle$3) {
         if (Self.FHandle$3.clientHeight) {
            Result = TVariant.AsInteger(Self.FHandle$3.clientHeight);
            if (isNaN(Result)||(Result==0)) {
               Result = TW3MovableControl.GetWidth$4(Self);
            }
         } else {
            Result = TW3MovableControl.GetWidth$4(Self);
         }
      }
      return Result
   }
   /// function TW3MovableControl.ClientWidth() : Integer
   ///  [line: 1962, column: 28, file: SmartCL.Components]
   ,ClientWidth:function(Self) {
      var Result = 0;
      if (Self.FHandle$3) {
         if (Self.FHandle$3.clientWidth) {
            Result = TVariant.AsInteger(Self.FHandle$3.clientWidth);
            if (isNaN(Result)||(Result==0)) {
               Result = TW3MovableControl.GetWidth$4(Self);
            }
         } else {
            Result = TW3MovableControl.GetWidth$4(Self);
         }
      }
      return Result
   }
   /// function TW3MovableControl.DisplayMode() : String
   ///  [line: 2081, column: 34, file: SmartCL.Components]
   ,DisplayMode:function(Self) {
      return "inline-block";
   }
   /// procedure TW3MovableControl.FinalizeObject()
   ///  [line: 2033, column: 29, file: SmartCL.Components]
   ,FinalizeObject:function(Self) {
      if (Self.FBackground) {
         TObject.Free(Self.FBackground);
      }
      if (Self.FBorders) {
         TObject.Free(Self.FBorders);
      }
      if (Self.FConstraints) {
         TObject.Free(Self.FConstraints);
      }
      TW3Component.FinalizeObject(Self);
   }
   /// function TW3MovableControl.fxBusy() : Boolean
   ///  [line: 388, column: 28, file: SmartCL.Effects]
   ,fxBusy:function(Self) {
      var Result = false;
      if (TW3AttrAccess.Exists(TW3TagObj.getAccess(Self),"fxBusy")) {
         Result = TW3AttrAccess.Read(TW3TagObj.getAccess(Self),"fxBusy")=="yes";
      } else {
         Result = false;
      }
      return Result
   }
   /// procedure TW3MovableControl.fxFadeIn(const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 1000, column: 29, file: SmartCL.Effects]
   ,fxFadeIn$1:function(Self, Duration$1, OnFinished) {
      var mEffect = null;
      if (TW3MovableControl.fxBusy(Self)) {
         setTimeout(function () {
            TW3MovableControl.fxFadeIn$1(Self,Duration$1,OnFinished);
         },50);
      } else {
         BeforeEffect(Self,mEffect);
         mEffect = TW3CustomAnimation.Create$54$($New(TW3FadeAnimation));
         $As(mEffect,TW3FadeAnimation).FFrom = 0;
         $As(mEffect,TW3FadeAnimation).FTo = 1;
         TW3CustomAnimation.SetDuration(mEffect,Duration$1);
         mEffect.FOnEnds = function (Sender$3) {
            setTimeout(function () {
               TObject.Free($As(Sender$3,TW3CustomAnimation));
               AfterEffect(Self,$As(Sender$3,TW3CustomAnimation));
               if (OnFinished) {
                  OnFinished();
               }
            },100);
         };
         TW3MovableControl.SetVisible(Self,true);
         TW3CustomAnimation.Execute(mEffect,Self);
      }
   }
   /// procedure TW3MovableControl.fxFadeOut(const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 1047, column: 29, file: SmartCL.Effects]
   ,fxFadeOut$1:function(Self, Duration$2, OnFinished$1) {
      var mEffect$1 = null;
      if (TW3MovableControl.fxBusy(Self)) {
         setTimeout(function () {
            TW3MovableControl.fxFadeOut$1(Self,Duration$2,OnFinished$1);
         },50);
      } else {
         BeforeEffect(Self,mEffect$1);
         mEffect$1 = TW3CustomAnimation.Create$54$($New(TW3FadeAnimation));
         $As(mEffect$1,TW3FadeAnimation).FFrom = 1;
         $As(mEffect$1,TW3FadeAnimation).FTo = 0;
         TW3CustomAnimation.SetDuration(mEffect$1,Duration$2);
         mEffect$1.FOnEnds = function (Sender$4) {
            TW3MovableControl.SetVisible(Self,false);
            setTimeout(function () {
               TObject.Free($As(Sender$4,TW3CustomAnimation));
               AfterEffect(Self,$As(Sender$4,TW3CustomAnimation));
               if (OnFinished$1) {
                  OnFinished$1();
               }
            },100);
         };
         TW3CustomAnimation.Execute(mEffect$1,Self);
      }
   }
   /// procedure TW3MovableControl.fxMoveBy(const dx: Integer; const dy: Integer; const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 684, column: 29, file: SmartCL.Effects]
   ,fxMoveBy$1:function(Self, dx$4, dy$4, Duration$3, OnFinished$2) {
      var mEffect$2 = null;
      if (TW3MovableControl.fxBusy(Self)) {
         setTimeout(function () {
            TW3MovableControl.fxMoveBy$1(Self,dx$4,dy$4,Duration$3,OnFinished$2);
         },50);
      } else {
         BeforeEffect(Self,mEffect$2);
         mEffect$2 = TW3CustomAnimation.Create$54$($New(TW3MoveAnimation));
         TW3CustomAnimation.SetDuration(mEffect$2,Duration$3);
         $As(mEffect$2,TW3MoveAnimation).FFromX$1 = TW3MovableControl.GetLeft(Self);
         $As(mEffect$2,TW3MoveAnimation).FFromY$1 = TW3MovableControl.GetTop(Self);
         $As(mEffect$2,TW3MoveAnimation).FToX$1 = TW3MovableControl.GetLeft(Self)+dx$4;
         $As(mEffect$2,TW3MoveAnimation).FToY$1 = TW3MovableControl.GetTop(Self)+dy$4;
         $As(mEffect$2,TW3MoveAnimation).FTiming = 4;
         mEffect$2.FOnEnds = function (sender) {
            TW3MovableControl.SetLeft(Self,$As(sender,TW3MoveAnimation).FToX$1);
            TW3MovableControl.SetTop(Self,$As(sender,TW3MoveAnimation).FToY$1);
            setTimeout(function () {
               TObject.Free($As(sender,TW3CustomAnimation));
               AfterEffect(Self,$As(sender,TW3CustomAnimation));
               if (OnFinished$2) {
                  OnFinished$2();
               }
            },100);
         };
         TW3CustomAnimation.Execute(mEffect$2,Self);
      }
   }
   /// procedure TW3MovableControl.fxMoveDown(const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 632, column: 29, file: SmartCL.Effects]
   ,fxMoveDown$1:function(Self, Duration$4, OnFinished$3) {
      var mEffect$3 = null;
      if (TW3MovableControl.fxBusy(Self)) {
         setTimeout(function () {
            TW3MovableControl.fxMoveDown$1(Self,Duration$4,OnFinished$3);
         },50);
      } else {
         BeforeEffect(Self,mEffect$3);
         mEffect$3 = TW3CustomAnimation.Create$54$($New(TW3MoveAnimation));
         TW3CustomAnimation.SetDuration(mEffect$3,Duration$4);
         $As(mEffect$3,TW3MoveAnimation).FFromX$1 = TW3MovableControl.GetLeft(Self);
         $As(mEffect$3,TW3MoveAnimation).FFromY$1 = TW3MovableControl.GetTop(Self);
         $As(mEffect$3,TW3MoveAnimation).FToX$1 = TW3MovableControl.GetLeft(Self);
         $As(mEffect$3,TW3MoveAnimation).FToY$1 = TW3MovableControl.GetHeight$4($As(Self.FParent,TW3MovableControl))-TW3MovableControl.GetHeight$4(Self);
         $As(mEffect$3,TW3MoveAnimation).FTiming = 4;
         mEffect$3.FOnEnds = function (sender$1) {
            TW3MovableControl.SetTop(Self,(TW3MovableControl.GetHeight$4($As(Self.FParent,TW3MovableControl))-TW3MovableControl.GetHeight$4(Self)));
            setTimeout(function () {
               TObject.Free($As(sender$1,TW3CustomAnimation));
               AfterEffect(Self,$As(sender$1,TW3CustomAnimation));
               if (OnFinished$3) {
                  OnFinished$3();
               }
            },100);
         };
         TW3CustomAnimation.Execute(mEffect$3,Self);
      }
   }
   /// procedure TW3MovableControl.fxMoveTo(const dx: Integer; const dy: Integer; const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 787, column: 29, file: SmartCL.Effects]
   ,fxMoveTo$1:function(Self, dx$5, dy$5, Duration$5, OnFinished$4) {
      var mEffect$4 = null;
      if (TW3MovableControl.fxBusy(Self)) {
         setTimeout(function () {
            TW3MovableControl.fxMoveTo$1(Self,dx$5,dy$5,Duration$5,OnFinished$4);
         },50);
      } else {
         BeforeEffect(Self,mEffect$4);
         mEffect$4 = TW3CustomAnimation.Create$54$($New(TW3MoveAnimation));
         TW3CustomAnimation.SetDuration(mEffect$4,Duration$5);
         $As(mEffect$4,TW3MoveAnimation).FFromX$1 = TW3MovableControl.GetLeft(Self);
         $As(mEffect$4,TW3MoveAnimation).FFromY$1 = TW3MovableControl.GetTop(Self);
         $As(mEffect$4,TW3MoveAnimation).FToX$1 = dx$5;
         $As(mEffect$4,TW3MoveAnimation).FToY$1 = dy$5;
         $As(mEffect$4,TW3MoveAnimation).FTiming = 1;
         mEffect$4.FOnEnds = function (sender$2) {
            TW3MovableControl.SetLeft(Self,dx$5);
            TW3MovableControl.SetTop(Self,dy$5);
            setTimeout(function () {
               TObject.Free($As(sender$2,TW3CustomAnimation));
               AfterEffect(Self,$As(sender$2,TW3CustomAnimation));
               if (OnFinished$4) {
                  OnFinished$4();
               }
            },100);
         };
         TW3CustomAnimation.Execute(mEffect$4,Self);
      }
   }
   /// procedure TW3MovableControl.fxMoveUp(const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 591, column: 29, file: SmartCL.Effects]
   ,fxMoveUp$1:function(Self, Duration$6, OnFinished$5) {
      var mEffect$5 = null;
      if (TW3MovableControl.fxBusy(Self)) {
         setTimeout(function () {
            TW3MovableControl.fxMoveUp$1(Self,Duration$6,OnFinished$5);
         },50);
      } else {
         BeforeEffect(Self,mEffect$5);
         mEffect$5 = TW3CustomAnimation.Create$54$($New(TW3MoveAnimation));
         TW3CustomAnimation.SetDuration(mEffect$5,Duration$6);
         $As(mEffect$5,TW3MoveAnimation).FFromX$1 = TW3MovableControl.GetLeft(Self);
         $As(mEffect$5,TW3MoveAnimation).FFromY$1 = TW3MovableControl.GetTop(Self);
         $As(mEffect$5,TW3MoveAnimation).FToX$1 = TW3MovableControl.GetLeft(Self);
         $As(mEffect$5,TW3MoveAnimation).FToY$1 = 0;
         $As(mEffect$5,TW3MoveAnimation).FTiming = 4;
         mEffect$5.FOnEnds = function (sender$3) {
            TW3MovableControl.SetTop(Self,0);
            setTimeout(function () {
               TObject.Free($As(sender$3,TW3CustomAnimation));
               AfterEffect(Self,$As(sender$3,TW3CustomAnimation));
               if (OnFinished$5) {
                  OnFinished$5();
               }
            },100);
         };
         TW3CustomAnimation.Execute(mEffect$5,Self);
      }
   }
   /// procedure TW3MovableControl.fxScaleDown(aFactor: Integer; const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 472, column: 29, file: SmartCL.Effects]
   ,fxScaleDown$1:function(Self, aFactor, Duration$7, OnFinished$6) {
      var mEffect$6 = null;
      if (TW3MovableControl.fxBusy(Self)) {
         setTimeout(function () {
            TW3MovableControl.fxScaleDown$1(Self,aFactor,Duration$7,OnFinished$6);
         },50);
      } else {
         BeforeEffect(Self,mEffect$6);
         mEffect$6 = TW3CustomAnimation.Create$54$($New(TW3SizeAnimation));
         TW3CustomAnimation.SetDuration(mEffect$6,Duration$7);
         $As(mEffect$6,TW3SizeAnimation).FFromX = TW3MovableControl.GetLeft(Self);
         $As(mEffect$6,TW3SizeAnimation).FFromY = TW3MovableControl.GetTop(Self);
         $As(mEffect$6,TW3SizeAnimation).FFromWidth = TW3MovableControl.GetWidth$4(Self);
         $As(mEffect$6,TW3SizeAnimation).FFromHeight = TW3MovableControl.GetHeight$4(Self);
         aFactor = TInteger.EnsureRange(aFactor,1,2147483647);
         $As(mEffect$6,TW3SizeAnimation).FToX = TW3MovableControl.GetLeft(Self)+aFactor;
         $As(mEffect$6,TW3SizeAnimation).FToY = TW3MovableControl.GetTop(Self)+aFactor;
         $As(mEffect$6,TW3SizeAnimation).FToWidth = TW3MovableControl.GetWidth$4(Self)-(aFactor*2);
         $As(mEffect$6,TW3SizeAnimation).FToHeight = TW3MovableControl.GetHeight$4(Self)-(aFactor*2);
         $As(mEffect$6,TW3SizeAnimation).FTiming = 4;
         mEffect$6.FOnEnds = function (sender$4) {
            TW3MovableControl.SetBounds$2(Self,$As(mEffect$6,TW3SizeAnimation).FToX,$As(mEffect$6,TW3SizeAnimation).FToY,$As(mEffect$6,TW3SizeAnimation).FToWidth,$As(mEffect$6,TW3SizeAnimation).FToHeight);
            setTimeout(function () {
               TObject.Free($As(sender$4,TW3CustomAnimation));
               AfterEffect(Self,$As(sender$4,TW3CustomAnimation));
               if (OnFinished$6) {
                  OnFinished$6();
               }
            },100);
         };
         TW3CustomAnimation.Execute(mEffect$6,Self);
      }
   }
   /// procedure TW3MovableControl.fxScaleTo(const aToX: Integer; const aToY: Integer; const aToWidth: Integer; const aToHeight: Integer; const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 733, column: 29, file: SmartCL.Effects]
   ,fxScaleTo$1:function(Self, aToX, aToY, aToWidth, aToHeight, Duration$8, OnFinished$7) {
      var mEffect$7 = null;
      if (TW3MovableControl.fxBusy(Self)) {
         setTimeout(function () {
            TW3MovableControl.fxScaleTo$1(Self,aToX,aToY,aToWidth,aToHeight,Duration$8,OnFinished$7);
         },50);
      } else {
         BeforeEffect(Self,mEffect$7);
         mEffect$7 = TW3CustomAnimation.Create$54$($New(TW3SizeAnimation));
         TW3CustomAnimation.SetDuration(mEffect$7,Duration$8);
         $As(mEffect$7,TW3SizeAnimation).FFromX = TW3MovableControl.GetLeft(Self);
         $As(mEffect$7,TW3SizeAnimation).FFromY = TW3MovableControl.GetTop(Self);
         $As(mEffect$7,TW3SizeAnimation).FFromWidth = TW3MovableControl.GetWidth$4(Self);
         $As(mEffect$7,TW3SizeAnimation).FFromHeight = TW3MovableControl.GetHeight$4(Self);
         $As(mEffect$7,TW3SizeAnimation).FToX = aToX;
         $As(mEffect$7,TW3SizeAnimation).FToY = aToY;
         $As(mEffect$7,TW3SizeAnimation).FToWidth = aToWidth;
         $As(mEffect$7,TW3SizeAnimation).FToHeight = aToHeight;
         $As(mEffect$7,TW3SizeAnimation).FTiming = 4;
         mEffect$7.FOnEnds = function (sender$5) {
            TW3MovableControl.SetBounds$2(Self,aToX,aToY,aToWidth,aToHeight);
            setTimeout(function () {
               TObject.Free($As(sender$5,TW3CustomAnimation));
               AfterEffect(Self,$As(sender$5,TW3CustomAnimation));
               if (OnFinished$7) {
                  OnFinished$7();
               }
            },100);
         };
         TW3CustomAnimation.Execute(mEffect$7,Self);
      }
   }
   /// procedure TW3MovableControl.fxScaleUp(aFactor: Integer; const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 409, column: 29, file: SmartCL.Effects]
   ,fxScaleUp$1:function(Self, aFactor$1, Duration$9, OnFinished$8) {
      var mEffect$8 = null;
      if (TW3MovableControl.fxBusy(Self)) {
         setTimeout(function () {
            TW3MovableControl.fxScaleUp$1(Self,aFactor$1,Duration$9,OnFinished$8);
         },50);
      } else {
         BeforeEffect(Self,mEffect$8);
         mEffect$8 = TW3CustomAnimation.Create$54$($New(TW3SizeAnimation));
         TW3CustomAnimation.SetDuration(mEffect$8,Duration$9);
         aFactor$1 = TInteger.EnsureRange(aFactor$1,1,2147483647);
         $As(mEffect$8,TW3SizeAnimation).FFromX = TW3MovableControl.GetLeft(Self);
         $As(mEffect$8,TW3SizeAnimation).FFromY = TW3MovableControl.GetTop(Self);
         $As(mEffect$8,TW3SizeAnimation).FFromWidth = TW3MovableControl.GetWidth$4(Self);
         $As(mEffect$8,TW3SizeAnimation).FFromHeight = TW3MovableControl.GetHeight$4(Self);
         $As(mEffect$8,TW3SizeAnimation).FToX = TW3MovableControl.GetLeft(Self)-aFactor$1;
         $As(mEffect$8,TW3SizeAnimation).FToY = TW3MovableControl.GetTop(Self)-aFactor$1;
         $As(mEffect$8,TW3SizeAnimation).FToWidth = TW3MovableControl.GetWidth$4(Self)+(aFactor$1*2);
         $As(mEffect$8,TW3SizeAnimation).FToHeight = TW3MovableControl.GetHeight$4(Self)+(aFactor$1*2);
         $As(mEffect$8,TW3SizeAnimation).FTiming = 4;
         mEffect$8.FOnEnds = function (sender$6) {
            TW3MovableControl.SetBounds$2(Self,$As(mEffect$8,TW3SizeAnimation).FToX,$As(mEffect$8,TW3SizeAnimation).FToY,$As(mEffect$8,TW3SizeAnimation).FToWidth,$As(mEffect$8,TW3SizeAnimation).FToHeight);
            setTimeout(function () {
               TObject.Free($As(sender$6,TW3CustomAnimation));
               AfterEffect(Self,$As(sender$6,TW3CustomAnimation));
               if (OnFinished$8) {
                  OnFinished$8();
               }
            },100);
         };
         TW3CustomAnimation.Execute(mEffect$8,Self);
      }
   }
   /// procedure TW3MovableControl.fxSetBusy(const aValue: Boolean)
   ///  [line: 395, column: 29, file: SmartCL.Effects]
   ,fxSetBusy:function(Self, aValue$10) {
      if (aValue$10) {
         TW3AttrAccess.Write(TW3TagObj.getAccess(Self),"fxBusy","yes");
      } else {
         TW3AttrAccess.Write(TW3TagObj.getAccess(Self),"fxBusy","no");
      }
   }
   /// procedure TW3MovableControl.fxSizeTo(const aWidth: Integer; const aHeight: Integer; const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 530, column: 29, file: SmartCL.Effects]
   ,fxSizeTo$1:function(Self, aWidth, aHeight, Duration$10, OnFinished$9) {
      var mEffect$9 = null;
      if (TW3MovableControl.fxBusy(Self)) {
         setTimeout(function () {
            TW3MovableControl.fxSizeTo$1(Self,aWidth,aHeight,Duration$10,OnFinished$9);
         },50);
      } else {
         BeforeEffect(Self,mEffect$9);
         mEffect$9 = TW3CustomAnimation.Create$54$($New(TW3SizeAnimation));
         TW3CustomAnimation.SetDuration(mEffect$9,Duration$10);
         $As(mEffect$9,TW3SizeAnimation).FFromX = TW3MovableControl.GetLeft(Self);
         $As(mEffect$9,TW3SizeAnimation).FFromY = TW3MovableControl.GetTop(Self);
         $As(mEffect$9,TW3SizeAnimation).FFromWidth = TW3MovableControl.GetWidth$4(Self);
         $As(mEffect$9,TW3SizeAnimation).FFromHeight = TW3MovableControl.GetHeight$4(Self);
         $As(mEffect$9,TW3SizeAnimation).FToX = TW3MovableControl.GetLeft(Self);
         $As(mEffect$9,TW3SizeAnimation).FToY = TW3MovableControl.GetTop(Self);
         $As(mEffect$9,TW3SizeAnimation).FToWidth = aWidth;
         $As(mEffect$9,TW3SizeAnimation).FToHeight = aHeight;
         $As(mEffect$9,TW3SizeAnimation).FTiming = 4;
         mEffect$9.FOnEnds = function (sender$7) {
            TW3MovableControl.SetBounds$2(Self,$As(mEffect$9,TW3SizeAnimation).FToX,$As(mEffect$9,TW3SizeAnimation).FToY,$As(mEffect$9,TW3SizeAnimation).FToWidth,$As(mEffect$9,TW3SizeAnimation).FToHeight);
            setTimeout(function () {
               TObject.Free($As(sender$7,TW3CustomAnimation));
               AfterEffect(Self,$As(sender$7,TW3CustomAnimation));
               if (OnFinished$9) {
                  OnFinished$9();
               }
            },100);
         };
         TW3CustomAnimation.Execute(mEffect$9,Self);
      }
   }
   /// procedure TW3MovableControl.fxWarpIn(const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 959, column: 29, file: SmartCL.Effects]
   ,fxWarpIn$1:function(Self, Duration$11, OnFinished$10) {
      var mEffect$10 = null;
      if (TW3MovableControl.fxBusy(Self)) {
         setTimeout(function () {
            TW3MovableControl.fxWarpIn$1(Self,Duration$11,OnFinished$10);
         },50);
      } else {
         BeforeEffect(Self,mEffect$10);
         mEffect$10 = TW3CustomAnimation.Create$54$($New(TW3WarpInTransition));
         TW3CustomAnimation.SetDuration(mEffect$10,Duration$11);
         mEffect$10.FOnEnds = function (Sender$5) {
            setTimeout(function () {
               TObject.Free($As(Sender$5,TW3CustomAnimation));
               AfterEffect(Self,$As(Sender$5,TW3CustomAnimation));
               if (OnFinished$10) {
                  OnFinished$10();
               }
            },100);
         };
         TW3MovableControl.SetVisible(Self,true);
         TW3CustomAnimation.Execute(mEffect$10,Self);
      }
   }
   /// procedure TW3MovableControl.fxWarpOut(const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 918, column: 29, file: SmartCL.Effects]
   ,fxWarpOut$1:function(Self, Duration$12, OnFinished$11) {
      var mEffect$11 = null;
      if (TW3MovableControl.fxBusy(Self)) {
         setTimeout(function () {
            TW3MovableControl.fxWarpOut$1(Self,Duration$12,OnFinished$11);
         },50);
      } else {
         BeforeEffect(Self,mEffect$11);
         mEffect$11 = TW3CustomAnimation.Create$54$($New(TW3WarpOutTransition));
         TW3CustomAnimation.SetDuration(mEffect$11,Duration$12);
         mEffect$11.FOnEnds = function (Sender$6) {
            TW3MovableControl.SetVisible(Self,false);
            setTimeout(function () {
               TObject.Free($As(Sender$6,TW3CustomAnimation));
               AfterEffect(Self,$As(Sender$6,TW3CustomAnimation));
               if (OnFinished$11) {
                  OnFinished$11();
               }
            },100);
         };
         TW3CustomAnimation.Execute(mEffect$11,Self);
      }
   }
   /// procedure TW3MovableControl.fxZoomIn(const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 836, column: 29, file: SmartCL.Effects]
   ,fxZoomIn$1:function(Self, Duration$13, OnFinished$12) {
      var mEffect$12 = null;
      if (TW3MovableControl.fxBusy(Self)) {
         setTimeout(function () {
            TW3MovableControl.fxZoomIn$1(Self,Duration$13,OnFinished$12);
         },50);
      } else {
         BeforeEffect(Self,mEffect$12);
         mEffect$12 = TW3CustomAnimation.Create$54$($New(TW3ZoomInTransition));
         TW3CustomAnimation.SetDuration(mEffect$12,Duration$13);
         mEffect$12.FOnEnds = function (Sender$7) {
            setTimeout(function () {
               TObject.Free($As(Sender$7,TW3CustomAnimation));
               AfterEffect(Self,$As(Sender$7,TW3CustomAnimation));
               if (OnFinished$12) {
                  OnFinished$12();
               }
            },100);
         };
         TW3MovableControl.SetVisible(Self,true);
         TW3CustomAnimation.Execute(mEffect$12,Self);
      }
   }
   /// procedure TW3MovableControl.fxZoomOut(const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 877, column: 29, file: SmartCL.Effects]
   ,fxZoomOut$1:function(Self, Duration$14, OnFinished$13) {
      var mEffect$13 = null;
      if (TW3MovableControl.fxBusy(Self)) {
         setTimeout(function () {
            TW3MovableControl.fxZoomOut$1(Self,Duration$14,OnFinished$13);
         },50);
      } else {
         BeforeEffect(Self,mEffect$13);
         mEffect$13 = TW3CustomAnimation.Create$54$($New(TW3ZoomOutTransition));
         TW3CustomAnimation.SetDuration(mEffect$13,Duration$14);
         mEffect$13.FOnEnds = function (Sender$8) {
            TW3MovableControl.SetVisible(Self,false);
            setTimeout(function () {
               TObject.Free($As(Sender$8,TW3CustomAnimation));
               AfterEffect(Self,$As(Sender$8,TW3CustomAnimation));
               if (OnFinished$13) {
                  OnFinished$13();
               }
            },100);
         };
         TW3CustomAnimation.Execute(mEffect$13,Self);
      }
   }
   /// function TW3MovableControl.GetBorder() : TW3Borders
   ///  [line: 2054, column: 28, file: SmartCL.Components]
   ,GetBorder:function(Self) {
      var Result = null;
      if (Self.FBorders===null) {
         Self.FBorders = TW3OwnedObject.Create$15$($New(TW3Borders),Self);
      }
      Result = Self.FBorders;
      return Result
   }
   /// function TW3MovableControl.GetBoundsRect() : TRect
   ///  [line: 2107, column: 28, file: SmartCL.Components]
   ,GetBoundsRect:function(Self) {
      var Result = {Bottom$1:0,Left$1:0,Right$1:0,Top$1:0};
      Result.Left$1 = w3_getStyleAsInt(Self.FHandle$3,"left");
      Result.Top$1 = w3_getStyleAsInt(Self.FHandle$3,"top");
      if (Self.FHandle$3) {
         Result.Right$1 = parseInt((Result.Left$1+Self.FHandle$3.offsetWidth),10);
         Result.Bottom$1 = parseInt((Result.Top$1+Self.FHandle$3.offsetHeight),10);
      } else {
         Result.Right$1 = Result.Left$1;
         Result.Bottom$1 = Result.Top$1;
      }
      return Result
   }
   /// function TW3MovableControl.GetHeight() : Integer
   ///  [line: 2228, column: 28, file: SmartCL.Components]
   ,GetHeight$4:function(Self) {
      var Result = 0;
      if (Self.FHandle$3) {
         Result = parseInt(Self.FHandle$3.offsetHeight,10);
      }
      return Result
   }
   /// function TW3MovableControl.GetLeft() : Integer
   ///  [line: 2124, column: 28, file: SmartCL.Components]
   ,GetLeft:function(Self) {
      var Result = 0;
      var mObj$4 = undefined;
      var mData$3;
      var tagRef$11 = undefined;
      tagRef$11 = Self.FHandle$3;
      
    mObj$4   = document.defaultView.getComputedStyle(tagRef$11,null);

    if (mObj$4)
      mData$3 = (mObj$4).getPropertyValue('left');

    if (mData$3)
    {
      if (typeof(mData$3) === "number")
      {
        Result = mData$3;
      } else {
        if (typeof(mData$3) === "string")
        {
          mData$3 = parseInt(mData$3);
          if (typeof(mData$3) === "number")
          Result = mData$3;
        }
      }
    }
  return Result
   }
   /// function TW3MovableControl.GetTop() : Integer
   ///  [line: 2165, column: 28, file: SmartCL.Components]
   ,GetTop:function(Self) {
      var Result = 0;
      var mObj$5 = undefined;
      var mData$4;
      var tagRef$12 = undefined;
      tagRef$12 = Self.FHandle$3;
      
    mObj$5   = document.defaultView.getComputedStyle(tagRef$12,null);

    if (mObj$5)
      mData$4 = (mObj$5).getPropertyValue('top');

    if (mData$4)
    {
      if (typeof(mData$4) === "number")
      {
        Result = mData$4;
      } else {
        if (typeof(mData$4) === "string")
        {
          mData$4 = parseInt(mData$4);
          if (typeof(mData$4) === "number")
          Result = mData$4;
        }
      }
    }
  return Result
   }
   /// function TW3MovableControl.GetVisible() : Boolean
   ///  [line: 2073, column: 28, file: SmartCL.Components]
   ,GetVisible:function(Self) {
      var Result = false;
      var mValue = "";
      mValue = w3_getStyleAsStr(Self.FHandle$3,"visibility");
      Result = (mValue).toLocaleLowerCase()=="visible";
      return Result
   }
   /// function TW3MovableControl.GetWidth() : Integer
   ///  [line: 2206, column: 28, file: SmartCL.Components]
   ,GetWidth$4:function(Self) {
      var Result = 0;
      if (Self.FHandle$3) {
         Result = parseInt(Self.FHandle$3.offsetWidth,10);
      }
      return Result
   }
   /// procedure TW3MovableControl.InitializeObject()
   ///  [line: 1808, column: 29, file: SmartCL.Components]
   ,InitializeObject:function(Self) {
      TW3Component.InitializeObject(Self);
      Self.FAlpha$1 = 255;
      Self.FColor = 536870911;
      Self.FTransparent = false;
      if (Self.FParent) {
         TW3MovableControl.ReadySync(Self);
      } else {
         TW3MovableControl.ObjectReady(Self);
      }
   }
   /// procedure TW3MovableControl.Moved()
   ///  [line: 2276, column: 29, file: SmartCL.Components]
   ,Moved:function(Self) {
      /* null */
   }
   /// procedure TW3MovableControl.MoveTo(aLeft: Integer; aTop: Integer)
   ///  [line: 2284, column: 29, file: SmartCL.Components]
   ,MoveTo$1:function(Self, aLeft$2, aTop$2) {
      TW3TagObj.BeginUpdate(Self);
      Self.FHandle$3.style["left"] = TInteger.ToPxStr(aLeft$2);
      Self.FHandle$3.style["top"] = TInteger.ToPxStr(aTop$2);
      TW3TagObj.AddToComponentState(Self,[16]);
      TW3TagObj.EndUpdate(Self);
   }
   /// procedure TW3MovableControl.ObjectReady()
   ///  [line: 1863, column: 29, file: SmartCL.Components]
   ,ObjectReady:function(Self) {
      TW3TagObj.AddToComponentState(Self,[4]);
      if (TW3MovableControl.GetVisible(Self)) {
         TW3MovableControl.Resize$(Self);
      }
   }
   /// procedure TW3MovableControl.ReadySync()
   ///  [line: 1839, column: 29, file: SmartCL.Components]
   ,ReadySync:function(Self) {
      if (((Self.FHandle$3&&TControlHandleHelper$Ready$1(Self.FHandle$3))&&(!$SetIn(Self.FComponentState,0,0,6)))&&(!$SetIn(Self.FComponentState,1,0,6))) {
         TW3MovableControl.ObjectReady(Self);
      } else {
         ++Self.FSyncCount;
         if (Self.FSyncCount>600) {
            TW3MovableControl.ObjectReady(Self);
            return;
         }
         w3_RequestAnimationFrame($Event0(Self,TW3MovableControl.ReadySync));
      }
   }
   /// procedure TW3MovableControl.Resize()
   ///  [line: 2280, column: 29, file: SmartCL.Components]
   ,Resize:function(Self) {
      /* null */
   }
   /// function TW3MovableControl.ScreenRect() : TRect
   ///  [line: 1996, column: 28, file: SmartCL.Components]
   ,ScreenRect:function(Self) {
      var Result = {Bottom$1:0,Left$1:0,Right$1:0,Top$1:0};
      var elem = undefined;
      if (Self.FHandle$3) {
         elem = Self.FHandle$3;
         while (1) {
            Result.Left$1+=parseInt(elem.offsetLeft,10);
            Result.Top$1+=parseInt(elem.offsetTop,10);
            elem = elem.offsetParent;
            if (elem) {
               Result.Left$1-=parseInt(elem.scrollLeft,10);
               Result.Top$1-=parseInt(elem.scrollTop,10);
            } else {
               break;
            }
         }
         Result.Right$1 = parseInt((Result.Left$1+Self.FHandle$3.offsetWidth),10);
         Result.Bottom$1 = parseInt((Result.Top$1+Self.FHandle$3.offsetHeight),10);
      }
      return Result
   }
   /// procedure TW3MovableControl.SetAlpha(const aValue: Integer)
   ///  [line: 2366, column: 29, file: SmartCL.Components]
   ,SetAlpha:function(Self, aValue$11) {
      Self.FAlpha$1 = ClampInt(aValue$11,0,255);
      if (Self.FUseAlpha) {
         Self.FHandle$3.style["opacity"] = Self.FAlpha$1*0.01;
      }
   }
   /// procedure TW3MovableControl.SetBounds(aLeft: Integer; aTop: Integer; aWidth: Integer; aHeight: Integer)
   ///  [line: 2293, column: 29, file: SmartCL.Components]
   ,SetBounds$2:function(Self, aLeft$3, aTop$3, aWidth$1, aHeight$1) {
      var mSized = false;
      var mMoved = false;
      aWidth$1 = Math.max(0,aWidth$1);
      aHeight$1 = Math.max(0,aHeight$1);
      mMoved = (aLeft$3!=TW3MovableControl.GetLeft(Self))||(aTop$3!=TW3MovableControl.GetTop(Self));
      mSized = (aWidth$1!=Self.FHandle$3.offsetWidth)||(aHeight$1!=Self.FHandle$3.offsetHeight);
      if ($SetIn(Self.FComponentState,2,0,6)) {
         TW3TagObj.BeginUpdate(Self);
         Self.FHandle$3.style["left"] = aLeft$3.toString()+"px";
         Self.FHandle$3.style["top"] = aTop$3.toString()+"px";
         Self.FHandle$3.style["width"] = aWidth$1.toString()+"px";
         Self.FHandle$3.style["height"] = aHeight$1.toString()+"px";
         if (mMoved) {
            TW3TagObj.AddToComponentState(Self,[16]);
         }
         if (mSized) {
            TW3TagObj.AddToComponentState(Self,[8]);
         }
         TW3TagObj.EndUpdate(Self);
      } else {
         Self.FHandle$3.style["left"] = aLeft$3.toString()+"px";
         Self.FHandle$3.style["top"] = aTop$3.toString()+"px";
         Self.FHandle$3.style["width"] = aWidth$1.toString()+"px";
         Self.FHandle$3.style["height"] = aHeight$1.toString()+"px";
      }
   }
   /// procedure TW3MovableControl.SetColor(const aValue: TColor)
   ///  [line: 2391, column: 29, file: SmartCL.Components]
   ,SetColor$1:function(Self, aValue$12) {
      var mText = "";
      if (aValue$12!=Self.FColor) {
         Self.FColor = aValue$12;
         mText = ColorToWebStr(Self.FColor,(Self.FTransparent)?0:255);
         Self.FHandle$3.style["backgroundColor"] = mText;
      }
   }
   /// procedure TW3MovableControl.SetHeight(aValue: Integer)
   ///  [line: 2234, column: 29, file: SmartCL.Components]
   ,SetHeight:function(Self, aValue$13) {
      aValue$13 = Math.max(aValue$13,0);
      if (aValue$13!=TW3MovableControl.GetHeight$4(Self)) {
         if ($SetIn(Self.FComponentState,2,0,6)) {
            TW3TagObj.BeginUpdate(Self);
            Self.FHandle$3.style["height"] = TInteger.ToPxStr(aValue$13);
            TW3TagObj.AddToComponentState(Self,[8]);
            TW3TagObj.EndUpdate(Self);
         } else {
            Self.FHandle$3.style["height"] = TInteger.ToPxStr(aValue$13);
         }
      }
   }
   /// procedure TW3MovableControl.SetLeft(const aValue: Integer)
   ///  [line: 2153, column: 29, file: SmartCL.Components]
   ,SetLeft:function(Self, aValue$14) {
      if ($SetIn(Self.FComponentState,2,0,6)) {
         TW3TagObj.BeginUpdate(Self);
         Self.FHandle$3.style["left"] = TInteger.ToPxStr(aValue$14);
         TW3TagObj.AddToComponentState(Self,[16]);
         TW3TagObj.EndUpdate(Self);
      } else {
         Self.FHandle$3.style["left"] = TInteger.ToPxStr(aValue$14);
      }
   }
   /// procedure TW3MovableControl.SetSize(aWidth: Integer; aHeight: Integer)
   ///  [line: 2331, column: 29, file: SmartCL.Components]
   ,SetSize$4:function(Self, aWidth$2, aHeight$2) {
      aWidth$2 = Math.max(aWidth$2,0);
      aHeight$2 = Math.max(aHeight$2,0);
      if ((aWidth$2!=Self.FHandle$3.offsetWidth)||(aHeight$2!=Self.FHandle$3.offsetHeight)) {
         if ($SetIn(Self.FComponentState,2,0,6)) {
            TW3TagObj.BeginUpdate(Self);
            Self.FHandle$3.style["width"] = aWidth$2.toString()+"px";
            Self.FHandle$3.style["height"] = aHeight$2.toString()+"px";
            TW3TagObj.AddToComponentState(Self,[8]);
            TW3TagObj.EndUpdate(Self);
         } else {
            Self.FHandle$3.style["width"] = aWidth$2.toString()+"px";
            Self.FHandle$3.style["height"] = aHeight$2.toString()+"px";
         }
      }
   }
   /// procedure TW3MovableControl.SetTop(const aValue: Integer)
   ///  [line: 2194, column: 29, file: SmartCL.Components]
   ,SetTop:function(Self, aValue$15) {
      if ($SetIn(Self.FComponentState,2,0,6)) {
         TW3TagObj.BeginUpdate(Self);
         Self.FHandle$3.style["top"] = TInteger.ToPxStr(aValue$15);
         TW3TagObj.AddToComponentState(Self,[16]);
         TW3TagObj.EndUpdate(Self);
      } else {
         Self.FHandle$3.style["top"] = TInteger.ToPxStr(aValue$15);
      }
   }
   /// procedure TW3MovableControl.SetTransparent(const aValue: Boolean)
   ///  [line: 2376, column: 29, file: SmartCL.Components]
   ,SetTransparent:function(Self, aValue$16) {
      var mText$1 = "";
      if (aValue$16!=Self.FTransparent) {
         TW3TagObj.BeginUpdate(Self);
         Self.FTransparent = aValue$16;
         mText$1 = ColorToWebStr(Self.FColor,(aValue$16)?0:255);
         Self.FHandle$3.style["backgroundColor"] = mText$1;
         TW3TagObj.AddToComponentState(Self,[16]);
         TW3TagObj.EndUpdate(Self);
      }
   }
   /// procedure TW3MovableControl.SetUseAlpha(const aValue: Boolean)
   ///  [line: 2352, column: 29, file: SmartCL.Components]
   ,SetUseAlpha:function(Self, aValue$17) {
      var mBlend = 0;
      if (aValue$17==Self.FUseAlpha) {
         return;
      }
      Self.FUseAlpha = aValue$17;
      if (aValue$17) {
         mBlend = Self.FAlpha$1*0.01;
      } else {
         mBlend = 1;
      }
      Self.FHandle$3.style["opacity"] = mBlend;
   }
   /// procedure TW3MovableControl.SetVisible(const aValue: Boolean)
   ///  [line: 2086, column: 29, file: SmartCL.Components]
   ,SetVisible:function(Self, aValue$18) {
      TW3TagObj.BeginUpdate(Self);
      if (aValue$18) {
         Self.FHandle$3.style["display"] = TW3MovableControl.DisplayMode(Self.ClassType);
         Self.FHandle$3.style["visibility"] = "visible";
         TW3TagObj.AddToComponentState(Self,[8]);
      } else {
         Self.FHandle$3.style["display"] = "none";
         Self.FHandle$3.style["visibility"] = "hidden";
      }
      TW3TagObj.EndUpdate(Self);
   }
   /// procedure TW3MovableControl.SetWidth(aValue: Integer)
   ///  [line: 2212, column: 29, file: SmartCL.Components]
   ,SetWidth:function(Self, aValue$19) {
      aValue$19 = Math.max(aValue$19,0);
      if (aValue$19!=TW3MovableControl.GetWidth$4(Self)) {
         if ($SetIn(Self.FComponentState,2,0,6)) {
            TW3TagObj.BeginUpdate(Self);
            Self.FHandle$3.style["width"] = TInteger.ToPxStr(aValue$19);
            TW3TagObj.AddToComponentState(Self,[8]);
            TW3TagObj.EndUpdate(Self);
         } else {
            Self.FHandle$3.style["width"] = TInteger.ToPxStr(aValue$19);
         }
      }
   }
   /// function TW3MovableControl.Showing() : Boolean
   ///  [line: 1827, column: 28, file: SmartCL.Components]
   ,Showing:function(Self) {
      return ((((((TW3Component.Showing(Self)&&(TW3MovableControl.GetWidth$4(Self)>0))&&(TW3MovableControl.GetHeight$4(Self)>0))&&(TW3MovableControl.GetLeft(Self)>=0))&&(TW3MovableControl.GetLeft(Self)<TW3MovableControl.GetWidth$4(Self)))&&(TW3MovableControl.GetTop(Self)>=0))&&(TW3MovableControl.GetTop(Self)<TW3MovableControl.GetHeight$4(Self)))&&TW3MovableControl.GetVisible(Self);
   }
   /// function TW3MovableControl.supportAdjustment() : Boolean
   ///  [line: 1925, column: 34, file: SmartCL.Components]
   ,supportAdjustment:function(Self) {
      return true;
   }
   ,Destroy:TW3TagObj.Destroy
   ,AfterUpdate$:function($){return $.ClassType.AfterUpdate($)}
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing$:function($){return $.ClassType.Showing($)}
   ,StyleTagObject:TW3TagObj.StyleTagObject
   ,Create$44:TW3Component.Create$44
   ,Criar$1:TW3Component.Criar$1
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetHeight$:function($){return $.ClassType.SetHeight.apply($.ClassType, arguments)}
   ,SetWidth$:function($){return $.ClassType.SetWidth.apply($.ClassType, arguments)}
   ,supportAdjustment$:function($){return $.supportAdjustment($)}
};
/// TW3CustomControl = class (TW3MovableControl)
///  [line: 478, column: 3, file: SmartCL.Components]
var TW3CustomControl = {
   $ClassName:"TW3CustomControl",$Parent:TW3MovableControl
   ,$Init:function ($) {
      TW3MovableControl.$Init($);
      $.FAngle = 0;
      $.FClassNames = $.FFont = $.FGestureData = $.FNoBehavior = $.FOnAnimationBegins = $.FOnAnimationEnds = $.FOnChanged = $.FOnClick = $.FOnContextPopup = $.FOnDblClick = $.FOnGestureChange = $.FOnGestureEnd = $.FOnGestureStart = $.FOnGotFocus = $.FOnKeyDown = $.FOnKeyPress = $.FOnKeyUp = $.FOnLostFocus = $.FOnMouseDown = $.FOnMouseEnter = $.FOnMouseExit = $.FOnMouseMove = $.FOnMouseUp = $.FOnMouseWheel = $.FOnResize = $.FOnTouchBegins = $.FOnTouchEnds = $.FOnTouchMoves = $.FScrollInfo = $.FTouchData = null;
      $.FMouseCaptured = 0;
      $.FTouchBound = false;
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 31, column: 43, file: SmartCL.MouseCapture]
   ,a$18:function(Self) {
      return vCaptureControl===Self;
   }
   /// procedure TW3CustomControl.AfterUpdate()
   ///  [line: 3262, column: 28, file: SmartCL.Components]
   ,AfterUpdate:function(Self) {
      if ($SetIn(Self.FComponentState,2,0,6)) {
         if ($SetIn(Self.FComponentState,3,0,6)) {
            TW3TagObj.RemoveFromComponentState(Self,[8]);
            TW3MovableControl.Resize$(Self);
            if (Self.FOnResize) {
               Self.FOnResize(Self);
            }
            if ($Is(Self,TW3GraphicControl)) {
               TW3TagObj.AddToComponentState(Self,[16]);
            }
         }
         if ($SetIn(Self.FComponentState,4,0,6)) {
            TW3TagObj.RemoveFromComponentState(Self,[16]);
            TW3MovableControl.Moved(Self);
            TW3CustomControl.Invalidate$(Self);
         }
      }
      TW3MovableControl.AfterUpdate(Self);
   }
   /// procedure TW3CustomControl.BindTouch()
   ///  [line: 3024, column: 28, file: SmartCL.Components]
   ,BindTouch:function(Self) {
      if (Self.FTouchBound) {
         return;
      }
      Self.FTouchBound = true;
      Self.FHandle$3.addEventListener("touchstart",$Event1(Self,TW3CustomControl.CMTouchBegins));
      Self.FHandle$3.addEventListener("touchmove",$Event1(Self,TW3CustomControl.CMTouchMove));
      Self.FHandle$3.addEventListener("touchend",$Event1(Self,TW3CustomControl.CMTouchEnds));
   }
   /// procedure TW3CustomControl.BringToFront()
   ///  [line: 2651, column: 28, file: SmartCL.Components]
   ,BringToFront:function(Self) {
      if (Self.FHandle$3) {
         Self.FHandle$3.style.zIndex = (TW3CustomControl.GetMaxZIndex($As(Self.FParent,TW3CustomControl))+1);
      }
   }
   /// procedure TW3CustomControl.CBAnimationBegins(const eventObj: Variant)
   ///  [line: 2988, column: 28, file: SmartCL.Components]
   ,CBAnimationBegins:function(Self, eventObj) {
      if (Self.FOnAnimationBegins) {
         Self.FOnAnimationBegins(Self);
      }
   }
   /// procedure TW3CustomControl.CBAnimationEnds(const eventObj: Variant)
   ///  [line: 3003, column: 28, file: SmartCL.Components]
   ,CBAnimationEnds:function(Self, eventObj$1) {
      if (Self.FOnAnimationEnds) {
         Self.FOnAnimationEnds(Self);
      }
   }
   /// procedure TW3CustomControl.CBChanged(eventObj: JEvent)
   ///  [line: 3018, column: 28, file: SmartCL.Components]
   ,CBChanged:function(Self, eventObj$2) {
      if (Self.FOnChanged) {
         Self.FOnChanged(Self);
      }
   }
   /// procedure TW3CustomControl.CBClick(eventObj: JEvent)
   ///  [line: 2919, column: 28, file: SmartCL.Components]
   ,CBClick:function(Self, eventObj$3) {
      if (Self.FOnClick) {
         Self.FOnClick(Self);
      }
   }
   /// function TW3CustomControl.CBContextPopup(event: JMouseEvent) : Boolean
   ///  [line: 3193, column: 27, file: SmartCL.Components]
   ,CBContextPopup:function(Self, event) {
      var Result = false;
      var sr = {Bottom$1:0,Left$1:0,Right$1:0,Top$1:0};
      var mp = {X$1:0,Y$1:0};
      var handled = {v:false};
      sr = TW3MovableControl.ScreenRect(Self);
      mp.X$1 = event.clientX-sr.Left$1;
      mp.Y$1 = event.clientY-sr.Top$1;
      handled.v = false;
      TW3CustomControl.ContextPopup(Self,mp,handled);
      Result = !handled.v;
      return Result
   }
   /// procedure TW3CustomControl.CBDblClick(eventObj: JEvent)
   ///  [line: 2934, column: 28, file: SmartCL.Components]
   ,CBDblClick:function(Self, eventObj$4) {
      if (Self.FOnDblClick) {
         Self.FOnDblClick(Self);
      }
   }
   /// procedure TW3CustomControl.CBFocused()
   ///  [line: 2566, column: 28, file: SmartCL.Components]
   ,CBFocused:function(Self) {
      if (Self.FOnGotFocus) {
         Self.FOnGotFocus(Self);
      }
   }
   /// procedure TW3CustomControl.CBKeyDown(eventObj: JKeyboardEvent)
   ///  [line: 2946, column: 28, file: SmartCL.Components]
   ,CBKeyDown:function(Self, eventObj$5) {
      if (Self.FOnKeyDown) {
         Self.FOnKeyDown(Self,eventObj$5.keyCode);
      }
   }
   /// procedure TW3CustomControl.CBKeyPress(eventObj: JKeyboardEvent)
   ///  [line: 2973, column: 28, file: SmartCL.Components]
   ,CBKeyPress:function(Self, eventObj$6) {
      if (Self.FOnKeyPress) {
         Self.FOnKeyPress(Self,eventObj$6.charCode);
      }
   }
   /// procedure TW3CustomControl.CBKeyUp(eventObj: JKeyboardEvent)
   ///  [line: 2958, column: 28, file: SmartCL.Components]
   ,CBKeyUp:function(Self, eventObj$7) {
      if (Self.FOnKeyUp) {
         Self.FOnKeyUp(Self,eventObj$7.keyCode);
      }
   }
   /// procedure TW3CustomControl.CBLostFocus()
   ///  [line: 2572, column: 28, file: SmartCL.Components]
   ,CBLostFocus:function(Self) {
      if (Self.FOnLostFocus) {
         Self.FOnLostFocus(Self);
      }
   }
   /// procedure TW3CustomControl.CBMouseDown(eventObj: JMouseEvent)
   ///  [line: 2756, column: 28, file: SmartCL.Components]
   ,CBMouseDown:function(Self, eventObj$8) {
      var sr$1 = {Bottom$1:0,Left$1:0,Right$1:0,Top$1:0};
      var shiftState = null;
      sr$1 = TW3MovableControl.ScreenRect(Self);
      shiftState = TShiftState.Current();
      shiftState.FMouseButtons = shiftState.FMouseButtons|(1<<eventObj$8.button);
      TShiftState.SetMouseEvent(shiftState,eventObj$8);
      TW3CustomControl.MouseDown(Self,parseInt(eventObj$8.button,10),shiftState,eventObj$8.clientX-sr$1.Left$1,eventObj$8.clientY-sr$1.Top$1);
   }
   /// procedure TW3CustomControl.CBMouseEnter(eventObj: JMouseEvent)
   ///  [line: 2824, column: 28, file: SmartCL.Components]
   ,CBMouseEnter:function(Self, eventObj$9) {
      var sr$2 = {Bottom$1:0,Left$1:0,Right$1:0,Top$1:0};
      var shiftState$1 = null;
      sr$2 = TW3MovableControl.ScreenRect(Self);
      shiftState$1 = TShiftState.Current();
      TShiftState.SetMouseEvent(shiftState$1,eventObj$9);
      TW3CustomControl.MouseEnter(Self,shiftState$1,eventObj$9.clientX-sr$2.Left$1,eventObj$9.clientY-sr$2.Top$1);
   }
   /// procedure TW3CustomControl.CBMouseExit(eventObj: JMouseEvent)
   ///  [line: 2848, column: 28, file: SmartCL.Components]
   ,CBMouseExit:function(Self, eventObj$10) {
      var sr$3 = {Bottom$1:0,Left$1:0,Right$1:0,Top$1:0};
      var shiftState$2 = null;
      sr$3 = TW3MovableControl.ScreenRect(Self);
      shiftState$2 = TShiftState.Current();
      TShiftState.SetMouseEvent(shiftState$2,eventObj$10);
      TW3CustomControl.MouseExit(Self,shiftState$2,eventObj$10.clientX-sr$3.Left$1,eventObj$10.clientY-sr$3.Top$1);
   }
   /// procedure TW3CustomControl.CBMouseMove(eventObj: JMouseEvent)
   ///  [line: 2802, column: 28, file: SmartCL.Components]
   ,CBMouseMove:function(Self, eventObj$11) {
      var sr$4 = {Bottom$1:0,Left$1:0,Right$1:0,Top$1:0};
      var shiftState$3 = null;
      sr$4 = TW3MovableControl.ScreenRect(Self);
      shiftState$3 = TShiftState.Current();
      TShiftState.SetMouseEvent(shiftState$3,eventObj$11);
      TW3CustomControl.MouseMove(Self,shiftState$3,eventObj$11.clientX-sr$4.Left$1,eventObj$11.clientY-sr$4.Top$1);
   }
   /// procedure TW3CustomControl.CBMouseUp(eventObj: JMouseEvent)
   ///  [line: 2778, column: 28, file: SmartCL.Components]
   ,CBMouseUp:function(Self, eventObj$12) {
      var sr$5 = {Bottom$1:0,Left$1:0,Right$1:0,Top$1:0};
      var shiftState$4 = null;
      sr$5 = TW3MovableControl.ScreenRect(Self);
      shiftState$4 = TShiftState.Current();
      shiftState$4.FMouseButtons = shiftState$4.FMouseButtons&(~(1<<eventObj$12.button));
      TShiftState.SetMouseEvent(shiftState$4,eventObj$12);
      TW3CustomControl.MouseUp(Self,parseInt(eventObj$12.button,10),shiftState$4,eventObj$12.clientX-sr$5.Left$1,eventObj$12.clientY-sr$5.Top$1);
   }
   /// procedure TW3CustomControl.CBMouseWheel(eventObj: JMouseWheelEvent)
   ///  [line: 2883, column: 28, file: SmartCL.Components]
   ,CBMouseWheel:function(Self, eventObj$13) {
      var wheelDelta$1 = 0;
      var handled$1 = {};
      handled$1.v = false;
      var sr$6 = {Bottom$1:0,Left$1:0,Right$1:0,Top$1:0};
      var shiftState$5 = null;
      var mousePos = {X$1:0,Y$1:0};
      if (Self.FOnMouseWheel) {
         if (eventObj$13.detail) {
            wheelDelta$1 = eventObj$13.detail*-40;
         } else {
            wheelDelta$1 = eventObj$13.wheelDelta;
         }
         sr$6 = TW3MovableControl.ScreenRect(Self);
         shiftState$5 = TShiftState.Current();
         TShiftState.SetMouseEvent(shiftState$5,eventObj$13);
         mousePos.X$1 = eventObj$13.clientX-sr$6.Left$1;
         mousePos.Y$1 = eventObj$13.clientY-sr$6.Top$1;
         TW3CustomControl.MouseWheel(Self,shiftState$5,wheelDelta$1,mousePos,handled$1);
         if (handled$1.v) {
            eventObj$13.preventDefault();
            eventObj$13.stopPropagation();
         }
      }
   }
   /// procedure TW3CustomControl.CMGestureChange()
   ///  [line: 3133, column: 28, file: SmartCL.Components]
   ,CMGestureChange:function(Self) {
      event.preventDefault();
      if (Self.FOnGestureChange) {
         if (Self.FGestureData) {
            TW3GestureData.Update$2(Self.FGestureData);
         } else {
            Self.FGestureData = TObject.Create($New(TW3GestureData));
         }
         Self.FOnGestureChange(Self,Self.FGestureData);
      }
   }
   /// procedure TW3CustomControl.CMGestureEnd()
   ///  [line: 3161, column: 28, file: SmartCL.Components]
   ,CMGestureEnd:function(Self) {
      event.preventDefault();
      if (Self.FOnGestureEnd) {
         if (Self.FGestureData) {
            TW3GestureData.Update$2(Self.FGestureData);
         } else {
            Self.FGestureData = TObject.Create($New(TW3GestureData));
         }
         Self.FOnGestureEnd(Self,Self.FGestureData);
      }
   }
   /// procedure TW3CustomControl.CMGestureStart()
   ///  [line: 3105, column: 28, file: SmartCL.Components]
   ,CMGestureStart:function(Self) {
      event.preventDefault();
      if (Self.FOnGestureStart) {
         if (Self.FGestureData) {
            TW3GestureData.Update$2(Self.FGestureData);
         } else {
            Self.FGestureData = TObject.Create($New(TW3GestureData));
         }
         Self.FOnGestureStart(Self,Self.FGestureData);
      }
   }
   /// procedure TW3CustomControl.CMTouchBegins(eventObj: JTouchEvent)
   ///  [line: 3040, column: 28, file: SmartCL.Components]
   ,CMTouchBegins:function(Self, eventObj$14) {
      if (Self.FOnTouchBegins) {
         if (Self.FTouchData) {
            TW3TouchData.Update$1(Self.FTouchData,eventObj$14);
         } else {
            Self.FTouchData = TObject.Create($New(TW3TouchData));
         }
         Self.FOnTouchBegins(Self,Self.FTouchData);
      }
   }
   /// procedure TW3CustomControl.CMTouchEnds(eventObj: JTouchEvent)
   ///  [line: 3078, column: 28, file: SmartCL.Components]
   ,CMTouchEnds:function(Self, eventObj$15) {
      if (Self.FOnTouchEnds) {
         if (Self.FTouchData) {
            TW3TouchData.Update$1(Self.FTouchData,eventObj$15);
         } else {
            Self.FTouchData = TObject.Create($New(TW3TouchData));
         }
         Self.FOnTouchEnds(Self,Self.FTouchData);
      }
   }
   /// procedure TW3CustomControl.CMTouchMove(eventObj: JTouchEvent)
   ///  [line: 3059, column: 28, file: SmartCL.Components]
   ,CMTouchMove:function(Self, eventObj$16) {
      if (Self.FOnTouchMoves) {
         if (Self.FTouchData) {
            TW3TouchData.Update$1(Self.FTouchData,eventObj$16);
         } else {
            Self.FTouchData = TObject.Create($New(TW3TouchData));
         }
         Self.FOnTouchMoves(Self,Self.FTouchData);
      }
   }
   /// procedure TW3CustomControl.ContextPopup(const mousePos: TPoint; var handled: Boolean)
   ///  [line: 3204, column: 28, file: SmartCL.Components]
   ,ContextPopup:function(Self, mousePos$1, handled$2) {
      if (Self.FOnContextPopup) {
         Self.FOnContextPopup(Self,mousePos$1,handled$2);
      }
   }
   /// constructor TW3CustomControl.Create(AOwner: TW3Component)
   ///  [line: 2463, column: 30, file: SmartCL.Components]
   ,Create$44:function(Self, AOwner$3) {
      TW3Component.Create$44(Self,AOwner$3);
      Self.FHandle$3["onclick"] = $Event1(Self,TW3CustomControl.CBClick$);
      return Self
   }
   /// constructor TW3CustomControl.Criar(AOwner: TW3Component; htmlElement: String = 'div')
   ///  [line: 2469, column: 30, file: SmartCL.Components]
   ,Criar$1:function(Self, AOwner$4, htmlElement$3) {
      TW3Component.Criar$1(Self,AOwner$4,htmlElement$3);
      Self.FHandle$3["onclick"] = $Event1(Self,TW3CustomControl.CBClick$);
      return Self
   }
   /// procedure TW3CustomControl.FinalizeObject()
   ///  [line: 2491, column: 28, file: SmartCL.Components]
   ,FinalizeObject:function(Self) {
      TObject.Free(Self.FFont);
      TObject.Free(Self.FClassNames);
      TObject.Free(Self.FScrollInfo);
      TObject.Free(Self.FTouchData);
      TObject.Free(Self.FGestureData);
      TW3MovableControl.FinalizeObject(Self);
   }
   /// function TW3CustomControl.GetBorderRadius() : Integer
   ///  [line: 3242, column: 27, file: SmartCL.Components]
   ,GetBorderRadius:function(Self) {
      return w3_getStyleAsInt(Self.FHandle$3,"bordertopleftRadius");
   }
   /// function TW3CustomControl.GetChildrenSortedByYPos() : TW3ComponentArray
   ///  [line: 2657, column: 27, file: SmartCL.Components]
   ,GetChildrenSortedByYPos:function(Self) {
      var Result = [];
      var mCount = 0;
      var x$42 = 0;
      var mAltered = false;
      var mObj$6 = null;
      var mLast = null;
      var mCurrent = null;
      Result.length=0;
      mCount = TW3Component.GetChildCount(Self);
      if (mCount>0) {
         var $temp10;
         for(x$42=0,$temp10=mCount;x$42<$temp10;x$42++) {
            mObj$6 = TW3Component.GetChildObject(Self,x$42);
            if ($Is(mObj$6,TW3CustomControl)) {
               Result.push(mObj$6);
            }
         }
         if (Result.length>1) {
            do {
               mAltered = false;
               var $temp11;
               for(x$42=1,$temp11=mCount;x$42<$temp11;x$42++) {
                  mLast = $As(Result[x$42-1],TW3CustomControl);
                  mCurrent = $As(Result[x$42],TW3CustomControl);
                  if (TW3MovableControl.GetTop(mCurrent)<TW3MovableControl.GetTop(mLast)) {
                     $ArraySwap(Result,(x$42-1),x$42);
                     mAltered = true;
                  }
               }
            } while (!(mAltered==false));
         }
      }
      return Result
   }
   /// function TW3CustomControl.GetEnabled() : Boolean
   ///  [line: 2550, column: 27, file: SmartCL.Components]
   ,GetEnabled:function(Self) {
      return Self.FHandle$3.disabled!=true;
   }
   /// function TW3CustomControl.GetFont() : TW3ControlFont
   ///  [line: 2518, column: 27, file: SmartCL.Components]
   ,GetFont$1:function(Self) {
      var Result = null;
      if (Self.FFont===null) {
         Self.FFont = TW3ControlFont.Create$47($New(TW3ControlFont),Self);
      }
      Result = Self.FFont;
      return Result
   }
   /// function TW3CustomControl.GetHasFocus() : Boolean
   ///  [line: 2729, column: 27, file: SmartCL.Components]
   ,GetHasFocus:function(Self) {
      var Result = false;
      if (Self.FHandle$3) {
         Result = document.activeElement==Self.FHandle$3;
      }
      return Result
   }
   /// function TW3CustomControl.GetMaxZIndex() : Integer
   ///  [line: 2635, column: 27, file: SmartCL.Components]
   ,GetMaxZIndex:function(Self) {
      var Result = 0;
      var iChild = 0;
      var obj = null;
      var objZIndex = 0;
      Result = 0;
      var $temp12;
      for(iChild=0,$temp12=TW3Component.GetChildCount(Self);iChild<$temp12;iChild++) {
         obj = TW3Component.GetChildObject(Self,iChild);
         if (((obj!==null)&&$Is(obj,TW3CustomControl))&&obj.FHandle$3) {
            objZIndex = TW3CustomControl.GetZIndexAsInt($As(obj,TW3CustomControl),0);
            if (objZIndex>Result) {
               Result = objZIndex;
            }
            objZIndex = TW3CustomControl.GetMaxZIndex($As(obj,TW3CustomControl));
            if (objZIndex>Result) {
               Result = objZIndex;
            }
         }
      }
      return Result
   }
   /// function TW3CustomControl.GetScrollInfo() : TW3ScrollInfo
   ///  [line: 2543, column: 27, file: SmartCL.Components]
   ,GetScrollInfo:function(Self) {
      var Result = null;
      if (Self.FScrollInfo===null) {
         Self.FScrollInfo = TW3OwnedObject.Create$15$($New(TW3ScrollInfo),Self);
      }
      Result = Self.FScrollInfo;
      return Result
   }
   /// function TW3CustomControl.GetStyleClass() : String
   ///  [line: 2700, column: 27, file: SmartCL.Components]
   ,GetStyleClass:function(Self) {
      return w3_getAttribAsStr(Self.FHandle$3,"class");
   }
   /// function TW3CustomControl.GetZIndexAsInt(default: Integer = 0) : Integer
   ///  [line: 2578, column: 27, file: SmartCL.Components]
   ,GetZIndexAsInt:function(Self, default$1) {
      var Result = 0;
      var mData$5;
      Result = default$1;
      mData$5 = Self.FHandle$3.style["zIndex"];
      if (Self.FHandle$3) {
         if (TVariant.IsNumber(mData$5)) {
            Result = parseInt(mData$5,10);
         } else if (TVariant.IsString(mData$5)) {
            Result = parseInt(mData$5,10);
            if (isNaN(Result)) {
               Result = default$1;
            }
         }
      }
      return Result
   }
   /// function TW3CustomControl.GetZoom() : Float
   ///  [line: 2525, column: 27, file: SmartCL.Components]
   ,GetZoom:function(Self) {
      return w3_getStyleAsFloat(Self.FHandle$3,"zoom");
   }
   /// procedure TW3CustomControl.InitializeCapture()
   ///  [line: 36, column: 34, file: SmartCL.MouseCapture]
   ,InitializeCapture:function(Self) {
      var doc = undefined;
      doc = document;
      doc.addEventListener("mousedown",function (evt) {
         if (vCaptureControl!==null) {
            TW3CustomControl.CBMouseDown$(vCaptureControl,evt);
            evt.stopImmediatePropagation();
         }
      },true);
      doc.addEventListener("mousemove",function (evt$1) {
         if (vCaptureControl!==null) {
            TW3CustomControl.CBMouseMove$(vCaptureControl,evt$1);
            evt$1.stopImmediatePropagation();
         }
      },true);
      doc.addEventListener("mouseup",function (evt$2) {
         if (vCaptureControl!==null) {
            TW3CustomControl.CBMouseUp$(vCaptureControl,evt$2);
            evt$2.stopImmediatePropagation();
         }
         vCaptureControl = null;
      },true);
      doc.addEventListener("mouseover",function (evt$3) {
         if (vCaptureControl!==null) {
            TW3CustomControl.CBMouseEnter(vCaptureControl,evt$3);
            evt$3.stopImmediatePropagation();
         }
      },true);
      doc.addEventListener("mouseout",function (evt$4) {
         if (vCaptureControl!==null) {
            TW3CustomControl.CBMouseExit(vCaptureControl,evt$4);
            evt$4.stopImmediatePropagation();
         }
      },true);
      doc.addEventListener("mousewheel",function (evt$5) {
         if (vCaptureControl!==null) {
            TW3CustomControl.CBMouseWheel(vCaptureControl,evt$5);
            evt$5.stopImmediatePropagation();
         }
      },true);
      doc.addEventListener("onclick",function (evt$6) {
         if (vCaptureControl!==null) {
            TW3CustomControl.CBClick$(vCaptureControl,evt$6);
            evt$6.stopImmediatePropagation();
         }
      },true);
      doc.addEventListener("ondblclick",function (evt$7) {
         if (vCaptureControl!==null) {
            TW3CustomControl.CBDblClick(vCaptureControl,evt$7);
            evt$7.stopImmediatePropagation();
         }
      },true);
      vCaptureInitialized = true;
   }
   /// procedure TW3CustomControl.InitializeObject()
   ///  [line: 2475, column: 28, file: SmartCL.Components]
   ,InitializeObject:function(Self) {
      TW3MovableControl.InitializeObject(Self);
      Self.FNoBehavior = $Event0(Self,TW3Component.CBNoBehavior);
      w3_bind2(Self.FHandle$3,"onselectstart",$Event0(Self,TW3Component.CBNoBehavior));
      w3_bind2(Self.FHandle$3,"onfocus",$Event0(Self,TW3CustomControl.CBFocused));
      w3_bind2(Self.FHandle$3,"onblur",$Event0(Self,TW3CustomControl.CBLostFocus));
   }
   /// procedure TW3CustomControl.Invalidate()
   ///  [line: 3210, column: 28, file: SmartCL.Components]
   ,Invalidate:function(Self) {
      /* null */
   }
   /// procedure TW3CustomControl.LayoutChildren()
   ///  [line: 3215, column: 28, file: SmartCL.Components]
   ,LayoutChildren:function(Self) {
      var x$43 = 0;
      var mChild$1 = null;
      if (TW3TagObj.Showing$(Self)) {
         TW3TagObj.BeginUpdate(Self);
         var $temp13;
         for(x$43=0,$temp13=TW3Component.GetChildCount(Self);x$43<$temp13;x$43++) {
            mChild$1 = TW3Component.GetChildObject(Self,x$43);
            if ($Is(mChild$1,TW3CustomControl)) {
               setTimeout($Event0($As(mChild$1,TW3CustomControl),TW3CustomControl.LayoutChildren),10);
            }
         }
         TW3TagObj.AddToComponentState(Self,[24]);
         TW3TagObj.EndUpdate(Self);
      } else {
         TW3TagObj.AddToComponentState(Self,[24]);
      }
   }
   /// procedure TW3CustomControl.MouseDown(button: TMouseButton; shiftState: TShiftState; x: Integer; y: Integer)
   ///  [line: 2766, column: 28, file: SmartCL.Components]
   ,MouseDown:function(Self, button$3, shiftState$6, x$44, y$39) {
      if (Self.FOnMouseDown) {
         Self.FOnMouseDown(Self,button$3,shiftState$6,x$44,y$39);
      }
   }
   /// procedure TW3CustomControl.MouseEnter(shiftState: TShiftState; x: Integer; y: Integer)
   ///  [line: 2832, column: 28, file: SmartCL.Components]
   ,MouseEnter:function(Self, shiftState$7, x$45, y$40) {
      if (Self.FOnMouseEnter) {
         Self.FOnMouseEnter(Self,shiftState$7,x$45,y$40);
      }
   }
   /// procedure TW3CustomControl.MouseExit(shiftState: TShiftState; x: Integer; y: Integer)
   ///  [line: 2856, column: 28, file: SmartCL.Components]
   ,MouseExit:function(Self, shiftState$8, x$46, y$41) {
      if (Self.FOnMouseExit) {
         Self.FOnMouseExit(Self,shiftState$8,x$46,y$41);
      }
   }
   /// procedure TW3CustomControl.MouseMove(shiftState: TShiftState; x: Integer; y: Integer)
   ///  [line: 2810, column: 28, file: SmartCL.Components]
   ,MouseMove:function(Self, shiftState$9, x$47, y$42) {
      if (Self.FOnMouseMove) {
         Self.FOnMouseMove(Self,shiftState$9,x$47,y$42);
      }
   }
   /// procedure TW3CustomControl.MouseUp(button: TMouseButton; shiftState: TShiftState; x: Integer; y: Integer)
   ///  [line: 2789, column: 28, file: SmartCL.Components]
   ,MouseUp:function(Self, button$4, shiftState$10, x$48, y$43) {
      if (Self.FOnMouseUp) {
         Self.FOnMouseUp(Self,button$4,shiftState$10,x$48,y$43);
      }
   }
   /// procedure TW3CustomControl.MouseWheel(shift: TShiftState; wheelDelta: Integer; const mousePos: TPoint; var handled: Boolean)
   ///  [line: 2907, column: 28, file: SmartCL.Components]
   ,MouseWheel:function(Self, shift, wheelDelta$2, mousePos$2, handled$3) {
      if (Self.FOnMouseWheel) {
         Self.FOnMouseWheel(Self,shift,wheelDelta$2,mousePos$2,handled$3);
      }
   }
   /// procedure TW3CustomControl.ReleaseCapture()
   ///  [line: 112, column: 28, file: SmartCL.MouseCapture]
   ,ReleaseCapture:function(Self) {
      --Self.FMouseCaptured;
      if (!Self.FMouseCaptured) {
         if (Self.FHandle$3.releaseCapture) {
            Self.FHandle$3.releaseCapture();
         }
         vCaptureControl = null;
      } else if (Self.FMouseCaptured<0) {
         Self.FMouseCaptured = 0;
      }
   }
   /// procedure TW3CustomControl.SetAngle(aValue: Float)
   ///  [line: 2710, column: 28, file: SmartCL.Components]
   ,SetAngle:function(Self, aValue$20) {
      var mStyle = "";
      if (aValue$20!=Self.FAngle) {
         Self.FAngle = aValue$20;
         mStyle = "rotate("+FloatToStr$_Float_Integer_(aValue$20,2)+"deg)";
         Self.FHandle$3.style[w3_CSSPrefix("Transform")] = mStyle;
      }
   }
   /// procedure TW3CustomControl.SetBorderRadius(aNewRadius: Integer)
   ///  [line: 3253, column: 28, file: SmartCL.Components]
   ,SetBorderRadius:function(Self, aNewRadius) {
      TW3TagObj.BeginUpdate(Self);
      Self.FHandle$3.style["borderRadius"] = TInteger.ToPxStr(aNewRadius);
      TW3TagObj.AddToComponentState(Self,[8]);
      TW3TagObj.EndUpdate(Self);
   }
   /// procedure TW3CustomControl.SetCapture()
   ///  [line: 100, column: 28, file: SmartCL.MouseCapture]
   ,SetCapture:function(Self) {
      if (!Self.FMouseCaptured) {
         if (Self.FHandle$3.setCapture) {
            Self.FHandle$3.setCapture(true);
         } else if (!vCaptureInitialized) {
            TW3CustomControl.InitializeCapture(Self.ClassType);
         }
         vCaptureControl = Self;
      }
      ++Self.FMouseCaptured;
   }
   /// procedure TW3CustomControl.SetEnabled(aValue: Boolean)
   ///  [line: 2555, column: 28, file: SmartCL.Components]
   ,SetEnabled:function(Self, aValue$21) {
      Self.FHandle$3.disabled = (!aValue$21);
      if (aValue$21) {
         if (w3_HasClass(Self.FHandle$3,"disabledState")) {
            w3_RemoveClass(Self.FHandle$3,"disabledState");
         }
      } else {
         w3_AddClass(Self.FHandle$3,"disabledState");
      }
   }
   /// procedure TW3CustomControl.SetFocus()
   ///  [line: 2723, column: 28, file: SmartCL.Components]
   ,SetFocus:function(Self) {
      if (Self.FHandle$3) {
         Self.FHandle$3.focus();
      }
   }
   /// procedure TW3CustomControl.SetStyleClass(aStyle: String)
   ///  [line: 2705, column: 28, file: SmartCL.Components]
   ,SetStyleClass:function(Self, aStyle) {
      w3_setAttrib(Self.FHandle$3,"class",aStyle);
   }
   /// procedure TW3CustomControl.SetZoom(aValue: Float)
   ///  [line: 2530, column: 28, file: SmartCL.Components]
   ,SetZoom:function(Self, aValue$22) {
      Self.FHandle$3.style["zoom"] = aValue$22;
   }
   /// procedure TW3CustomControl.StyleTagObject()
   ///  [line: 2511, column: 28, file: SmartCL.Components]
   ,StyleTagObject:function(Self) {
      TW3TagObj.StyleTagObject(Self);
      TW3CustomControl.SetStyleClass(Self,TObject.ClassName(Self.ClassType));
      TW3MovableControl.SetVisible(Self,true);
   }
   /// procedure TW3CustomControl._setAnimationBegins(const aValue: TAnimationBeginsEvent)
   ///  [line: 2979, column: 28, file: SmartCL.Components]
   ,_setAnimationBegins:function(Self, aValue$23) {
      if (aValue$23) {
         Self.FHandle$3[w3_CSSPrefix("AnimationStart")] = $Event1(Self,TW3CustomControl.CBAnimationBegins);
      } else {
         Self.FHandle$3[w3_CSSPrefix("AnimationStart")] = Self.FNoBehavior;
      }
      Self.FOnAnimationBegins = aValue$23;
   }
   /// procedure TW3CustomControl._setAnimationEnds(const aValue: TAnimationEndsEvent)
   ///  [line: 2994, column: 28, file: SmartCL.Components]
   ,_setAnimationEnds:function(Self, aValue$24) {
      if (aValue$24) {
         Self.FHandle$3[w3_CSSPrefix("AnimationEnd")] = $Event1(Self,TW3CustomControl.CBAnimationEnds);
      } else {
         Self.FHandle$3[w3_CSSPrefix("AnimationEnd")] = Self.FNoBehavior;
      }
      Self.FOnAnimationEnds = aValue$24;
   }
   /// procedure TW3CustomControl._setChanged(const aValue: TChangedEvent)
   ///  [line: 3009, column: 28, file: SmartCL.Components]
   ,_setChanged:function(Self, aValue$25) {
      if (aValue$25) {
         Self.FHandle$3["onchange"] = $Event1(Self,TW3CustomControl.CBChanged);
      } else {
         Self.FHandle$3["onchange"] = Self.FNoBehavior;
      }
      Self.FOnChanged = aValue$25;
   }
   /// procedure TW3CustomControl._setContextPopup(const aValue: TContextPopupEvent)
   ///  [line: 3183, column: 28, file: SmartCL.Components]
   ,_setContextPopup:function(Self, aValue$26) {
      var mObj$7 = undefined;
      mObj$7 = Self.FHandle$3;
      if (aValue$26) {
         mObj$7["oncontextmenu"] = $Event1(Self,TW3CustomControl.CBContextPopup);
      } else {
         mObj$7["oncontextmenu"] = Self.FNoBehavior;
      }
      Self.FOnContextPopup = aValue$26;
   }
   /// procedure TW3CustomControl._setGestureChange(aValue: TGestureChangeEvent)
   ///  [line: 3118, column: 28, file: SmartCL.Components]
   ,_setGestureChange:function(Self, aValue$27) {
      if (Self.FOnGestureChange) {
         w3_RemoveEvent(Self.FHandle$3,"gesturechange",$Event0(Self,TW3CustomControl.CMGestureChange),true);
         Self.FOnGestureChange = null;
      }
      if (aValue$27) {
         Self.FOnGestureChange = aValue$27;
         w3_AddEvent(Self.FHandle$3,"gesturechange",$Event0(Self,TW3CustomControl.CMGestureChange),true);
      }
   }
   /// procedure TW3CustomControl._setGestureEnd(aValue: TGestureEndEvent)
   ///  [line: 3146, column: 28, file: SmartCL.Components]
   ,_setGestureEnd:function(Self, aValue$28) {
      if (Self.FOnGestureEnd) {
         w3_RemoveEvent(Self.FHandle$3,"gesturestart",$Event0(Self,TW3CustomControl.CMGestureEnd),true);
         Self.FOnGestureEnd = null;
      }
      if (aValue$28) {
         Self.FOnGestureEnd = aValue$28;
         w3_AddEvent(Self.FHandle$3,"gestureend",$Event0(Self,TW3CustomControl.CMGestureEnd),true);
      }
   }
   /// procedure TW3CustomControl._setGestureStart(aValue: TGestureStartEvent)
   ///  [line: 3090, column: 28, file: SmartCL.Components]
   ,_setGestureStart:function(Self, aValue$29) {
      if (Self.FOnGestureStart) {
         w3_RemoveEvent(Self.FHandle$3,"gesturestart",$Event0(Self,TW3CustomControl.CMGestureStart),true);
         Self.FOnGestureStart = null;
      }
      if (aValue$29) {
         Self.FOnGestureStart = aValue$29;
         w3_AddEvent(Self.FHandle$3,"gesturestart",$Event0(Self,TW3CustomControl.CMGestureStart),true);
      }
   }
   /// procedure TW3CustomControl._setGotFocus(const aValue: TGotFocusEvent)
   ///  [line: 2735, column: 28, file: SmartCL.Components]
   ,_setGotFocus:function(Self, aValue$30) {
      Self.FOnGotFocus = aValue$30;
   }
   /// procedure TW3CustomControl._setKeyDown(const aValue: TKeyDownEvent)
   ///  [line: 2940, column: 28, file: SmartCL.Components]
   ,_setKeyDown:function(Self, aValue$31) {
      Self.FHandle$3["onkeydown"] = $Event1(Self,TW3CustomControl.CBKeyDown$);
      Self.FOnKeyDown = aValue$31;
   }
   /// procedure TW3CustomControl._setKeyPress(const aValue: TKeyPressEvent)
   ///  [line: 2964, column: 28, file: SmartCL.Components]
   ,_setKeyPress:function(Self, aValue$32) {
      if (aValue$32) {
         Self.FHandle$3["onkeypress"] = $Event1(Self,TW3CustomControl.CBKeyPress);
      } else {
         Self.FHandle$3["onkeypress"] = Self.FNoBehavior;
      }
      Self.FOnKeyPress = aValue$32;
   }
   /// procedure TW3CustomControl._setKeyUp(const aValue: TKeyUpEvent)
   ///  [line: 2952, column: 28, file: SmartCL.Components]
   ,_setKeyUp:function(Self, aValue$33) {
      Self.FHandle$3["onkeyup"] = $Event1(Self,TW3CustomControl.CBKeyUp$);
      Self.FOnKeyUp = aValue$33;
   }
   /// procedure TW3CustomControl._setLostFocus(const aValue: TLostFocusEvent)
   ///  [line: 2744, column: 28, file: SmartCL.Components]
   ,_setLostFocus:function(Self, aValue$34) {
      Self.FOnLostFocus = aValue$34;
   }
   /// procedure TW3CustomControl._setMouseClick(const aValue: TMouseClickEvent)
   ///  [line: 2914, column: 28, file: SmartCL.Components]
   ,_setMouseClick:function(Self, aValue$35) {
      Self.FOnClick = aValue$35;
   }
   /// procedure TW3CustomControl._setMouseDblClick(const aValue: TMouseDblClickEvent)
   ///  [line: 2925, column: 28, file: SmartCL.Components]
   ,_setMouseDblClick:function(Self, aValue$36) {
      if (aValue$36) {
         Self.FHandle$3["ondblclick"] = $Event1(Self,TW3CustomControl.CBDblClick);
      } else {
         Self.FHandle$3["ondblclick"] = Self.FNoBehavior;
      }
      Self.FOnDblClick = aValue$36;
   }
   /// procedure TW3CustomControl._setMouseDown(const aValue: TMouseDownEvent)
   ///  [line: 2750, column: 28, file: SmartCL.Components]
   ,_setMouseDown:function(Self, aValue$37) {
      Self.FHandle$3["onmousedown"] = $Event1(Self,TW3CustomControl.CBMouseDown$);
      Self.FOnMouseDown = aValue$37;
   }
   /// procedure TW3CustomControl._setMouseEnter(const aValue: TMouseEnterEvent)
   ///  [line: 2816, column: 28, file: SmartCL.Components]
   ,_setMouseEnter:function(Self, aValue$38) {
      if (aValue$38) {
         Self.FHandle$3["onmouseover"] = $Event1(Self,TW3CustomControl.CBMouseEnter);
      } else {
         Self.FHandle$3["onmouseover"] = Self.FNoBehavior;
      }
      Self.FOnMouseEnter = aValue$38;
   }
   /// procedure TW3CustomControl._setMouseExit(const aValue: TMouseExitEvent)
   ///  [line: 2838, column: 28, file: SmartCL.Components]
   ,_setMouseExit:function(Self, aValue$39) {
      if (aValue$39) {
         Self.FHandle$3["onmouseout"] = $Event1(Self,TW3CustomControl.CBMouseExit);
      } else {
         Self.FHandle$3["onmouseout"] = Self.FNoBehavior;
      }
      Self.FOnMouseExit = aValue$39;
   }
   /// procedure TW3CustomControl._setMouseMove(const aValue: TMouseMoveEvent)
   ///  [line: 2796, column: 28, file: SmartCL.Components]
   ,_setMouseMove:function(Self, aValue$40) {
      Self.FHandle$3["onmousemove"] = $Event1(Self,TW3CustomControl.CBMouseMove$);
      Self.FOnMouseMove = aValue$40;
   }
   /// procedure TW3CustomControl._setMouseUp(const aValue: TMouseUpEvent)
   ///  [line: 2772, column: 28, file: SmartCL.Components]
   ,_setMouseUp:function(Self, aValue$41) {
      Self.FHandle$3["onmouseup"] = $Event1(Self,TW3CustomControl.CBMouseUp$);
      Self.FOnMouseUp = aValue$41;
   }
   /// procedure TW3CustomControl._setMouseWheel(const aValue: TMouseWheelEvent)
   ///  [line: 2862, column: 28, file: SmartCL.Components]
   ,_setMouseWheel:function(Self, aValue$42) {
      var onEventSupported = false;
      var mObj$8 = undefined;
      mObj$8 = Self.FHandle$3;
      
    onEventSupported = 'onmousewheel' in mObj$8;
  if (onEventSupported) {
         if (aValue$42) {
            mObj$8["onmousewheel"] = $Event1(Self,TW3CustomControl.CBMouseWheel);
         } else {
            mObj$8["onmousewheel"] = Self.FNoBehavior;
         }
      } else if (aValue$42) {
         mObj$8.addEventListener("DOMMouseScroll",$Event1(Self,TW3CustomControl.CBMouseWheel),false);
      } else {
         mObj$8.removeEventListener("DOMMouseScroll",$Event1(Self,TW3CustomControl.CBMouseWheel),false);
      }
      Self.FOnMouseWheel = aValue$42;
   }
   /// procedure TW3CustomControl._setResize(const aValue: TReSizeEvent)
   ///  [line: 3178, column: 28, file: SmartCL.Components]
   ,_setResize:function(Self, aValue$43) {
      Self.FOnResize = aValue$43;
   }
   /// procedure TW3CustomControl._setTouchBegins(const aValue: TTouchBeginEvent)
   ///  [line: 3033, column: 28, file: SmartCL.Components]
   ,_setTouchBegins:function(Self, aValue$44) {
      if (aValue$44) {
         TW3CustomControl.BindTouch(Self);
      }
      Self.FOnTouchBegins = aValue$44;
   }
   /// procedure TW3CustomControl._setTouchEnds(const aValue: TTouchEndEvent)
   ///  [line: 3071, column: 28, file: SmartCL.Components]
   ,_setTouchEnds:function(Self, aValue$45) {
      if (aValue$45) {
         TW3CustomControl.BindTouch(Self);
      }
      Self.FOnTouchEnds = aValue$45;
   }
   /// procedure TW3CustomControl._setTouchMoves(const aValue: TTouchMoveEvent)
   ///  [line: 3052, column: 28, file: SmartCL.Components]
   ,_setTouchMoves:function(Self, aValue$46) {
      if (aValue$46) {
         TW3CustomControl.BindTouch(Self);
      }
      Self.FOnTouchMoves = aValue$46;
   }
   ,Destroy:TW3TagObj.Destroy
   ,AfterUpdate$:function($){return $.ClassType.AfterUpdate($)}
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,Create$44$:function($){return $.ClassType.Create$44.apply($.ClassType, arguments)}
   ,Criar$1$:function($){return $.ClassType.Criar$1.apply($.ClassType, arguments)}
   ,Resize:TW3MovableControl.Resize
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetWidth:TW3MovableControl.SetWidth
   ,supportAdjustment:TW3MovableControl.supportAdjustment
   ,CBClick$:function($){return $.ClassType.CBClick.apply($.ClassType, arguments)}
   ,CBKeyDown$:function($){return $.ClassType.CBKeyDown.apply($.ClassType, arguments)}
   ,CBKeyUp$:function($){return $.ClassType.CBKeyUp.apply($.ClassType, arguments)}
   ,CBMouseDown$:function($){return $.ClassType.CBMouseDown.apply($.ClassType, arguments)}
   ,CBMouseMove$:function($){return $.ClassType.CBMouseMove.apply($.ClassType, arguments)}
   ,CBMouseUp$:function($){return $.ClassType.CBMouseUp.apply($.ClassType, arguments)}
   ,Invalidate$:function($){return $.ClassType.Invalidate($)}
   ,SetEnabled$:function($){return $.ClassType.SetEnabled.apply($.ClassType, arguments)}
};
/// TW3GraphicControl = class (TW3CustomControl)
///  [line: 650, column: 3, file: SmartCL.Components]
var TW3GraphicControl = {
   $ClassName:"TW3GraphicControl",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.FCanvas = $.FContext$2 = $.FOnPaint = null;
      $.FDirty$1 = false;
   }
   /// procedure TW3GraphicControl.FinalizeObject()
   ///  [line: 1736, column: 29, file: SmartCL.Components]
   ,FinalizeObject:function(Self) {
      TObject.Free(Self.FCanvas);
      TObject.Free(Self.FContext$2);
      TW3CustomControl.FinalizeObject(Self);
   }
   /// procedure TW3GraphicControl.InitializeObject()
   ///  [line: 1729, column: 29, file: SmartCL.Components]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      Self.FContext$2 = TW3ControlGraphicContext.Create$38($New(TW3ControlGraphicContext),Self.FHandle$3);
      Self.FCanvas = TW3Canvas.Create$40($New(TW3Canvas),Self.FContext$2);
   }
   /// procedure TW3GraphicControl.Invalidate()
   ///  [line: 1789, column: 29, file: SmartCL.Components]
   ,Invalidate:function(Self) {
      if (!Self.FDirty$1) {
         Self.FDirty$1 = true;
         TW3AnimationFrame.ScheduleRefresh(Self);
      }
   }
   /// function TW3GraphicControl.MakeElementTagObj() : THandle
   ///  [line: 1769, column: 28, file: SmartCL.Components]
   ,MakeElementTagObj:function(Self) {
      return w3_createHtmlElement("canvas");
   }
   /// procedure TW3GraphicControl.Paint()
   ///  [line: 1774, column: 29, file: SmartCL.Components]
   ,Paint:function(Self) {
      if (Self.FOnPaint) {
         Self.FOnPaint(Self,Self.FCanvas);
      }
   }
   /// procedure TW3GraphicControl.Refresh()
   ///  [line: 1797, column: 29, file: SmartCL.Components]
   ,Refresh:function(Self) {
      Self.FDirty$1 = false;
      if ((((!TW3TagObj.GetUpdating(Self))&&(Self.FCanvas!==null))&&(Self.FContext$2!==null))&&TW3MovableControl.GetVisible(Self)) {
         TW3GraphicControl.Paint(Self);
      }
   }
   /// procedure TW3GraphicControl.Resize()
   ///  [line: 1780, column: 29, file: SmartCL.Components]
   ,Resize:function(Self) {
      TW3MovableControl.Resize(Self);
      w3_setAttrib(Self.FHandle$3,"width",w3_getStyle(Self.FHandle$3,"width"));
      w3_setAttrib(Self.FHandle$3,"height",w3_getStyle(Self.FHandle$3,"height"));
   }
   /// procedure TW3GraphicControl.SetHeight(aValue: Integer)
   ///  [line: 1760, column: 29, file: SmartCL.Components]
   ,SetHeight:function(Self, aValue$47) {
      TW3MovableControl.SetHeight(Self,aValue$47);
      if (Self.FHandle$3) {
         w3_setAttrib(Self.FHandle$3,"height",TInteger.ToPxStr(aValue$47));
      } else {
         EW3TagObj.RaiseCntErrMethod("TW3GraphicControl.SetHeight",Self,"invalid control handle error");
      }
   }
   /// procedure TW3GraphicControl.SetWidth(aValue: Integer)
   ///  [line: 1751, column: 29, file: SmartCL.Components]
   ,SetWidth:function(Self, aValue$48) {
      TW3MovableControl.SetWidth(Self,aValue$48);
      if (Self.FHandle$3) {
         w3_setAttrib(Self.FHandle$3,"width",TInteger.ToPxStr(aValue$48));
      } else {
         EW3TagObj.RaiseCntErrMethod("TW3GraphicControl.SetWidth",Self,"invalid control handle error");
      }
   }
   ,Destroy:TW3TagObj.Destroy
   ,AfterUpdate:TW3CustomControl.AfterUpdate
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)}
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3CustomControl.StyleTagObject
   ,Create$44:TW3CustomControl.Create$44
   ,Criar$1:TW3CustomControl.Criar$1
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetHeight$:function($){return $.ClassType.SetHeight.apply($.ClassType, arguments)}
   ,SetWidth$:function($){return $.ClassType.SetWidth.apply($.ClassType, arguments)}
   ,supportAdjustment:TW3MovableControl.supportAdjustment
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyDown:TW3CustomControl.CBKeyDown
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,CBMouseDown:TW3CustomControl.CBMouseDown
   ,CBMouseMove:TW3CustomControl.CBMouseMove
   ,CBMouseUp:TW3CustomControl.CBMouseUp
   ,Invalidate$:function($){return $.ClassType.Invalidate($)}
   ,SetEnabled:TW3CustomControl.SetEnabled
};
/// TW3ControlSizeInfo = record
///  [line: 176, column: 3, file: SmartCL.Components]
function Copy$TW3ControlSizeInfo(s,d) {
   return d;
}
function Clone$TW3ControlSizeInfo($) {
   return {

   }
}
/// TW3CustomFont = class (TObject)
///  [line: 25, column: 3, file: SmartCL.Fonts]
var TW3CustomFont = {
   $ClassName:"TW3CustomFont",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FOnChange = null;
   }
   /// function TW3CustomFont.GetColor() : TColor
   ///  [line: 382, column: 24, file: SmartCL.Fonts]
   ,GetColor$1:function(Self) {
      var Result = {v:0};
      try {
         var mRef$6 = undefined;
         var mText$2 = "";
         mRef$6 = TW3CustomFont.GetHandle$4$(Self);
         if (mRef$6) {
            mText$2 = w3_getStyleAsStr(mRef$6,"color");
            Result.v = StrToColor(mText$2);
         } else {
            throw EW3Exception.CreateFmt($New(EW3FontError),$R[0],["TW3CustomFont.GetColor", TObject.ClassName(Self.ClassType), $R[4]]);
         }
      } finally {return Result.v}
   }
   /// function TW3CustomFont.GetName() : String
   ///  [line: 324, column: 24, file: SmartCL.Fonts]
   ,GetName:function(Self) {
      var Result = "";
      var mHandle = undefined;
      mHandle = TW3CustomFont.GetHandle$4$(Self);
      if (mHandle) {
         Result = w3_getStyleAsStr(mHandle,"font-family");
      } else {
         throw EW3Exception.CreateFmt($New(EW3FontError),$R[0],["TW3CustomFont.GetName", TObject.ClassName(Self.ClassType), $R[4]]);
      }
      return Result
   }
   /// function TW3CustomFont.GetSize() : Integer
   ///  [line: 353, column: 24, file: SmartCL.Fonts]
   ,GetSize:function(Self) {
      var Result = 0;
      var mRef$7 = undefined;
      mRef$7 = TW3CustomFont.GetHandle$4$(Self);
      if (mRef$7) {
         Result = w3_getStyleAsInt(mRef$7,"font-size");
      } else {
         throw EW3Exception.CreateFmt($New(EW3FontError),$R[0],["TW3CustomFont.GetSize", TObject.ClassName(Self.ClassType), $R[4]]);
      }
      return Result
   }
   /// function TW3CustomFont.GetWeight() : String
   ///  [line: 414, column: 24, file: SmartCL.Fonts]
   ,GetWeight:function(Self) {
      var Result = "";
      var mRef$8 = undefined;
      mRef$8 = TW3CustomFont.GetHandle$4$(Self);
      if (mRef$8) {
         Result = w3_getStyleAsStr(mRef$8,"font-weight");
      } else {
         throw EW3Exception.CreateFmt($New(EW3FontError),$R[0],["TW3CustomFont.GetWeight", TObject.ClassName(Self.ClassType), $R[4]]);
      }
      return Result
   }
   /// procedure TW3CustomFont.SetColor(aNewColor: TColor)
   ///  [line: 398, column: 25, file: SmartCL.Fonts]
   ,SetColor$2:function(Self, aNewColor) {
      var mRef$9 = undefined;
      mRef$9 = TW3CustomFont.GetHandle$4$(Self);
      if (mRef$9) {
         w3_setStyle(mRef$9,"color",ColorToWebStr(aNewColor,255));
         if (Self.FOnChange) {
            Self.FOnChange(Self);
         }
      } else {
         throw EW3Exception.CreateFmt($New(EW3FontError),$R[0],["TW3CustomFont.SetColor", TObject.ClassName(Self.ClassType), $R[4]]);
      }
   }
   /// procedure TW3CustomFont.SetName(aNewName: String)
   ///  [line: 337, column: 25, file: SmartCL.Fonts]
   ,SetName$1:function(Self, aNewName) {
      var mHandle$1 = undefined;
      mHandle$1 = TW3CustomFont.GetHandle$4$(Self);
      if (mHandle$1) {
         w3_setStyle(mHandle$1,"font-family",aNewName);
         if (Self.FOnChange) {
            Self.FOnChange(Self);
         }
      } else {
         throw EW3Exception.CreateFmt($New(EW3FontError),$R[0],["TW3CustomFont.SetName", TObject.ClassName(Self.ClassType), $R[4]]);
      }
   }
   /// procedure TW3CustomFont.SetSize(aNewSize: Integer)
   ///  [line: 366, column: 25, file: SmartCL.Fonts]
   ,SetSize$5:function(Self, aNewSize) {
      var mRef$10 = undefined;
      mRef$10 = TW3CustomFont.GetHandle$4$(Self);
      if (mRef$10) {
         w3_setStyle(mRef$10,"font-size",TInteger.ToPxStr(aNewSize));
         if (Self.FOnChange) {
            Self.FOnChange(Self);
         }
      } else {
         throw EW3Exception.CreateFmt($New(EW3FontError),$R[0],["TW3CustomFont.SetSize", TObject.ClassName(Self.ClassType), $R[4]]);
      }
   }
   /// procedure TW3CustomFont.SetWeight(aNewWeight: String)
   ///  [line: 427, column: 25, file: SmartCL.Fonts]
   ,SetWeight:function(Self, aNewWeight) {
      var mRef$11 = undefined;
      mRef$11 = TW3CustomFont.GetHandle$4$(Self);
      if (mRef$11) {
         w3_setStyle(mRef$11,"font-weight",aNewWeight);
         if (Self.FOnChange) {
            Self.FOnChange(Self);
         }
      } else {
         throw EW3Exception.CreateFmt($New(EW3FontError),$R[0],["TW3CustomFont.SetWeight", TObject.ClassName(Self.ClassType), $R[4]]);
      }
   }
   ,Destroy:TObject.Destroy
   ,GetHandle$4$:function($){return $.ClassType.GetHandle$4($)}
};
/// TW3ControlFont = class (TW3CustomFont)
///  [line: 320, column: 3, file: SmartCL.Components]
var TW3ControlFont = {
   $ClassName:"TW3ControlFont",$Parent:TW3CustomFont
   ,$Init:function ($) {
      TW3CustomFont.$Init($);
      $.FOwner$3 = null;
   }
   /// function TW3ControlFont.GetHandle() : THandle
   ///  [line: 1621, column: 25, file: SmartCL.Components]
   ,GetHandle$4:function(Self) {
      return Self.FOwner$3.FHandle$3;
   }
   /// constructor TW3ControlFont.Create(AOwner: TW3CustomControl)
   ///  [line: 1612, column: 28, file: SmartCL.Components]
   ,Create$47:function(Self, AOwner$5) {
      TObject.Create(Self);
      if (AOwner$5) {
         Self.FOwner$3 = AOwner$5;
      } else {
         EW3TagObj.RaiseCntErrMethod("TW3ControlFont.Create",Self,"Owner was nil error");
      }
      return Self
   }
   ,Destroy:TObject.Destroy
   ,GetHandle$4$:function($){return $.ClassType.GetHandle$4($)}
};
/// TW3ControlBackground = class (TW3OwnedObject)
///  [line: 331, column: 3, file: SmartCL.Components]
var TW3ControlBackground = {
   $ClassName:"TW3ControlBackground",$Parent:TW3OwnedObject
   ,$Init:function ($) {
      TW3OwnedObject.$Init($);
      $.FHandle$4 = undefined;
   }
   /// function TW3ControlBackground.AcceptParent(aObject: TObject) : Boolean
   ///  [line: 983, column: 31, file: SmartCL.Components]
   ,AcceptParent:function(Self, aObject$2) {
      var Result = false;
      Result = (aObject$2!==null)&&$Is(aObject$2,TW3MovableControl);
      if (Result) {
         Self.FHandle$4 = $As(aObject$2,TW3MovableControl).FHandle$3;
      }
      return Result
   }
   ,Destroy:TObject.Destroy
   ,AcceptParent$:function($){return $.ClassType.AcceptParent.apply($.ClassType, arguments)}
   ,Create$15:TW3OwnedObject.Create$15
};
/// TW3Constraints = class (TW3OwnedObject)
///  [line: 344, column: 3, file: SmartCL.Components]
var TW3Constraints = {
   $ClassName:"TW3Constraints",$Parent:TW3OwnedObject
   ,$Init:function ($) {
      TW3OwnedObject.$Init($);
   }
   /// function TW3Constraints.AcceptParent(aObject: TObject) : Boolean
   ///  [line: 902, column: 26, file: SmartCL.Components]
   ,AcceptParent:function(Self, aObject$3) {
      return (aObject$3!==null)&&$Is(aObject$3,TW3TagObj);
   }
   /// function TW3Constraints.GetMaxHeight() : Integer
   ///  [line: 952, column: 26, file: SmartCL.Components]
   ,GetMaxHeight:function(Self) {
      var Result = 0;
      var mRef$12 = undefined;
      mRef$12 = $As(Self.FOwner,TW3MovableControl).FHandle$3;
      if (mRef$12) {
         Result = w3_getStyleAsInt(mRef$12,"max-height");
      }
      return Result
   }
   /// function TW3Constraints.GetMaxWidth() : Integer
   ///  [line: 943, column: 26, file: SmartCL.Components]
   ,GetMaxWidth:function(Self) {
      var Result = 0;
      var mRef$13 = undefined;
      mRef$13 = $As(Self.FOwner,TW3MovableControl).FHandle$3;
      if (mRef$13) {
         Result = w3_getStyleAsInt(mRef$13,"max-width");
      }
      return Result
   }
   /// function TW3Constraints.GetMinHeight() : Integer
   ///  [line: 916, column: 26, file: SmartCL.Components]
   ,GetMinHeight:function(Self) {
      var Result = 0;
      var mRef$14 = undefined;
      mRef$14 = $As(Self.FOwner,TW3MovableControl).FHandle$3;
      if (mRef$14) {
         Result = w3_getStyleAsInt(mRef$14,"min-height");
      }
      return Result
   }
   /// function TW3Constraints.GetMinWidth() : Integer
   ///  [line: 907, column: 26, file: SmartCL.Components]
   ,GetMinWidth:function(Self) {
      var Result = 0;
      var mRef$15 = undefined;
      mRef$15 = $As(Self.FOwner,TW3MovableControl).FHandle$3;
      if (mRef$15) {
         Result = w3_getStyleAsInt(mRef$15,"min-width");
      }
      return Result
   }
   /// procedure TW3Constraints.SetMaxHeight(aValue: Integer)
   ///  [line: 970, column: 26, file: SmartCL.Components]
   ,SetMaxHeight:function(Self, aValue$49) {
      var mRef$16 = undefined;
      mRef$16 = $As(Self.FOwner,TW3MovableControl).FHandle$3;
      if (mRef$16) {
         mRef$16.style["max-height"] = TInteger.ToPxStr(aValue$49);
      }
   }
   /// procedure TW3Constraints.SetMaxWidth(aValue: Integer)
   ///  [line: 961, column: 26, file: SmartCL.Components]
   ,SetMaxWidth:function(Self, aValue$50) {
      var mRef$17 = undefined;
      mRef$17 = $As(Self.FOwner,TW3MovableControl).FHandle$3;
      if (mRef$17) {
         mRef$17.style["max-width"] = TInteger.ToPxStr(aValue$50);
      }
   }
   /// procedure TW3Constraints.SetMinHeight(aValue: Integer)
   ///  [line: 934, column: 26, file: SmartCL.Components]
   ,SetMinHeight:function(Self, aValue$51) {
      var mRef$18 = undefined;
      mRef$18 = $As(Self.FOwner,TW3MovableControl).FHandle$3;
      if (mRef$18) {
         mRef$18.style["min-height"] = TInteger.ToPxStr(aValue$51);
      }
   }
   /// procedure TW3Constraints.SetMinWidth(aValue: Integer)
   ///  [line: 925, column: 26, file: SmartCL.Components]
   ,SetMinWidth:function(Self, aValue$52) {
      var mRef$19 = undefined;
      mRef$19 = $As(Self.FOwner,TW3MovableControl).FHandle$3;
      if (mRef$19) {
         mRef$19.style["min-width"] = TInteger.ToPxStr(aValue$52);
      }
   }
   ,Destroy:TObject.Destroy
   ,AcceptParent$:function($){return $.ClassType.AcceptParent.apply($.ClassType, arguments)}
   ,Create$15:TW3OwnedObject.Create$15
};
/// TW3AttrAccess = class (TObject)
///  [line: 120, column: 3, file: SmartCL.Components]
var TW3AttrAccess = {
   $ClassName:"TW3AttrAccess",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FHandle$5 = undefined;
   }
   /// function TW3AttrAccess.Exists(aName: String) : Boolean
   ///  [line: 746, column: 25, file: SmartCL.Components]
   ,Exists:function(Self, aName) {
      var Result = false;
      var mName = "";
      mName = ("data-"+aName).toLowerCase();
      Result = (Self.FHandle$5.hasAttribute(mName)?true:false);
      return Result
   }
   /// function TW3AttrAccess.Read(aName: String) : Variant
   ///  [line: 754, column: 25, file: SmartCL.Components]
   ,Read:function(Self, aName$1) {
      var Result = undefined;
      var mName$1 = "";
      mName$1 = ("data-"+aName$1).toLowerCase();
      try {
         if (Self.FHandle$5.hasAttribute(mName$1)) {
            Result = Self.FHandle$5.getAttribute(mName$1);
         } else {
            Result = null;
         }
      } catch ($e) {
         var e$8 = $W($e);
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[13],[e$8.FMessage]);
      }
      return Result
   }
   /// procedure TW3AttrAccess.Write(aName: String; const aValue: Variant)
   ///  [line: 769, column: 25, file: SmartCL.Components]
   ,Write:function(Self, aName$2, aValue$53) {
      var mName$2 = "";
      mName$2 = ("data-"+aName$2).toLowerCase();
      try {
         Self.FHandle$5.setAttribute(mName$2,aValue$53);
      } catch ($e) {
         var e$9 = $W($e);
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[14],[e$9.FMessage]);
      }
   }
   /// constructor TW3AttrAccess.Create(const aHandle: THandle)
   ///  [line: 738, column: 27, file: SmartCL.Components]
   ,Create$48:function(Self, aHandle) {
      TObject.Create(Self);
      if (TBufferHandleHelper$Valid$1(aHandle)) {
         Self.FHandle$5 = aHandle;
      } else {
         throw Exception.Create($New(Exception),$R[12]);
      }
      return Self
   }
   ,Destroy:TObject.Destroy
};
/// TW3AnimationFrame = class (TObject)
///  [line: 683, column: 3, file: SmartCL.Components]
var TW3AnimationFrame = {
   $ClassName:"TW3AnimationFrame",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// procedure TW3AnimationFrame.Perform()
   ///  [line: 876, column: 35, file: SmartCL.Components]
   ,Perform:function() {
      var i$18 = 0;
      var callbacks = [];
      var controls = [];
      if (vScheduledCallbacks.length>0) {
         callbacks = vScheduledCallbacks;
         vScheduledCallbacks = [];
         var $temp14;
         for(i$18=0,$temp14=callbacks.length;i$18<$temp14;i$18++) {
            callbacks[i$18]();
         }
      }
      if (vScheduledControls.length>0) {
         controls = vScheduledControls;
         vScheduledControls = [];
         var $temp15;
         for(i$18=0,$temp15=controls.length;i$18<$temp15;i$18++) {
            TW3GraphicControl.Refresh(controls[i$18]);
         }
      }
      var $temp16;
      for(i$18=0,$temp16=vOnPerform.length;i$18<$temp16;i$18++) {
         vOnPerform[i$18]();
      }
   }
   /// procedure TW3AnimationFrame.ScheduleRefresh(control: TW3GraphicControl)
   ///  [line: 862, column: 35, file: SmartCL.Components]
   ,ScheduleRefresh:function(control$1) {
      vScheduledControls.push(control$1);
      if (!vPending) {
         w3_RequestAnimationFrame(TW3AnimationFrame.Perform);
      }
   }
   ,Destroy:TObject.Destroy
};
/// TShiftStateEnum enumeration
///  [line: 40, column: 3, file: SmartCL.Components]
var TShiftStateEnum = [ "ssShift", "ssAlt", "ssCtrl", "ssMeta", "ssLeft", "ssRight", "ssMiddle" ];
/// TShiftState = class (TObject)
///  [line: 76, column: 3, file: SmartCL.Components]
var TShiftState = {
   $ClassName:"TShiftState",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FEvent = $.FMouseEvent = null;
      $.FMouseButtons = 0;
   }
   /// function TShiftState.CheckShiftStateEnum(value: TShiftStateEnum) : Boolean
   ///  [line: 809, column: 22, file: SmartCL.Components]
   ,CheckShiftStateEnum:function(Self, value$6) {
      var Result = false;
      if (Self.FEvent===null) {
         Result = false;
      } else {
         switch (value$6) {
            case 0 :
               Result = Self.FEvent.shiftKey;
               break;
            case 1 :
               Result = Self.FEvent.altKey;
               break;
            case 2 :
               Result = Self.FEvent.ctrlKey;
               break;
            case 3 :
               Result = Self.FEvent.metaKey;
               break;
            case 4 :
               Result = ((Self.FMouseButtons&1)!=0);
               break;
            case 5 :
               Result = ((Self.FMouseButtons&4)!=0);
               break;
            case 6 :
               Result = ((Self.FMouseButtons&2)!=0);
               break;
         }
      }
      return Result
   }
   /// function TShiftState.Current() : TShiftState
   ///  [line: 837, column: 28, file: SmartCL.Components]
   ,Current:function() {
      var Result = null;
      if (vCurrent===null) {
         vCurrent = TObject.Create($New(TShiftState));
      }
      Result = vCurrent;
      return Result
   }
   /// procedure TShiftState.SetMouseEvent(evt: JMouseEvent)
   ///  [line: 831, column: 23, file: SmartCL.Components]
   ,SetMouseEvent:function(Self, evt$8) {
      Self.FEvent = evt$8;
      Self.FMouseEvent = evt$8;
   }
   ,Destroy:TObject.Destroy
};
/// TMouseButton enumeration
///  [line: 38, column: 3, file: SmartCL.Components]
var TMouseButton = [ "mbLeft", "mbMiddle", "mbRight" ];
/// TCustomAppContainer = class (TW3Component)
///  [line: 285, column: 3, file: SmartCL.Components]
var TCustomAppContainer = {
   $ClassName:"TCustomAppContainer",$Parent:TW3Component
   ,$Init:function ($) {
      TW3Component.$Init($);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AfterUpdate:TW3TagObj.AfterUpdate
   ,FinalizeObject:TW3Component.FinalizeObject
   ,InitializeObject:TW3Component.InitializeObject
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3Component.Showing
   ,StyleTagObject:TW3TagObj.StyleTagObject
   ,Create$44:TW3Component.Create$44
   ,Criar$1:TW3Component.Criar$1
};
/// TDocumentBody = class (TCustomAppContainer)
///  [line: 293, column: 3, file: SmartCL.Components]
var TDocumentBody = {
   $ClassName:"TDocumentBody",$Parent:TCustomAppContainer
   ,$Init:function ($) {
      TCustomAppContainer.$Init($);
   }
   /// function TDocumentBody.GetHeight() : Integer
   ///  [line: 1602, column: 24, file: SmartCL.Components]
   ,GetHeight$5:function(Self) {
      return parseInt(window.innerHeight,10);
   }
   /// function TDocumentBody.GetWidth() : Integer
   ///  [line: 1597, column: 24, file: SmartCL.Components]
   ,GetWidth$5:function(Self) {
      return parseInt(window.innerWidth,10);
   }
   /// function TDocumentBody.makeElementTagId() : String
   ///  [line: 1540, column: 24, file: SmartCL.Components]
   ,MakeElementTagId:function(Self) {
      return "";
   }
   /// function TDocumentBody.makeElementTagObj() : THandle
   ///  [line: 1564, column: 24, file: SmartCL.Components]
   ,MakeElementTagObj:function(Self) {
      return document.body;
   }
   /// procedure TDocumentBody.StyleTagObject()
   ///  [line: 1535, column: 25, file: SmartCL.Components]
   ,StyleTagObject:function(Self) {
      /* null */
   }
   ,Destroy:TW3TagObj.Destroy
   ,AfterUpdate:TW3TagObj.AfterUpdate
   ,FinalizeObject:TW3Component.FinalizeObject
   ,InitializeObject:TW3Component.InitializeObject
   ,MakeElementTagId$:function($){return $.ClassType.MakeElementTagId($)}
   ,MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)}
   ,Showing:TW3Component.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,Create$44:TW3Component.Create$44
   ,Criar$1:TW3Component.Criar$1
};
/// EW3TagObj = class (EW3Exception)
///  [line: 30, column: 3, file: SmartCL.Components]
var EW3TagObj = {
   $ClassName:"EW3TagObj",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   /// procedure EW3TagObj.RaiseCntErrMethod(methName: String; instance: TObject; msg: String)
   ///  [line: 799, column: 27, file: SmartCL.Components]
   ,RaiseCntErrMethod:function(methName, instance, msg) {
      throw EW3Exception.CreateFmt($New(EW3TagObj),$R[0],[methName, (instance!==null)?TObject.ClassName(instance.ClassType):"nil", msg]);
   }
   ,Destroy:Exception.Destroy
};
function W3FontDetector() {
   var Result = null;
   if (_FontDetect===null) {
      _FontDetect = TW3FontDetector.Create$49($New(TW3FontDetector));
   }
   Result = _FontDetect;
   return Result
};
/// TW3TextMetric = record
///  [line: 54, column: 3, file: SmartCL.Fonts]
function Copy$TW3TextMetric(s,d) {
   d.tmWidth=s.tmWidth;
   d.tmHeight=s.tmHeight;
   return d;
}
function Clone$TW3TextMetric($) {
   return {
      tmWidth:$.tmWidth,
      tmHeight:$.tmHeight
   }
}
/// TW3FontInfo = record
///  [line: 64, column: 3, file: SmartCL.Fonts]
function Copy$TW3FontInfo(s,d) {
   d.fiName=s.fiName;
   d.fiSize=s.fiSize;
   return d;
}
function Clone$TW3FontInfo($) {
   return {
      fiName:$.fiName,
      fiSize:$.fiSize
   }
}
/// TW3FontDetector = class (TObject)
///  [line: 77, column: 3, file: SmartCL.Fonts]
var TW3FontDetector = {
   $ClassName:"TW3FontDetector",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FBaseFonts = [];
      $.FdefaultHeight = $.FdefaultWidth = undefined;
      $.Fh = undefined;
      $.Fs = undefined;
      $.FtestSize = "72px";
      $.FtestString = "mmmmmmmmmmlli";
   }
   /// constructor TW3FontDetector.Create()
   ///  [line: 150, column: 29, file: SmartCL.Fonts]
   ,Create$49:function(Self) {
      var x$49 = 0;
      TObject.Create(Self);
      Self.FBaseFonts.push("monospace");
      Self.FBaseFonts.push("sans-serif");
      Self.FBaseFonts.push("serif");
      Self.Fh = document.body;
      Self.Fs = document.createElement("span");
      Self.Fs.style.fontSize = Self.FtestSize;
      Self.Fs.innerHTML = Self.FtestString;
      Self.FdefaultWidth = TVariant.CreateObject();
      Self.FdefaultHeight = TVariant.CreateObject();
      if (Self.FBaseFonts.length>0) {
         var $temp17;
         for(x$49=0,$temp17=Self.FBaseFonts.length;x$49<$temp17;x$49++) {
            Self.Fs.style.fontFamily = Self.FBaseFonts[x$49];
            Self.Fh.appendChild(Self.Fs);
            Self.FdefaultWidth[Self.FBaseFonts[x$49]] = Self.Fs.offsetWidth;
            Self.FdefaultHeight[Self.FBaseFonts[x$49]] = Self.Fs.offsetHeight;
            Self.Fh.removeChild(Self.Fs);
         }
      }
      return Self
   }
   /// function TW3FontDetector.Detect(aFont: String) : Boolean
   ///  [line: 212, column: 26, file: SmartCL.Fonts]
   ,Detect:function(Self, aFont) {
      var Result = false;
      var x$50 = 0;
      aFont = Trim$_String_(aFont);
      if (aFont.length>0) {
         if (Self.FBaseFonts.length>0) {
            var $temp18;
            for(x$50=0,$temp18=Self.FBaseFonts.length;x$50<$temp18;x$50++) {
               Self.Fs.style.fontFamily = (aFont+","+Self.FBaseFonts[x$50]);
               Self.Fh.appendChild(Self.Fs);
               Result = (Self.Fs.offsetWidth!=Self.FdefaultWidth[Self.FBaseFonts[x$50]])&&(Self.Fs.offsetHeight!=Self.FdefaultHeight[Self.FBaseFonts[x$50]]);
               Self.Fh.removeChild(Self.Fs);
               if (Result) {
                  break;
               }
            }
         }
      }
      return Result
   }
   /// function TW3FontDetector.getFontInfo(const aHandle: THandle) : TW3FontInfo
   ///  [line: 178, column: 26, file: SmartCL.Fonts]
   ,getFontInfo$2:function(Self, aHandle$1) {
      var Result = {fiName:"",fiSize:0};
      var mName$3 = "";
      var mSize = 0;
      var mData$6 = [];
      var x$51 = 0;
      Result.fiSize = -1;
      if (TBufferHandleHelper$Valid$1(aHandle$1)) {
         mName$3 = w3_getStyleAsStr(aHandle$1,"font-family");
         mSize = w3_getStyleAsInt(aHandle$1,"font-size");
         if (mName$3.length>0) {
            
        mData$6 = (mName$3).split(",");
      if (mData$6.length>0) {
               var $temp19;
               for(x$51=0,$temp19=mData$6.length;x$51<$temp19;x$51++) {
                  if (TW3FontDetector.Detect(Self,mData$6[x$51])) {
                     Result.fiName = mData$6[x$51];
                     Result.fiSize = mSize;
                     break;
                  }
               }
            }
         }
      }
      return Result
   }
   /// function TW3FontDetector.MeasureText(aFontName: String; aFontSize: Integer; aFixedWidth: Integer; aContent: String) : TW3TextMetric
   ///  [line: 278, column: 26, file: SmartCL.Fonts]
   ,MeasureText$5:function(Self, aFontName, aFontSize, aFixedWidth, aContent) {
      var Result = {tmWidth:0,tmHeight:0};
      var mElement = undefined;
      if (TW3FontDetector.Detect(Self,aFontName)) {
         aContent = Trim$_String_(aContent);
         if (aContent.length>0) {
            mElement = document.createElement("p");
            if (mElement) {
               mElement.style["font-family"] = aFontName;
               mElement.style["font-size"] = TInteger.ToPxStr(aFontSize);
               mElement.style["overflow"] = "scroll";
               mElement.style.maxWidth = TInteger.ToPxStr(aFixedWidth);
               mElement.style.width = TInteger.ToPxStr(aFixedWidth);
               mElement.innerHTML = aContent;
               Self.Fh.appendChild(mElement);
               Result.tmWidth = parseInt(mElement.scrollWidth,10);
               Result.tmHeight = parseInt(mElement.scrollHeight,10);
               Self.Fh.removeChild(mElement);
            }
         }
      }
      return Result
   }
   /// function TW3FontDetector.MeasureText(aFontName: String; aFontSize: Integer; aContent: String) : TW3TextMetric
   ///  [line: 246, column: 26, file: SmartCL.Fonts]
   ,MeasureText$4:function(Self, aFontName$1, aFontSize$1, aContent$1) {
      var Result = {tmWidth:0,tmHeight:0};
      var mElement$1 = undefined;
      if (TW3FontDetector.Detect(Self,aFontName$1)) {
         aContent$1 = Trim$_String_(aContent$1);
         if (aContent$1.length>0) {
            mElement$1 = document.createElement("p");
            if (mElement$1) {
               mElement$1.style["font-family"] = aFontName$1;
               mElement$1.style["font-size"] = TInteger.ToPxStr(aFontSize$1);
               mElement$1.style["overflow"] = "scroll";
               mElement$1.style["display"] = "inline-block";
               mElement$1.style["white-space"] = "nowrap";
               mElement$1.innerHTML = StrReplace(aContent$1," ","_");
               Self.Fh.appendChild(mElement$1);
               Result.tmWidth = parseInt(mElement$1.scrollWidth,10);
               Result.tmHeight = parseInt(mElement$1.scrollHeight,10);
               Self.Fh.removeChild(mElement$1);
            }
         }
      }
      return Result
   }
   /// function TW3FontDetector.MeasureText(aFontInfo: TW3FontInfo; aFixedWidth: Integer; aContent: String) : TW3TextMetric
   ///  [line: 233, column: 26, file: SmartCL.Fonts]
   ,MeasureText$3:function(Self, aFontInfo, aFixedWidth$1, aContent$2) {
      return TW3FontDetector.MeasureText$5(Self,aFontInfo.fiName,aFontInfo.fiSize,aFixedWidth$1,aContent$2);
   }
   /// function TW3FontDetector.MeasureText(aFontInfo: TW3FontInfo; aContent: String) : TW3TextMetric
   ///  [line: 240, column: 26, file: SmartCL.Fonts]
   ,MeasureText$2:function(Self, aFontInfo$1, aContent$3) {
      return TW3FontDetector.MeasureText$4(Self,aFontInfo$1.fiName,aFontInfo$1.fiSize,aContent$3);
   }
   ,Destroy:TObject.Destroy
};
/// EW3FontError = class (EW3Exception)
///  [line: 22, column: 3, file: SmartCL.Fonts]
var EW3FontError = {
   $ClassName:"EW3FontError",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// TW3TextMetrics = record
///  [line: 115, column: 3, file: SmartCL.Graphics]
function Copy$TW3TextMetrics(s,d) {
   return d;
}
function Clone$TW3TextMetrics($) {
   return {

   }
}
/// TW3ImageData = class (TObject)
///  [line: 140, column: 3, file: SmartCL.Graphics]
var TW3ImageData = {
   $ClassName:"TW3ImageData",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   ,Destroy:TObject.Destroy
};
/// TW3CustomGraphicContext = class (TObject)
///  [line: 28, column: 3, file: SmartCL.Graphics]
var TW3CustomGraphicContext = {
   $ClassName:"TW3CustomGraphicContext",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   ,Destroy:TObject.Destroy
   ,GetDC$:function($){return $.ClassType.GetDC($)}
   ,GetHandle$:function($){return $.ClassType.GetHandle($)}
   ,GetHeight$:function($){return $.ClassType.GetHeight($)}
   ,GetOwnsReference$:function($){return $.ClassType.GetOwnsReference($)}
   ,GetWidth$:function($){return $.ClassType.GetWidth($)}
   ,ReleaseDC$:function($){return $.ClassType.ReleaseDC($)}
   ,SetSize$:function($){return $.ClassType.SetSize.apply($.ClassType, arguments)}
};
/// TW3ControlGraphicContext = class (TW3CustomGraphicContext)
///  [line: 54, column: 3, file: SmartCL.Graphics]
var TW3ControlGraphicContext = {
   $ClassName:"TW3ControlGraphicContext",$Parent:TW3CustomGraphicContext
   ,$Init:function ($) {
      TW3CustomGraphicContext.$Init($);
      $.FCtrlTag = undefined;
   }
   /// constructor TW3ControlGraphicContext.Create(const aControlHandle: THandle)
   ///  [line: 726, column: 38, file: SmartCL.Graphics]
   ,Create$38:function(Self, aControlHandle) {
      TObject.Create(Self);
      if (aControlHandle) {
         Self.FCtrlTag = aControlHandle;
      } else {
         throw Exception.Create($New(Exception),"Control handle is invalid error");
      }
      return Self
   }
   /// function TW3ControlGraphicContext.GetDC() : THandle
   ///  [line: 735, column: 35, file: SmartCL.Graphics]
   ,GetDC:function(Self) {
      return Self.FCtrlTag.getContext("2d");
   }
   /// function TW3ControlGraphicContext.GetHandle() : THandle
   ///  [line: 740, column: 35, file: SmartCL.Graphics]
   ,GetHandle:function(Self) {
      return Self.FCtrlTag;
   }
   /// function TW3ControlGraphicContext.GetHeight() : Integer
   ///  [line: 750, column: 35, file: SmartCL.Graphics]
   ,GetHeight:function(Self) {
      return w3_getPropertyAsInt(Self.FCtrlTag,"height");
   }
   /// function TW3ControlGraphicContext.GetOwnsReference() : Boolean
   ///  [line: 755, column: 35, file: SmartCL.Graphics]
   ,GetOwnsReference:function(Self) {
      return false;
   }
   /// function TW3ControlGraphicContext.GetWidth() : Integer
   ///  [line: 745, column: 35, file: SmartCL.Graphics]
   ,GetWidth:function(Self) {
      return w3_getPropertyAsInt(Self.FCtrlTag,"width");
   }
   /// procedure TW3ControlGraphicContext.ReleaseDC()
   ///  [line: 765, column: 36, file: SmartCL.Graphics]
   ,ReleaseDC:function(Self) {
      /* null */
   }
   /// procedure TW3ControlGraphicContext.SetSize(aNewWidth: Integer; aNewHeight: Integer)
   ///  [line: 760, column: 36, file: SmartCL.Graphics]
   ,SetSize:function(Self, aNewWidth, aNewHeight) {
      /* null */
   }
   ,Destroy:TObject.Destroy
   ,GetDC$:function($){return $.ClassType.GetDC($)}
   ,GetHandle$:function($){return $.ClassType.GetHandle($)}
   ,GetHeight$:function($){return $.ClassType.GetHeight($)}
   ,GetOwnsReference$:function($){return $.ClassType.GetOwnsReference($)}
   ,GetWidth$:function($){return $.ClassType.GetWidth($)}
   ,ReleaseDC$:function($){return $.ClassType.ReleaseDC($)}
   ,SetSize$:function($){return $.ClassType.SetSize.apply($.ClassType, arguments)}
};
/// TW3CanvasPattern = class (TObject)
///  [line: 133, column: 3, file: SmartCL.Graphics]
var TW3CanvasPattern = {
   $ClassName:"TW3CanvasPattern",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   ,Destroy:TObject.Destroy
};
/// TW3CanvasGradient = class (TObject)
///  [line: 119, column: 3, file: SmartCL.Graphics]
var TW3CanvasGradient = {
   $ClassName:"TW3CanvasGradient",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FHandle$2 = undefined;
   }
   /// constructor TW3CanvasGradient.Create(const aHandle: THandle)
   ///  [line: 603, column: 31, file: SmartCL.Graphics]
   ,Create$39:function(Self, aHandle$2) {
      TObject.Create(Self);
      Self.FHandle$2 = aHandle$2;
      return Self
   }
   ,Destroy:TObject.Destroy
};
/// TW3Canvas = class (TObject)
///  [line: 181, column: 3, file: SmartCL.Graphics]
var TW3Canvas = {
   $ClassName:"TW3Canvas",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FContext = $.FDC = null;
   }
   /// procedure TW3Canvas.BeginPath()
   ///  [line: 1130, column: 21, file: SmartCL.Graphics]
   ,BeginPath:function(Self) {
      Self.FDC.beginPath();
   }
   /// procedure TW3Canvas.ClosePath()
   ///  [line: 1135, column: 21, file: SmartCL.Graphics]
   ,ClosePath:function(Self) {
      Self.FDC.closePath();
   }
   /// constructor TW3Canvas.Create(Context: TW3CustomGraphicContext)
   ///  [line: 896, column: 23, file: SmartCL.Graphics]
   ,Create$40:function(Self, Context$2) {
      TObject.Create(Self);
      Self.FContext = Context$2;
      if (Self.FContext) {
         Self.FDC = TW3CustomGraphicContext.GetDC$(Self.FContext);
      } else {
         throw Exception.Create($New(Exception),"Invalid canvas context error");
      }
      return Self
   }
   /// procedure TW3Canvas.Ellipse(const aRect: TRectF)
   ///  [line: 1633, column: 21, file: SmartCL.Graphics]
   ,Ellipse$1:function(Self, aRect) {
      Self.FDC.save();
      Self.FDC.translate((aRect.Right+aRect.Left)*0.5,(aRect.Top+aRect.Bottom)*0.5);
      Self.FDC.scale((aRect.Right-aRect.Left)*0.5,(aRect.Top-aRect.Bottom)*0.5);
      Self.FDC.moveTo(1,0);
      Self.FDC.arc(0,0,1,0,6.28318530717959,false);
      Self.FDC.restore();
   }
   /// procedure TW3Canvas.Ellipse(x1: Float; y1: Float; x2: Float; y2: Float)
   ///  [line: 1627, column: 21, file: SmartCL.Graphics]
   ,Ellipse:function(Self, x1$7, y1$7, x2$7, y2$7) {
      var r$4 = {Bottom:0,Left:0,Right:0,Top:0};
      r$4 = CreateBounded(x1$7,y1$7,x2$7,y2$7);
      TW3Canvas.Ellipse$1(Self,r$4);
   }
   /// procedure TW3Canvas.Fill()
   ///  [line: 1175, column: 21, file: SmartCL.Graphics]
   ,Fill:function(Self) {
      Self.FDC.fill();
   }
   /// procedure TW3Canvas.FillRectF(aLeft: Float; aTop: Float; aWidth: Float; aHeight: Float)
   ///  [line: 1070, column: 21, file: SmartCL.Graphics]
   ,FillRectF$2:function(Self, aLeft$4, aTop$4, aWidth$3, aHeight$3) {
      Self.FDC.fillRect(aLeft$4,aTop$4,aWidth$3,aHeight$3);
   }
   /// procedure TW3Canvas.FillTextF(text: String; x: Float; y: Float; maxWidth: Float)
   ///  [line: 1223, column: 21, file: SmartCL.Graphics]
   ,FillTextF:function(Self, text$1, x$52, y$44, maxWidth$1) {
      Self.FDC.fillText(text$1,x$52,y$44,maxWidth$1);
   }
   /// function TW3Canvas.GetFillStyle() : String
   ///  [line: 1572, column: 20, file: SmartCL.Graphics]
   ,GetFillStyle:function(Self) {
      return ""+Self.FDC.fillStyle;
   }
   /// function TW3Canvas.GetFont() : String
   ///  [line: 1468, column: 20, file: SmartCL.Graphics]
   ,GetFont:function(Self) {
      return Self.FDC.font;
   }
   /// procedure TW3Canvas.Rotate(angleRad: Float)
   ///  [line: 1383, column: 21, file: SmartCL.Graphics]
   ,Rotate:function(Self, angleRad) {
      Self.FDC.rotate(angleRad);
   }
   /// procedure TW3Canvas.SetFillStyle(aValue: String)
   ///  [line: 1577, column: 21, file: SmartCL.Graphics]
   ,SetFillStyle:function(Self, aValue$54) {
      Self.FDC.fillStyle = aValue$54;
   }
   /// procedure TW3Canvas.SetFont(aValue: String)
   ///  [line: 1473, column: 21, file: SmartCL.Graphics]
   ,SetFont:function(Self, aValue$55) {
      Self.FDC.font = aValue$55;
   }
   /// procedure TW3Canvas.Translate(tx: Float; ty: Float)
   ///  [line: 1398, column: 21, file: SmartCL.Graphics]
   ,Translate:function(Self, tx, ty) {
      Self.FDC.translate(tx,ty);
   }
   ,Destroy:TObject.Destroy
};
/// JMouseButton enumeration
///  [line: 155, column: 4, file: W3C.DOM]
var JMouseButton = [ "Left", "Middle", "Right" ];
/// JCanvasFillRule enumeration
///  [line: 111, column: 3, file: W3C.Canvas2DContext]
var JCanvasFillRule = [ "cfrNonzero", "cfrEvenodd" ];
/// TW3CSSClassStyleNames = class (TW3OwnedObject)
///  [line: 24, column: 3, file: SmartCL.CssNames]
var TW3CSSClassStyleNames = {
   $ClassName:"TW3CSSClassStyleNames",$Parent:TW3OwnedObject
   ,$Init:function ($) {
      TW3OwnedObject.$Init($);
      $.FCache = [];
      $.FToken = "";
   }
   /// function TW3CSSClassStyleNames.AcceptParent(aObject: TObject) : Boolean
   ///  [line: 73, column: 32, file: SmartCL.CssNames]
   ,AcceptParent:function(Self, aObject$4) {
      return (aObject$4!==null)&&$Is(aObject$4,TW3CustomControl);
   }
   /// constructor TW3CSSClassStyleNames.Create(AOwner: TObject)
   ///  [line: 60, column: 35, file: SmartCL.CssNames]
   ,Create$15:function(Self, AOwner$6) {
      TW3OwnedObject.Create$15(Self,AOwner$6);
      Self.FToken = "class";
      Self.FCache = [];
      return Self
   }
   /// destructor TW3CSSClassStyleNames.Destroy()
   ///  [line: 67, column: 34, file: SmartCL.CssNames]
   ,Destroy:function(Self) {
      Self.FCache.length=0;
      TObject.Destroy(Self);
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,AcceptParent$:function($){return $.ClassType.AcceptParent.apply($.ClassType, arguments)}
   ,Create$15$:function($){return $.ClassType.Create$15.apply($.ClassType, arguments)}
};
/// TW3TouchList = class (TObject)
///  [line: 58, column: 3, file: SmartCL.Touch]
var TW3TouchList = {
   $ClassName:"TW3TouchList",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FObjects = [];
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 62, column: 53, file: SmartCL.Touch]
   ,a$2:function(Self, index$1) {
      return Self.FObjects[index$1];
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 63, column: 34, file: SmartCL.Touch]
   ,a$1:function(Self) {
      return Self.FObjects.length;
   }
   /// procedure TW3TouchList.Clear()
   ///  [line: 131, column: 24, file: SmartCL.Touch]
   ,Clear:function(Self) {
      Self.FObjects.length=0;
   }
   /// procedure TW3TouchList.Update(refObj: JTouchList)
   ///  [line: 141, column: 24, file: SmartCL.Touch]
   ,Update:function(Self, refObj) {
      var mCount$1 = 0;
      var x$53 = 0;
      var mObj$9 = null;
      mCount$1 = refObj.length;
      if (mCount$1==Self.FObjects.length) {
         var $temp20;
         for(x$53=0,$temp20=mCount$1;x$53<$temp20;x$53++) {
            TW3Touch.Consume$1(Self.FObjects[x$53],refObj[x$53]);
         }
      } else {
         TW3TouchList.Clear(Self);
         var $temp21;
         for(x$53=0,$temp21=mCount$1;x$53<$temp21;x$53++) {
            mObj$9 = TObject.Create($New(TW3Touch));
            TW3Touch.Consume$1(mObj$9,refObj[x$53]);
            Self.FObjects.push(mObj$9);
         }
      }
   }
   ,Destroy:TObject.Destroy
};
/// TW3TouchData = class (TObject)
///  [line: 70, column: 3, file: SmartCL.Touch]
var TW3TouchData = {
   $ClassName:"TW3TouchData",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FChanged = $.FTouches = null;
   }
   /// function TW3TouchData.GetTouches() : TW3TouchList
   ///  [line: 180, column: 23, file: SmartCL.Touch]
   ,GetTouches:function(Self) {
      var Result = null;
      if (!Self.FTouches) {
         Self.FTouches = TObject.Create($New(TW3TouchList));
         TW3TouchList.Update(Self.FTouches,event.touches);
      }
      Result = Self.FTouches;
      return Result
   }
   /// procedure TW3TouchData.Update(eventObj: JTouchEvent)
   ///  [line: 172, column: 24, file: SmartCL.Touch]
   ,Update$1:function(Self, eventObj$17) {
      if (Self.FTouches) {
         TW3TouchList.Update(Self.FTouches,eventObj$17.touches);
      }
      if (Self.FChanged) {
         TW3TouchList.Update(Self.FChanged,eventObj$17.changedTouches);
      }
   }
   ,Destroy:TObject.Destroy
};
/// TW3Touch = class (TObject)
///  [line: 34, column: 3, file: SmartCL.Touch]
var TW3Touch = {
   $ClassName:"TW3Touch",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FClientX = $.FClientY = $.FPageX = $.FPageY = $.FScreenX = $.FScreenY = 0;
      $.FIdent = undefined;
      $.FTarget = null;
   }
   /// procedure TW3Touch.Consume(touch: JTouch)
   ///  [line: 104, column: 20, file: SmartCL.Touch]
   ,Consume$1:function(Self, touch) {
      Self.FScreenX = touch.screenX;
      Self.FScreenY = touch.screenY;
      Self.FClientX = touch.clientX;
      Self.FClientY = touch.clientY;
      Self.FPageX = touch.pageX;
      Self.FPageY = touch.pageY;
      Self.FIdent = touch.identifier;
      Self.FTarget = TVariant.AsObject(touch.target);
   }
   ,Destroy:TObject.Destroy
};
/// TW3GestureData = class (TObject)
///  [line: 83, column: 3, file: SmartCL.Touch]
var TW3GestureData = {
   $ClassName:"TW3GestureData",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FRotation = $.FScale = 0;
   }
   /// procedure TW3GestureData.Consume(refObj: THandle)
   ///  [line: 206, column: 26, file: SmartCL.Touch]
   ,Consume$2:function(Self, refObj$1) {
      Self.FRotation = Number(refObj$1.rotation);
      Self.FScale = Number(refObj$1.scale);
   }
   /// procedure TW3GestureData.Update()
   ///  [line: 213, column: 26, file: SmartCL.Touch]
   ,Update$2:function(Self) {
      TW3GestureData.Consume$2(Self,event);
   }
   ,Destroy:TObject.Destroy
};
/// TW3Borders = class (TW3OwnedObject)
///  [line: 56, column: 3, file: SmartCL.Borders]
var TW3Borders = {
   $ClassName:"TW3Borders",$Parent:TW3OwnedObject
   ,$Init:function ($) {
      TW3OwnedObject.$Init($);
      $.FBottom = $.FLeft = $.FRight = $.FTop = null;
   }
   /// function TW3Borders.AcceptParent(AObject: TObject) : Boolean
   ///  [line: 348, column: 21, file: SmartCL.Borders]
   ,AcceptParent:function(Self, AObject) {
      return $Is(AObject,TW3TagObj);
   }
   /// constructor TW3Borders.Create(AOwner: TObject)
   ///  [line: 301, column: 24, file: SmartCL.Borders]
   ,Create$15:function(Self, AOwner$7) {
      TW3OwnedObject.Create$15(Self,AOwner$7);
      Self.FLeft = TW3Border.Create$52($New(TW3Border),Self,0);
      Self.FTop = TW3Border.Create$52($New(TW3Border),Self,1);
      Self.FRight = TW3Border.Create$52($New(TW3Border),Self,2);
      Self.FBottom = TW3Border.Create$52($New(TW3Border),Self,3);
      return Self
   }
   /// destructor TW3Borders.Destroy()
   ///  [line: 310, column: 23, file: SmartCL.Borders]
   ,Destroy:function(Self) {
      TObject.Free(Self.FLeft);
      TObject.Free(Self.FTop);
      TObject.Free(Self.FRight);
      TObject.Free(Self.FBottom);
      TObject.Destroy(Self);
   }
   /// function TW3Borders.GetHSpace() : Integer
   ///  [line: 343, column: 21, file: SmartCL.Borders]
   ,GetHSpace:function(Self) {
      return TW3Border.GetWidth$6(Self.FLeft)+TW3Border.GetPadding(Self.FLeft)+TW3Border.GetWidth$6(Self.FRight)+TW3Border.GetPadding(Self.FRight);
   }
   /// function TW3Borders.GetVSpace() : Integer
   ///  [line: 338, column: 21, file: SmartCL.Borders]
   ,GetVSpace:function(Self) {
      return TW3Border.GetWidth$6(Self.FTop)+TW3Border.GetPadding(Self.FTop)+TW3Border.GetWidth$6(Self.FBottom)+TW3Border.GetPadding(Self.FBottom);
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,AcceptParent$:function($){return $.ClassType.AcceptParent.apply($.ClassType, arguments)}
   ,Create$15$:function($){return $.ClassType.Create$15.apply($.ClassType, arguments)}
};
/// TW3BorderEdgeStyle enumeration
///  [line: 23, column: 3, file: SmartCL.Borders]
var TW3BorderEdgeStyle = [ "besNone", "besSolid", "besDotted", "besDouble", "besGroove", "besInset", "besOutset" ];
/// TW3BorderEdge enumeration
///  [line: 22, column: 3, file: SmartCL.Borders]
var TW3BorderEdge = [ "beLeft", "beTop", "beRight", "beBottom" ];
/// TW3Border = class (TObject)
///  [line: 28, column: 3, file: SmartCL.Borders]
var TW3Border = {
   $ClassName:"TW3Border",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FEdge = 0;
      $.FEdgeName = "";
      $.FOwner$4 = null;
   }
   /// constructor TW3Border.Create(AOwner: TW3Borders; AEdge: TW3BorderEdge)
   ///  [line: 94, column: 23, file: SmartCL.Borders]
   ,Create$52:function(Self, AOwner$8, AEdge) {
      TObject.Create(Self);
      Self.FOwner$4 = AOwner$8;
      Self.FEdge = Self.FEdge;
      switch (AEdge) {
         case 0 :
            Self.FEdgeName = "left";
            break;
         case 1 :
            Self.FEdgeName = "top";
            break;
         case 2 :
            Self.FEdgeName = "right";
            break;
         case 3 :
            Self.FEdgeName = "bottom";
            break;
      }
      return Self
   }
   /// function TW3Border.GetPadding() : Integer
   ///  [line: 131, column: 20, file: SmartCL.Borders]
   ,GetPadding:function(Self) {
      var Result = 0;
      var mRef$20 = undefined;
      var mKey = "";
      Result = 0;
      mRef$20 = $As(Self.FOwner$4.FOwner,TW3TagObj).FHandle$3;
      if (mRef$20) {
         mKey = "padding-"+Self.FEdgeName;
         Result = w3_getStyleAsInt(mRef$20,mKey);
      }
      return Result
   }
   /// function TW3Border.GetWidth() : Integer
   ///  [line: 193, column: 20, file: SmartCL.Borders]
   ,GetWidth$6:function(Self) {
      var Result = 0;
      var mRef$21 = undefined;
      var mKey$1 = "";
      Result = 0;
      mRef$21 = $As(Self.FOwner$4.FOwner,TW3TagObj).FHandle$3;
      if (mRef$21) {
         mKey$1 = "border-"+Self.FEdgeName+"-width";
         Result = w3_getStyleAsInt(mRef$21,mKey$1);
      }
      return Result
   }
   /// procedure TW3Border.SetPadding(aValue: Integer)
   ///  [line: 146, column: 21, file: SmartCL.Borders]
   ,SetPadding:function(Self, aValue$56) {
      var mRef$22 = undefined;
      var mKey$2 = "";
      mRef$22 = $As(Self.FOwner$4.FOwner,TW3TagObj).FHandle$3;
      if (mRef$22) {
         mKey$2 = "padding-"+Self.FEdgeName;
         w3_setStyle(mRef$22,mKey$2,TInteger.ToPxStr(aValue$56));
      } else {
         throw EW3Exception.CreateFmt($New(EW3TagObj),$R[0],["TW3Border.SetPadding", TObject.ClassName(Self.ClassType), $R[15]]);
      }
   }
   /// procedure TW3Border.SetWidth(aValue: Integer)
   ///  [line: 208, column: 21, file: SmartCL.Borders]
   ,SetWidth$2:function(Self, aValue$57) {
      var mRef$23 = undefined;
      var mKey$3 = "";
      mRef$23 = $As(Self.FOwner$4.FOwner,TW3TagObj).FHandle$3;
      if (mRef$23) {
         mKey$3 = "border-"+Self.FEdgeName+"-width";
         w3_setStyle(mRef$23,mKey$3,TInteger.ToPxStr(aValue$57));
      } else {
         throw EW3Exception.CreateFmt($New(EW3TagObj),$R[0],["TW3Border.SetWidth", TObject.ClassName(Self.ClassType), $R[15]]);
      }
   }
   ,Destroy:TObject.Destroy
};
/// TW3DisplayViewArangeType enumeration
///  [line: 54, column: 3, file: SmartCL.Application]
var TW3DisplayViewArangeType = [ "dvaSizeToView", "dvaVStack", "dvaHStack" ];
/// TW3DisplayView = class (TW3CustomControl)
///  [line: 59, column: 3, file: SmartCL.Application]
var TW3DisplayView = {
   $ClassName:"TW3DisplayView",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.FArrange = false;
      $.FArrangeKind = 0;
   }
   /// procedure TW3DisplayView.ArrangeChildren(aKind: TW3DisplayViewArangeType)
   ///  [line: 489, column: 26, file: SmartCL.Application]
   ,ArrangeChildren:function(Self, aKind) {
      var x$54 = 0;
      var dx$6 = 0;
      var dy$6 = 0;
      var mObj$10 = null;
      var mCount$2 = 0;
      var mRect = {Bottom$1:0,Left$1:0,Right$1:0,Top$1:0};
      var wd = 0;
      var hd = 0;
      mCount$2 = TW3Component.GetChildCount(Self);
      if (mCount$2>0) {
         mRect = TW3MovableControl.GetBoundsRect(Self);
         switch (aKind) {
            case 0 :
               wd = TRect$Width$1(mRect);
               hd = TRect$Height$1(mRect);
               var $temp22;
               for(x$54=0,$temp22=mCount$2;x$54<$temp22;x$54++) {
                  mObj$10 = TW3Component.GetChildObject(Self,x$54);
                  if ($Is(mObj$10,TW3CustomControl)&&(!$Is(mObj$10,TW3BlockBox))) {
                     TW3MovableControl.SetSize$4($As(mObj$10,TW3CustomControl),wd,hd);
                  }
               }
               break;
            case 1 :
               dy$6 = mRect.Top$1;
               wd = TRect$Width$1(mRect);
               var $temp23;
               for(x$54=0,$temp23=mCount$2;x$54<$temp23;x$54++) {
                  mObj$10 = TW3Component.GetChildObject(Self,x$54);
                  if ($Is(mObj$10,TW3CustomControl)&&(!$Is(mObj$10,TW3BlockBox))) {
                     hd = TW3MovableControl.GetHeight$4($As(mObj$10,TW3CustomControl));
                     TW3MovableControl.SetBounds$2($As(mObj$10,TW3CustomControl),mRect.Left$1,dy$6,wd,hd);
                     (dy$6+= hd);
                  }
               }
               break;
            case 2 :
               dx$6 = mRect.Left$1;
               hd = TRect$Height$1(mRect);
               var $temp24;
               for(x$54=0,$temp24=mCount$2;x$54<$temp24;x$54++) {
                  mObj$10 = TW3Component.GetChildObject(Self,x$54);
                  if ($Is(mObj$10,TW3CustomControl)&&(!$Is(mObj$10,TW3BlockBox))) {
                     wd = TW3MovableControl.GetWidth$4($As(mObj$10,TW3CustomControl));
                     TW3MovableControl.SetBounds$2($As(mObj$10,TW3CustomControl),dx$6,mRect.Top$1,wd,hd);
                     (dx$6+= wd);
                  }
               }
               break;
         }
      }
   }
   /// procedure TW3DisplayView.InitializeObject()
   ///  [line: 440, column: 26, file: SmartCL.Application]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      Self.FArrange = true;
      Self.FArrangeKind = 0;
   }
   /// procedure TW3DisplayView.ReSize()
   ///  [line: 575, column: 26, file: SmartCL.Application]
   ,Resize:function(Self) {
      TW3MovableControl.Resize(Self);
      if (Self.FArrange) {
         TW3DisplayView.ArrangeChildren(Self,Self.FArrangeKind);
      }
   }
   ,Destroy:TW3TagObj.Destroy
   ,AfterUpdate:TW3CustomControl.AfterUpdate
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3CustomControl.StyleTagObject
   ,Create$44:TW3CustomControl.Create$44
   ,Criar$1:TW3CustomControl.Criar$1
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetWidth:TW3MovableControl.SetWidth
   ,supportAdjustment:TW3MovableControl.supportAdjustment
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyDown:TW3CustomControl.CBKeyDown
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,CBMouseDown:TW3CustomControl.CBMouseDown
   ,CBMouseMove:TW3CustomControl.CBMouseMove
   ,CBMouseUp:TW3CustomControl.CBMouseUp
   ,Invalidate:TW3CustomControl.Invalidate
   ,SetEnabled:TW3CustomControl.SetEnabled
};
/// TW3Display = class (TW3CustomControl)
///  [line: 75, column: 3, file: SmartCL.Application]
var TW3Display = {
   $ClassName:"TW3Display",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.FFooter = $.FHeader = $.FOnOrient = $.FView = null;
   }
   /// procedure TW3Display.FinalizeObject()
   ///  [line: 594, column: 22, file: SmartCL.Application]
   ,FinalizeObject:function(Self) {
      TObject.Free(Self.FView);
      if (Self.FHeader) {
         TObject.Free(Self.FHeader);
      }
      if (Self.FFooter) {
         TObject.Free(Self.FFooter);
      }
      TW3CustomControl.FinalizeObject(Self);
   }
   /// function TW3Display.GetHeightOfChildren() : Integer
   ///  [line: 615, column: 21, file: SmartCL.Application]
   ,GetHeightOfChildren:function(Self) {
      var Result = 0;
      var x$55 = 0;
      var mObj$11 = null;
      var $temp25;
      for(x$55=0,$temp25=TW3Component.GetChildCount(Self);x$55<$temp25;x$55++) {
         mObj$11 = TW3Component.GetChildObject(Self,x$55);
         if (((mObj$11!==Self.FView)&&$Is(mObj$11,TW3CustomControl))&&(!$Is(mObj$11,TW3BlockBox))) {
            (Result+= TW3MovableControl.GetHeight$4($As(mObj$11,TW3CustomControl)));
         }
      }
      return Result
   }
   /// procedure TW3Display.InitializeObject()
   ///  [line: 587, column: 22, file: SmartCL.Application]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      Self.FView = TW3Component.Create$44$($New(TW3DisplayView),Self);
      TW3MovableControl.SetTop(Self.FView,5);
   }
   /// procedure TW3Display.PositionFormInView(aForm: TW3CustomForm)
   ///  [line: 659, column: 22, file: SmartCL.Application]
   ,PositionFormInView:function(Self, aForm$3) {
      var mApp = null;
      var dx$7 = 0;
      var dy$7 = 0;
      if (aForm$3) {
         mApp = Application();
         if ((mApp!==null)&&(!mApp.FTerminated)) {
            dx$7 = TW3ScrollInfo.GetScrollLeft(TW3CustomControl.GetScrollInfo(Self.FView));
            dy$7 = TW3ScrollInfo.GetScrollTop(TW3CustomControl.GetScrollInfo(Self.FView));
            TW3MovableControl.SetBounds$2(aForm$3,dx$7,dy$7,TW3MovableControl.GetWidth$4(Self.FView),TW3MovableControl.GetHeight$4(Self.FView));
         }
      } else {
         throw EW3Exception.CreateFmt($New(EW3Screen),$R[0],["PositionFormInView", TObject.ClassName(Self.ClassType), "Form parameter was NIL error"]);
      }
   }
   /// procedure TW3Display.ReSize()
   ///  [line: 628, column: 22, file: SmartCL.Application]
   ,Resize:function(Self) {
      var mTotal = 0;
      var mList = [];
      var x$56 = 0;
      var dy$8 = 0;
      var mObj$12 = null;
      TW3MovableControl.Resize(Self);
      mTotal = TW3Display.GetHeightOfChildren(Self);
      TW3MovableControl.SetHeight$(Self.FView,TW3MovableControl.GetHeight$4(Self)-mTotal);
      mList = TW3CustomControl.GetChildrenSortedByYPos(Self);
      dy$8 = 0;
      var $temp26;
      for(x$56=0,$temp26=mList.length;x$56<$temp26;x$56++) {
         mObj$12 = $As(mList[x$56],TW3CustomControl);
         if ($Is(mObj$12,TW3BlockBox)) {
            TW3MovableControl.SetBounds$2(mObj$12,0,0,TW3MovableControl.GetWidth$4(Self),TW3MovableControl.GetHeight$4(Self));
         } else {
            TW3MovableControl.SetBounds$2(mObj$12,0,dy$8,TW3MovableControl.GetWidth$4(Self),TW3MovableControl.GetHeight$4(mObj$12));
            (dy$8+= TW3MovableControl.GetHeight$4(mObj$12));
         }
      }
   }
   ,Destroy:TW3TagObj.Destroy
   ,AfterUpdate:TW3CustomControl.AfterUpdate
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3CustomControl.StyleTagObject
   ,Create$44:TW3CustomControl.Create$44
   ,Criar$1:TW3CustomControl.Criar$1
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetWidth:TW3MovableControl.SetWidth
   ,supportAdjustment:TW3MovableControl.supportAdjustment
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyDown:TW3CustomControl.CBKeyDown
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,CBMouseDown:TW3CustomControl.CBMouseDown
   ,CBMouseMove:TW3CustomControl.CBMouseMove
   ,CBMouseUp:TW3CustomControl.CBMouseUp
   ,Invalidate:TW3CustomControl.Invalidate
   ,SetEnabled:TW3CustomControl.SetEnabled
};
/// TW3BlockBox = class (TW3CustomControl)
///  [line: 56, column: 3, file: SmartCL.Application]
var TW3BlockBox = {
   $ClassName:"TW3BlockBox",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AfterUpdate:TW3CustomControl.AfterUpdate
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3CustomControl.StyleTagObject
   ,Create$44:TW3CustomControl.Create$44
   ,Criar$1:TW3CustomControl.Criar$1
   ,Resize:TW3MovableControl.Resize
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetWidth:TW3MovableControl.SetWidth
   ,supportAdjustment:TW3MovableControl.supportAdjustment
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyDown:TW3CustomControl.CBKeyDown
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,CBMouseDown:TW3CustomControl.CBMouseDown
   ,CBMouseMove:TW3CustomControl.CBMouseMove
   ,CBMouseUp:TW3CustomControl.CBMouseUp
   ,Invalidate:TW3CustomControl.Invalidate
   ,SetEnabled:TW3CustomControl.SetEnabled
};
/// TModalResult enumeration
///  [line: 100, column: 3, file: SmartCL.Application]
var TModalResult = [ "mrCancel", "mrOK" ];
/// TFormEntryEffect enumeration
///  [line: 30, column: 3, file: SmartCL.Application]
var TFormEntryEffect = [ "feNone", "feFromRight", "feToLeft" ];
/// TDisplayOrientation enumeration
///  [line: 32, column: 3, file: SmartCL.Application]
var TDisplayOrientation = [ "soPortrait", "soLandscapeLeft", "soLandscapeRight", "soFlipped", "soPortraitPrimary", "soPortraitSecondary", "soLandscapePrimary", "soLandscapeSecondary", "soLandscape", "soDefault" ];
/// TApplicationFormsList = class (TObject)
///  [line: 211, column: 3, file: SmartCL.Application]
var TApplicationFormsList = {
   $ClassName:"TApplicationFormsList",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FFormOwner = null;
      $.FList = [];
      $.FNextAutoCreate = 0;
   }
   /// procedure TApplicationFormsList.AutoCreateForm(aFormInfo: TApplicationFormInfo)
   ///  [line: 1245, column: 33, file: SmartCL.Application]
   ,AutoCreateForm:function(Self, aFormInfo) {
      if (!aFormInfo.Instance) {
         aFormInfo.Instance = TW3Component.Create$44$($NewDyn(aFormInfo.FormClass,""),Self.FFormOwner);
         TW3CustomApplication.RegisterFormInstance(Application(),aFormInfo.Instance,aFormInfo.IsMainForm);
      }
      aFormInfo.InitialAutoCreateDone = true;
   }
   /// procedure TApplicationFormsList.AutoCreateForms(owner: TW3Component)
   ///  [line: 1255, column: 33, file: SmartCL.Application]
   ,AutoCreateForms:function(Self, owner) {
      var a$54 = 0;
      var info = null;
      var a$55 = [];
      Self.FFormOwner = owner;
      Self.FNextAutoCreate = 0;
      a$55 = Self.FList;
      var $temp27;
      for(a$54=0,$temp27=a$55.length;a$54<$temp27;a$54++) {
         info = a$55[a$54];
         TApplicationFormsList.AutoCreateForm(Self,info);
         ++Self.FNextAutoCreate;
         if (info.IsMainForm) {
            break;
         }
      }
      setTimeout($Event0(Self,TApplicationFormsList.AutoCreateNextForm),50);
   }
   /// procedure TApplicationFormsList.AutoCreateNextForm()
   ///  [line: 1270, column: 33, file: SmartCL.Application]
   ,AutoCreateNextForm:function(Self) {
      var iForm = 0;
      var info$1 = null;
      var $temp28;
      for(iForm=Self.FNextAutoCreate,$temp28=Self.FList.length;iForm<$temp28;iForm++) {
         info$1 = Self.FList[iForm];
         if ((info$1.IsAutoCreated&&(!(info$1.Instance!==null)))&&(!info$1.InitialAutoCreateDone)) {
            TApplicationFormsList.AutoCreateForm(Self,info$1);
            ++Self.FNextAutoCreate;
            if (Self.FNextAutoCreate<(Self.FList.length-1)) {
               setTimeout($Event0(Self,TApplicationFormsList.AutoCreateNextForm),50);
            }
            break;
         }
      }
   }
   /// function TApplicationFormsList.IndexOfFormClass(aFormClass: TW3CustomFormClass) : Integer
   ///  [line: 1304, column: 32, file: SmartCL.Application]
   ,IndexOfFormClass:function(Self, aFormClass) {
      var Result = 0;
      var $temp29;
      for(Result=0,$temp29=Self.FList.length;Result<$temp29;Result++) {
         if (Self.FList[Result].FormClass==aFormClass) {
            return Result;
         }
      }
      Result = -1;
      return Result
   }
   /// procedure TApplicationFormsList.RegisterFormInstance(aFormClass: TW3CustomFormClass; aFormInstance: TW3CustomForm)
   ///  [line: 1351, column: 33, file: SmartCL.Application]
   ,RegisterFormInstance$1:function(Self, aFormClass$1, aFormInstance) {
      var formInfo = null;
      var idx = 0;
      idx = TApplicationFormsList.IndexOfFormClass(Self,aFormClass$1);
      if (idx>=0) {
         formInfo = Self.FList[idx];
      } else {
         formInfo = TObject.Create($New(TApplicationFormInfo));
         formInfo.FormClass = aFormClass$1;
         Self.FList.push(formInfo);
      }
      formInfo.Instance = aFormInstance;
      formInfo.InitialAutoCreateDone = true;
   }
   /// procedure TApplicationFormsList.UnregisterFormInstance(aFormInstance: TW3CustomForm)
   ///  [line: 1367, column: 33, file: SmartCL.Application]
   ,UnregisterFormInstance:function(Self, aFormInstance$1) {
      var i$19 = 0;
      var $temp30;
      for(i$19=0,$temp30=Self.FList.length;i$19<$temp30;i$19++) {
         if (Self.FList[i$19].Instance===aFormInstance$1) {
            Self.FList[i$19].Instance = null;
         }
      }
   }
   ,Destroy:TObject.Destroy
};
/// TApplicationFormInfo = class (TObject)
///  [line: 201, column: 3, file: SmartCL.Application]
var TApplicationFormInfo = {
   $ClassName:"TApplicationFormInfo",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.InitialAutoCreateDone = $.IsMainForm = $.IsAutoCreated = false;
      $.Instance = null;
      $.FormClass = null;
   }
   ,Destroy:TObject.Destroy
};
function Forms$2() {
   return FormsFactory();
};
/// EW3Screen = class (EW3Exception)
///  [line: 27, column: 3, file: SmartCL.Application]
var EW3Screen = {
   $ClassName:"EW3Screen",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// EW3Application = class (EW3Exception)
///  [line: 28, column: 3, file: SmartCL.Application]
var EW3Application = {
   $ClassName:"EW3Application",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
function Application() {
   return Instance;
};
/// TModalInfo = class (TObject)
///  [line: 244, column: 3, file: SmartCL.Application]
var TModalInfo = {
   $ClassName:"TModalInfo",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.OnOK = null;
      $.OnCancel = null;
      $.ModalForm = $.ModalPanel = $.OwnerForm = $.OpaqueMask = null;
   }
   ,Destroy:TObject.Destroy
};
function FormsFactory() {
   var Result = null;
   if (!GForms) {
      GForms = TObject.Create($New(TApplicationFormsList));
   }
   Result = GForms;
   return Result
};
/// TW3CustomForm = class (TW3CustomControl)
///  [line: 25, column: 3, file: SmartCL.Forms]
var TW3CustomForm = {
   $ClassName:"TW3CustomForm",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.FCaption = "";
      $.FInitialized = false;
   }
   /// constructor TW3CustomForm.Create(AOwner: TW3Component)
   ///  [line: 58, column: 27, file: SmartCL.Forms]
   ,Create$44:function(Self, AOwner$9) {
      TW3CustomControl.Create$44(Self,AOwner$9);
      TApplicationFormsList.RegisterFormInstance$1(Forms$2(),$AsClass(TObject.ClassType(Self.ClassType),TW3CustomForm),Self);
      return Self
   }
   /// destructor TW3CustomForm.Destroy()
   ///  [line: 64, column: 26, file: SmartCL.Forms]
   ,Destroy:function(Self) {
      TW3CustomApplication.UnRegisterFormInstance(Application(),Self);
      TApplicationFormsList.UnregisterFormInstance(Forms$2(),Self);
   }
   /// procedure TW3CustomForm.FormActivated()
   ///  [line: 88, column: 25, file: SmartCL.Forms]
   ,FormActivated:function(Self) {
      var x$57 = 0;
      var mObj$13 = null;
      var mControl = null;
      if (!Self.FInitialized) {
         Self.FInitialized = true;
         TW3CustomForm.InitializeForm(Self);
      }
   }
   /// procedure TW3CustomForm.FormDeactivated()
   ///  [line: 114, column: 25, file: SmartCL.Forms]
   ,FormDeactivated:function(Self) {
      /* null */
   }
   /// procedure TW3CustomForm.InitializeForm()
   ///  [line: 78, column: 25, file: SmartCL.Forms]
   ,InitializeForm:function(Self) {
      /* null */
   }
   /// procedure TW3CustomForm.setCaption(Value: String)
   ///  [line: 83, column: 25, file: SmartCL.Forms]
   ,setCaption:function(Self, Value$1) {
      Self.FCaption = Value$1;
   }
   /// procedure TW3CustomForm.StyleTagObject()
   ///  [line: 70, column: 25, file: SmartCL.Forms]
   ,StyleTagObject:function(Self) {
      TW3CustomControl.StyleTagObject(Self);
      w3_setStyle(Self.FHandle$3,w3_CSSPrefix("Transform"),"none");
      TW3CustomControl.SetStyleClass(Self,"TW3CustomForm");
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,AfterUpdate:TW3CustomControl.AfterUpdate
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,Create$44$:function($){return $.ClassType.Create$44.apply($.ClassType, arguments)}
   ,Criar$1:TW3CustomControl.Criar$1
   ,Resize:TW3MovableControl.Resize
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetWidth:TW3MovableControl.SetWidth
   ,supportAdjustment:TW3MovableControl.supportAdjustment
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyDown:TW3CustomControl.CBKeyDown
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,CBMouseDown:TW3CustomControl.CBMouseDown
   ,CBMouseMove:TW3CustomControl.CBMouseMove
   ,CBMouseUp:TW3CustomControl.CBMouseUp
   ,Invalidate:TW3CustomControl.Invalidate
   ,SetEnabled:TW3CustomControl.SetEnabled
};
/// TW3CustomAnimation = class (TObject)
///  [line: 31, column: 3, file: SmartCL.Effects]
var TW3CustomAnimation = {
   $ClassName:"TW3CustomAnimation",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FBusy = false;
      $.FDuration = 0;
      $.FInEvnCB = null;
      $.FOnBegins = null;
      $.FOnEnds = null;
      $.FTarget$1 = null;
   }
   /// procedure TW3CustomAnimation.CBBegins()
   ///  [line: 1414, column: 30, file: SmartCL.Effects]
   ,CBBegins:function(Self) {
      if (Self.FOnBegins) {
         Self.FOnBegins(Self);
      }
   }
   /// procedure TW3CustomAnimation.CBEnds()
   ///  [line: 1420, column: 30, file: SmartCL.Effects]
   ,CBEnds:function(Self) {
      TW3CustomAnimation.FinalizeTransition$(Self);
      if (Self.FOnEnds) {
         Self.FOnEnds(Self);
      }
   }
   /// constructor TW3CustomAnimation.Create()
   ///  [line: 1393, column: 32, file: SmartCL.Effects]
   ,Create$54:function(Self) {
      TObject.Create(Self);
      Self.FDuration = DefaultDuration;
      return Self
   }
   /// destructor TW3CustomAnimation.Destroy()
   ///  [line: 1399, column: 31, file: SmartCL.Effects]
   ,Destroy:function(Self) {
      if (Self.FBusy&&(Self.FTarget$1!==null)) {
         try {
            TW3CustomAnimation.FinalizeTransition$(Self);
         } catch ($e) {
            var e$10 = $W($e);
            /* null */
         }
      }
      TObject.Destroy(Self);
   }
   /// procedure TW3CustomAnimation.Execute(TargetObj: TW3TagObj)
   ///  [line: 1457, column: 30, file: SmartCL.Effects]
   ,Execute:function(Self, TargetObj) {
      if (!TargetObj) {
         throw Exception.Create($New(Exception),"Target-object was NIL error");
      }
      if (Self.FBusy) {
         throw Exception.Create($New(Exception),"Transition is already in progress error");
      } else {
         Self.FTarget$1 = TargetObj;
         TW3CustomAnimation.SetupTransition$(Self);
      }
   }
   /// procedure TW3CustomAnimation.ExecuteEx(TargetObj: TW3TagObj; BeginHandler: TFxAnimationBeginsEvent; EndHandler: TFxAnimationEndsEvent)
   ///  [line: 1470, column: 30, file: SmartCL.Effects]
   ,ExecuteEx:function(Self, TargetObj$1, BeginHandler, EndHandler) {
      if (!TargetObj$1) {
         throw Exception.Create($New(Exception),"Target-object was NIL error");
      }
      if (Self.FBusy) {
         throw Exception.Create($New(Exception),"Transition is already in progress error");
      } else {
         Self.FTarget$1 = TargetObj$1;
         Self.FOnBegins = BeginHandler;
         Self.FOnEnds = EndHandler;
         TW3CustomAnimation.SetupTransition$(Self);
      }
   }
   /// procedure TW3CustomAnimation.FinalizeTransition()
   ///  [line: 1449, column: 30, file: SmartCL.Effects]
   ,FinalizeTransition:function(Self) {
      w3_RemoveEvent(Self.FTarget$1.FHandle$3,"animationend",Self.FInEvnCB,true);
      w3_RemoveEvent(Self.FTarget$1.FHandle$3,"webkitAnimationEnd",Self.FInEvnCB,true);
      Self.FBusy = false;
   }
   /// procedure TW3CustomAnimation.SetDuration(Value: Float)
   ///  [line: 1427, column: 30, file: SmartCL.Effects]
   ,SetDuration:function(Self, Value$2) {
      if (Self.FBusy) {
         throw Exception.Create($New(Exception),"Duration cannot be altered while the transition is active error");
      } else {
         Self.FDuration = Value$2;
      }
   }
   /// procedure TW3CustomAnimation.SetupTransition()
   ///  [line: 1435, column: 30, file: SmartCL.Effects]
   ,SetupTransition:function(Self) {
      Self.FBusy = true;
      Self.FInEvnCB = $Event0(Self,TW3CustomAnimation.CBEnds);
      w3_AddEvent(Self.FTarget$1.FHandle$3,"animationend",Self.FInEvnCB,true);
      w3_AddEvent(Self.FTarget$1.FHandle$3,"webkitAnimationEnd",Self.FInEvnCB,true);
      TW3CustomAnimation.CBBegins(Self);
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,Create$54$:function($){return $.ClassType.Create$54($)}
   ,FinalizeTransition$:function($){return $.ClassType.FinalizeTransition($)}
   ,SetupTransition$:function($){return $.ClassType.SetupTransition($)}
};
/// TW3TransitionAnimation = class (TW3CustomAnimation)
///  [line: 91, column: 3, file: SmartCL.Effects]
var TW3TransitionAnimation = {
   $ClassName:"TW3TransitionAnimation",$Parent:TW3CustomAnimation
   ,$Init:function ($) {
      TW3CustomAnimation.$Init($);
      $.FAnimationCmd = "";
      $.FSticky = $.FStyleSetup = false;
      $.FStyleDOM = undefined;
      $.FTiming = 0;
   }
   /// constructor TW3TransitionAnimation.Create()
   ///  [line: 1140, column: 36, file: SmartCL.Effects]
   ,Create$54:function(Self) {
      TW3CustomAnimation.Create$54(Self);
      Self.FTiming = DefaultTiming;
      return Self
   }
   /// destructor TW3TransitionAnimation.Destroy()
   ///  [line: 1146, column: 35, file: SmartCL.Effects]
   ,Destroy:function(Self) {
      TW3TransitionAnimation.InvalidateKeyFrames(Self);
      TW3CustomAnimation.Destroy(Self);
   }
   /// procedure TW3TransitionAnimation.FinalizeTransition()
   ///  [line: 1197, column: 34, file: SmartCL.Effects]
   ,FinalizeTransition:function(Self) {
      var style$7;
      if (!Self.FSticky) {
         style$7 = Self.FTarget$1.FHandle$3.style;
         style$7.removeProperty("-webkit-animation");
         style$7.removeProperty("-webkit-animation-fill-mode");
         style$7.removeProperty("animation");
         style$7.removeProperty("animation-fill-mode");
         Self.FAnimationCmd = "";
      }
      TW3CustomAnimation.FinalizeTransition(Self);
   }
   /// procedure TW3TransitionAnimation.InvalidateKeyFrames()
   ///  [line: 1169, column: 34, file: SmartCL.Effects]
   ,InvalidateKeyFrames:function(Self) {
      if (Self.FStyleSetup) {
         Self.FStyleSetup = false;
         Self.FStyleDOM.parentNode.removeChild(Self.FStyleDOM);
         Self.FStyleDOM = null;
      }
   }
   /// function TW3TransitionAnimation.KeyFramesName() : String
   ///  [line: 1219, column: 33, file: SmartCL.Effects]
   ,KeyFramesName:function(Self) {
      return TObject.ClassName(Self.ClassType);
   }
   /// procedure TW3TransitionAnimation.SetupKeyFrames()
   ///  [line: 1152, column: 34, file: SmartCL.Effects]
   ,SetupKeyFrames:function(Self) {
      var document$1 = undefined;
      var css = "";
      Self.FStyleSetup = true;
      document$1 = document;
      Self.FStyleDOM = document$1.createElement("style");
      Self.FStyleDOM.type = "text\/css";
      css = "keyframes "+TW3TransitionAnimation.KeyFramesName$(Self)+" {"+TW3TransitionAnimation.KeyFramesCSS$(Self)+"}";
      Self.FStyleDOM.appendChild(document$1.createTextNode("@-webkit-"+css));
      Self.FStyleDOM.appendChild(document$1.createTextNode("@"+css));
      document$1.getElementsByTagName("head")[0].appendChild(Self.FStyleDOM);
   }
   /// procedure TW3TransitionAnimation.SetupTransition()
   ///  [line: 1179, column: 34, file: SmartCL.Effects]
   ,SetupTransition:function(Self) {
      var style$8;
      TW3CustomAnimation.SetupTransition(Self);
      if (!Self.FStyleSetup) {
         TW3TransitionAnimation.SetupKeyFrames(Self);
      }
      style$8 = Self.FTarget$1.FHandle$3.style;
      Self.FAnimationCmd = TW3TransitionAnimation.KeyFramesName$(Self)+" "+FloatToStr$_Float_(Self.FDuration)+"s "+cW3AnimationTiming[Self.FTiming];
      style$8.webkitAnimation = Self.FAnimationCmd;
      style$8.animation = Self.FAnimationCmd;
      style$8.webkitAnimationFillMode = "both";
      style$8.animationFillMode = "both";
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,Create$54$:function($){return $.ClassType.Create$54($)}
   ,FinalizeTransition$:function($){return $.ClassType.FinalizeTransition($)}
   ,SetupTransition$:function($){return $.ClassType.SetupTransition($)}
   ,KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}
   ,KeyFramesName$:function($){return $.ClassType.KeyFramesName($)}
};
/// TW3ZoomOutTransition = class (TW3TransitionAnimation)
///  [line: 134, column: 4, file: SmartCL.Effects]
var TW3ZoomOutTransition = {
   $ClassName:"TW3ZoomOutTransition",$Parent:TW3TransitionAnimation
   ,$Init:function ($) {
      TW3TransitionAnimation.$Init($);
   }
   /// function TW3ZoomOutTransition.KeyFramesCSS() : String
   ///  [line: 1298, column: 31, file: SmartCL.Effects]
   ,KeyFramesCSS:function(Self) {
      return "0% {\r\n   -webkit-transform: scale(1.0);\r\n   -webkit-transform-origin: 50% 50%;\r\n   transform: scale(1.0);\r\n   transform-origin: 50% 50%;\r\n}\r\n50% {\r\n   opacity: 0.3;\r\n   -webkit-transform: scale(0.5);\r\n   transform: scale(0.5);\r\n}\r\n100% {\r\n   opacity: 0.0;\r\n   -webkit-transform: scale(0);\r\n   transform: scale(0);\r\n}";
   }
   ,Destroy:TW3TransitionAnimation.Destroy
   ,Create$54:TW3TransitionAnimation.Create$54
   ,FinalizeTransition:TW3TransitionAnimation.FinalizeTransition
   ,SetupTransition:TW3TransitionAnimation.SetupTransition
   ,KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}
   ,KeyFramesName:TW3TransitionAnimation.KeyFramesName
};
/// TW3ZoomInTransition = class (TW3TransitionAnimation)
///  [line: 129, column: 4, file: SmartCL.Effects]
var TW3ZoomInTransition = {
   $ClassName:"TW3ZoomInTransition",$Parent:TW3TransitionAnimation
   ,$Init:function ($) {
      TW3TransitionAnimation.$Init($);
   }
   /// function TW3ZoomInTransition.KeyFramesCSS() : String
   ///  [line: 1272, column: 30, file: SmartCL.Effects]
   ,KeyFramesCSS:function(Self) {
      return "0% {\r\n   opacity: 0.0;\r\n   -webkit-transform: scale(0);\r\n   transform: scale(0);\r\n}\r\n50% {\r\n   opacity: 0.3;\r\n   -webkit-transform: scale(0.5);\r\n   transform: scale(0.5);\r\n}\r\n100% {\r\n   -webkit-transform: scale(1.0);\r\n   -webkit-transform-origin: 50% 50%;\r\n   transform: scale(1.0);\r\n   transform-origin: 50% 50%;\r\n}";
   }
   ,Destroy:TW3TransitionAnimation.Destroy
   ,Create$54:TW3TransitionAnimation.Create$54
   ,FinalizeTransition:TW3TransitionAnimation.FinalizeTransition
   ,SetupTransition:TW3TransitionAnimation.SetupTransition
   ,KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}
   ,KeyFramesName:TW3TransitionAnimation.KeyFramesName
};
/// TW3WarpOutTransition = class (TW3TransitionAnimation)
///  [line: 124, column: 4, file: SmartCL.Effects]
var TW3WarpOutTransition = {
   $ClassName:"TW3WarpOutTransition",$Parent:TW3TransitionAnimation
   ,$Init:function ($) {
      TW3TransitionAnimation.$Init($);
   }
   /// function TW3WarpOutTransition.KeyFramesCSS() : String
   ///  [line: 1250, column: 31, file: SmartCL.Effects]
   ,KeyFramesCSS:function(Self) {
      return "0% {\r\n   opacity: 1.0;\r\n   -webkit-transform: scale(1);\r\n   transform: scale(1);\r\n}\r\n100% {\r\n   opacity: 0;\r\n   -webkit-transform: scale(5);\r\n   -webkit-transform-origin: 50% 50%;\r\n   transform: scale(5);\r\n   transform-origin: 50% 50%;\r\n}";
   }
   ,Destroy:TW3TransitionAnimation.Destroy
   ,Create$54:TW3TransitionAnimation.Create$54
   ,FinalizeTransition:TW3TransitionAnimation.FinalizeTransition
   ,SetupTransition:TW3TransitionAnimation.SetupTransition
   ,KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}
   ,KeyFramesName:TW3TransitionAnimation.KeyFramesName
};
/// TW3WarpInTransition = class (TW3TransitionAnimation)
///  [line: 119, column: 4, file: SmartCL.Effects]
var TW3WarpInTransition = {
   $ClassName:"TW3WarpInTransition",$Parent:TW3TransitionAnimation
   ,$Init:function ($) {
      TW3TransitionAnimation.$Init($);
   }
   /// function TW3WarpInTransition.KeyFramesCSS() : String
   ///  [line: 1228, column: 30, file: SmartCL.Effects]
   ,KeyFramesCSS:function(Self) {
      return "0% {\r\n   opacity: 0;\r\n   -webkit-transform: scale(5);\r\n   -webkit-transform-origin: 50% 50%;\r\n   transform: scale(5);\r\n   transform-origin: 50% 50%;\r\n}\r\n100% {\r\n   opacity: 1.0;\r\n   -webkit-transform: scale(1);\r\n   transform: scale(1);\r\n}";
   }
   ,Destroy:TW3TransitionAnimation.Destroy
   ,Create$54:TW3TransitionAnimation.Create$54
   ,FinalizeTransition:TW3TransitionAnimation.FinalizeTransition
   ,SetupTransition:TW3TransitionAnimation.SetupTransition
   ,KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}
   ,KeyFramesName:TW3TransitionAnimation.KeyFramesName
};
/// TW3SizeAnimation = class (TW3TransitionAnimation)
///  [line: 184, column: 3, file: SmartCL.Effects]
var TW3SizeAnimation = {
   $ClassName:"TW3SizeAnimation",$Parent:TW3TransitionAnimation
   ,$Init:function ($) {
      TW3TransitionAnimation.$Init($);
      $.FFromHeight = $.FFromWidth = $.FFromX = $.FFromY = $.FToHeight = $.FToWidth = $.FToX = $.FToY = 0;
   }
   /// function TW3SizeAnimation.KeyFramesCSS() : String
   ///  [line: 1118, column: 27, file: SmartCL.Effects]
   ,KeyFramesCSS:function(Self) {
      return ("from {\r\n  left: "+Self.FFromX.toString()+"px;\r\n  top:  "+Self.FFromY.toString()+"px;\r\n  width: "+Self.FFromWidth.toString()+"px;\r\n  height: "+Self.FFromHeight.toString()+"px;\r\n} to {\r\n  left: "+Self.FToX.toString()+"px;\r\n  top:  "+Self.FToY.toString()+"px;\r\n  width: "+Self.FToWidth.toString()+"px;\r\n  height: "+Self.FToHeight.toString()+"px;\r\n}");
   }
   ,Destroy:TW3TransitionAnimation.Destroy
   ,Create$54:TW3TransitionAnimation.Create$54
   ,FinalizeTransition:TW3TransitionAnimation.FinalizeTransition
   ,SetupTransition:TW3TransitionAnimation.SetupTransition
   ,KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}
   ,KeyFramesName:TW3TransitionAnimation.KeyFramesName
};
/// TW3NamedAnimation = class (TW3CustomAnimation)
///  [line: 66, column: 3, file: SmartCL.Effects]
var TW3NamedAnimation = {
   $ClassName:"TW3NamedAnimation",$Parent:TW3CustomAnimation
   ,$Init:function ($) {
      TW3CustomAnimation.$Init($);
      $.FName$2 = "";
   }
   /// procedure TW3NamedAnimation.SetupTransition()
   ///  [line: 1324, column: 29, file: SmartCL.Effects]
   ,SetupTransition:function(Self) {
      var mCommand = "";
      TW3CustomAnimation.SetupTransition(Self);
      w3_setStyle(Self.FTarget$1.FHandle$3,w3_CSSPrefix("AnimationFillMode"),"both");
      mCommand = Self.FName$2+" "+FloatToStr$_Float_(Self.FDuration)+"s linear";
      w3_setStyle(Self.FTarget$1.FHandle$3,w3_CSSPrefix("Animation"),mCommand);
   }
   /// procedure TW3NamedAnimation.FinalizeTransition()
   ///  [line: 1334, column: 29, file: SmartCL.Effects]
   ,FinalizeTransition:function(Self) {
      TW3CustomAnimation.FinalizeTransition(Self);
      if (Self.FTarget$1!==null) {
         Self.FTarget$1.FHandle$3.style[w3_CSSPrefix("Animation")] = "none";
         Self.FTarget$1.FHandle$3.style[w3_CSSPrefix("AnimationFillMode")] = "none";
      }
   }
   ,Destroy:TW3CustomAnimation.Destroy
   ,Create$54:TW3CustomAnimation.Create$54
   ,FinalizeTransition$:function($){return $.ClassType.FinalizeTransition($)}
   ,SetupTransition$:function($){return $.ClassType.SetupTransition($)}
};
/// TW3MoveAnimation = class (TW3TransitionAnimation)
///  [line: 139, column: 4, file: SmartCL.Effects]
var TW3MoveAnimation = {
   $ClassName:"TW3MoveAnimation",$Parent:TW3TransitionAnimation
   ,$Init:function ($) {
      TW3TransitionAnimation.$Init($);
      $.FFromX$1 = $.FFromY$1 = $.FToX$1 = $.FToY$1 = 0;
   }
   /// function TW3MoveAnimation.KeyFramesCSS() : String
   ///  [line: 1089, column: 27, file: SmartCL.Effects]
   ,KeyFramesCSS:function(Self) {
      return ("from {\r\n  left: "+Self.FFromX$1.toString()+"px;\r\n  top:  "+Self.FFromY$1.toString()+"px;\r\n} to {\r\n  left: "+Self.FToX$1.toString()+"px;\r\n  top: "+Self.FToY$1.toString()+"px;\r\n}");
   }
   ,Destroy:TW3TransitionAnimation.Destroy
   ,Create$54:TW3TransitionAnimation.Create$54
   ,FinalizeTransition:TW3TransitionAnimation.FinalizeTransition
   ,SetupTransition:TW3TransitionAnimation.SetupTransition
   ,KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}
   ,KeyFramesName:TW3TransitionAnimation.KeyFramesName
};
/// TW3FadeAnimation = class (TW3TransitionAnimation)
///  [line: 154, column: 3, file: SmartCL.Effects]
var TW3FadeAnimation = {
   $ClassName:"TW3FadeAnimation",$Parent:TW3TransitionAnimation
   ,$Init:function ($) {
      TW3TransitionAnimation.$Init($);
      $.FFrom = $.FTo = 0;
   }
   /// function TW3FadeAnimation.KeyFramesCSS() : String
   ///  [line: 1106, column: 27, file: SmartCL.Effects]
   ,KeyFramesCSS:function(Self) {
      return "0% { opacity: "+FloatToStr$_Float_(Self.FFrom)+"; }\r\n    100% { opacity: "+FloatToStr$_Float_(Self.FTo)+"; }";
   }
   ,Destroy:TW3TransitionAnimation.Destroy
   ,Create$54:TW3TransitionAnimation.Create$54
   ,FinalizeTransition:TW3TransitionAnimation.FinalizeTransition
   ,SetupTransition:TW3TransitionAnimation.SetupTransition
   ,KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}
   ,KeyFramesName:TW3TransitionAnimation.KeyFramesName
};
/// TW3AnimationTiming enumeration
///  [line: 89, column: 3, file: SmartCL.Effects]
var TW3AnimationTiming = [ "atEase", "atLinear", "atEaseIn", "atEaseOut", "atEaseInOut" ];
var cW3AnimationTiming = ["ease","linear","ease-in","ease-out","ease-in-out"];
function AfterEffect(aControl, aEffectObj) {
   TW3MovableControl.fxSetBusy(aControl,false);
};
function BeforeEffect(aControl$1, aEffectObj$1) {
   TW3MovableControl.fxSetBusy(aControl$1,true);
};
/// TW3AlertResult enumeration
///  [line: 27, column: 3, file: SmartCL.Dialogs]
var TW3AlertResult = [ "roYes", "roNo", "roOK", "roCancel" ];
/// TW3AlertOptions enumeration
///  [line: 26, column: 3, file: SmartCL.Dialogs]
var TW3AlertOptions = [ "aoYes", "aoNo", "aoYesNo", "aoOK", "aoCancel", "aoOKCancel" ];
/// TW3AlertDialog = class (TW3CustomControl)
///  [line: 38, column: 3, file: SmartCL.Dialogs]
var TW3AlertDialog = {
   $ClassName:"TW3AlertDialog",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.FNo = $.FOnSelect = $.FText = $.FTitle = $.FYes = null;
      $.FOptions = 0;
      $.FReady = false;
   }
   /// procedure TW3AlertDialog.FinalizeObject()
   ///  [line: 87, column: 26, file: SmartCL.Dialogs]
   ,FinalizeObject:function(Self) {
      TObject.Free(Self.FTitle);
      TObject.Free(Self.FText);
      TObject.Free(Self.FYes);
      TObject.Free(Self.FNo);
      TW3CustomControl.FinalizeObject(Self);
   }
   /// procedure TW3AlertDialog.HandleNoClick(Sender: TObject)
   ///  [line: 112, column: 26, file: SmartCL.Dialogs]
   ,HandleNoClick:function(Self, Sender$9) {
      if (Self.FOnSelect) {
         switch (Self.FOptions) {
            case 0 :
            case 2 :
            case 1 :
               Self.FOnSelect(Self,1);
               break;
            case 3 :
            case 4 :
            case 5 :
               Self.FOnSelect(Self,3);
               break;
         }
      }
   }
   /// procedure TW3AlertDialog.HandleYesClick(Sender: TObject)
   ///  [line: 101, column: 26, file: SmartCL.Dialogs]
   ,HandleYesClick:function(Self, Sender$10) {
      if (Self.FOnSelect) {
         switch (Self.FOptions) {
            case 0 :
            case 2 :
            case 1 :
               Self.FOnSelect(Self,0);
               break;
            case 3 :
            case 4 :
            case 5 :
               Self.FOnSelect(Self,2);
               break;
         }
      }
   }
   /// procedure TW3AlertDialog.InitializeObject()
   ///  [line: 68, column: 26, file: SmartCL.Dialogs]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      Self.FYes = TW3Component.Create$44$($New(TW3AlertButton),Self);
      TW3MovableControl.SetSize$4(Self.FYes,120,42);
      TW3Button.SetCaption(Self.FYes,"OK");
      TW3CustomControl._setMouseClick(Self.FYes,$Event1(Self,TW3AlertDialog.HandleYesClick));
      TW3MovableControl.SetVisible(Self.FYes,false);
      Self.FNo = TW3Component.Create$44$($New(TW3AlertButton),Self);
      TW3MovableControl.SetSize$4(Self.FNo,120,42);
      TW3Button.SetCaption(Self.FNo,"Cancel");
      TW3CustomControl._setMouseClick(Self.FNo,$Event1(Self,TW3AlertDialog.HandleNoClick));
      TW3MovableControl.SetVisible(Self.FNo,false);
      Self.FTitle = TW3Component.Create$44$($New(TW3Label),Self);
      Self.FText = TW3Component.Create$44$($New(TW3Label),Self);
   }
   /// procedure TW3AlertDialog.Resize()
   ///  [line: 193, column: 26, file: SmartCL.Dialogs]
   ,Resize:function(Self) {
      var hd$1 = 0;
      var wd$1 = 0;
      var dx$8 = 0;
      var dy$9 = 0;
      TW3MovableControl.Resize(Self);
      wd$1 = TW3ScrollInfo.GetScrollWidth(TW3CustomControl.GetScrollInfo(Self));
      hd$1 = TW3ScrollInfo.GetScrollHeight(TW3CustomControl.GetScrollInfo(Self));
      TW3MovableControl.SetBounds$2(Self.FTitle,8,8,wd$1-16,32);
      TW3MovableControl.SetBounds$2(Self.FText,8,TW3MovableControl.GetTop(Self.FTitle)+TW3MovableControl.GetHeight$4(Self.FTitle)+2,wd$1-16,92);
      if ($SetIn(Self.FComponentState,2,0,6)&&Self.FReady) {
         (wd$1-= 16);
         if ((1<<Self.FOptions&36)!=0) {
            (wd$1-= 8);
         }
         if ((1<<Self.FOptions&27)!=0) {
            if ((1<<Self.FOptions&9)!=0) {
               dy$9 = TW3MovableControl.GetHeight$4(Self)-(TW3MovableControl.GetHeight$4(Self.FYes)+20);
               TW3MovableControl.SetBounds$2(Self.FYes,10,dy$9,wd$1,TW3MovableControl.GetHeight$4(Self.FYes));
            } else if ((1<<Self.FOptions&18)!=0) {
               dy$9 = TW3MovableControl.GetHeight$4(Self)-(TW3MovableControl.GetHeight$4(Self.FNo)+20);
               TW3MovableControl.SetBounds$2(Self.FNo,10,dy$9,wd$1,TW3MovableControl.GetHeight$4(Self.FNo));
            }
         } else if ((1<<Self.FOptions&36)!=0) {
            dy$9 = hd$1-(TW3MovableControl.GetHeight$4(Self.FYes)+8);
            TW3MovableControl.SetBounds$2(Self.FYes,8,dy$9,$Div(wd$1,2),TW3MovableControl.GetHeight$4(Self.FYes));
            dx$8 = TW3ScrollInfo.GetScrollWidth(TW3CustomControl.GetScrollInfo(Self))-($Div(wd$1,2));
            (dx$8-= 8);
            TW3MovableControl.SetBounds$2(Self.FNo,dx$8,dy$9,$Div(wd$1,2),TW3MovableControl.GetHeight$4(Self.FNo));
         }
      }
   }
   /// procedure TW3AlertDialog.SetupDialog(aTitle: String; aText: String; aOptions: TW3AlertOptions)
   ///  [line: 123, column: 26, file: SmartCL.Dialogs]
   ,SetupDialog:function(Self, aTitle, aText$1, aOptions) {
      if (!Self.FReady) {
         TW3TagObj.BeginUpdate(Self);
         try {
            Self.FOptions = aOptions;
            TW3Label.SetCaption$1(Self.FTitle,aTitle);
            TW3Label.SetCaption$1(Self.FText,aText$1);
            switch (Self.FOptions) {
               case 0 :
               case 3 :
                  TW3MovableControl.SetVisible(Self.FYes,true);
                  TW3MovableControl.SetVisible(Self.FNo,false);
                  break;
               case 1 :
               case 4 :
                  TW3MovableControl.SetVisible(Self.FNo,true);
                  TW3MovableControl.SetVisible(Self.FYes,false);
                  break;
               case 2 :
               case 5 :
                  TW3MovableControl.SetVisible(Self.FYes,true);
                  TW3MovableControl.SetVisible(Self.FNo,true);
                  break;
            }
            switch (Self.FOptions) {
               case 0 :
                  TW3Button.SetCaption(Self.FYes,"Yes");
                  break;
               case 1 :
                  TW3Button.SetCaption(Self.FNo,"No");
                  break;
               case 3 :
                  TW3Button.SetCaption(Self.FYes,"OK");
                  break;
               case 4 :
                  TW3Button.SetCaption(Self.FNo,"Cancel");
                  break;
               case 2 :
                  TW3Button.SetCaption(Self.FYes,"Yes");
                  TW3Button.SetCaption(Self.FNo,"No");
                  break;
               case 5 :
                  TW3Button.SetCaption(Self.FYes,"OK");
                  TW3Button.SetCaption(Self.FNo,"Cancel");
                  break;
            }
            TW3CustomFont.SetName$1(TW3CustomControl.GetFont$1(Self.FTitle),"Helvetica, Arial, sans-serif");
            TW3CustomFont.SetWeight(TW3CustomControl.GetFont$1(Self.FTitle),"bold");
            TW3CustomFont.SetSize$5(TW3CustomControl.GetFont$1(Self.FTitle),24);
            TW3Label.SetTextAlign$1(Self.FTitle,1);
            TW3CustomFont.SetColor$2(TW3CustomControl.GetFont$1(Self.FTitle),16777215);
            Self.FTitle.FContainer.FHandle$3.style["text-shadow"] = "0 -1px 0 rgba(0,0,0,.8)";
            TW3CustomFont.SetSize$5(TW3CustomControl.GetFont$1(Self.FText),16);
            TW3CustomFont.SetName$1(TW3CustomControl.GetFont$1(Self.FText),"Helvetica, Arial, sans-serif");
            TW3Label.SetTextAlign$1(Self.FText,1);
            Self.FReady = true;
         } finally {
            TW3TagObj.AddToComponentState(Self,[24]);
            TW3TagObj.EndUpdate(Self);
         }
      }
   }
   /// procedure TW3AlertDialog.StyleTagObject()
   ///  [line: 96, column: 26, file: SmartCL.Dialogs]
   ,StyleTagObject:function(Self) {
      TW3CustomControl.StyleTagObject(Self);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AfterUpdate:TW3CustomControl.AfterUpdate
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,Create$44:TW3CustomControl.Create$44
   ,Criar$1:TW3CustomControl.Criar$1
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetWidth:TW3MovableControl.SetWidth
   ,supportAdjustment:TW3MovableControl.supportAdjustment
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyDown:TW3CustomControl.CBKeyDown
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,CBMouseDown:TW3CustomControl.CBMouseDown
   ,CBMouseMove:TW3CustomControl.CBMouseMove
   ,CBMouseUp:TW3CustomControl.CBMouseUp
   ,Invalidate:TW3CustomControl.Invalidate
   ,SetEnabled:TW3CustomControl.SetEnabled
};
TW3AlertDialog.$Intf={
   IW3AlertDialog:[TW3AlertDialog.SetupDialog]
}
/// TW3Button = class (TW3CustomControl)
///  [line: 18, column: 3, file: SmartCL.Controls.Button]
var TW3Button = {
   $ClassName:"TW3Button",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.FIgnoreMouse = 0;
      $.FPressed = false;
      $.FTouchEnd = null;
      $.FTouchMove = null;
      $.FTouchX = $.FTouchY = 0;
   }
   /// procedure TW3Button.CBClick(eventObj: JEvent)
   ///  [line: 165, column: 21, file: SmartCL.Controls.Button]
   ,CBClick:function(Self, eventObj$18) {
      if (Self.FPressed) {
         TW3Button.ResetClick(Self);
         TW3CustomControl.CBClick(Self,eventObj$18);
      } else {
         TW3Button.ResetClick(Self);
      }
   }
   /// procedure TW3Button.CBKeyDown(eventObj: JKeyboardEvent)
   ///  [line: 173, column: 21, file: SmartCL.Controls.Button]
   ,CBKeyDown:function(Self, eventObj$19) {
      TW3CustomControl.CBKeyDown(Self,eventObj$19);
      if (TW3CustomControl.GetEnabled(Self)&&(eventObj$19.keyCode==13||eventObj$19.keyCode==32)) {
         TW3Button.SetPressed(Self,true);
      }
   }
   /// procedure TW3Button.CBKeyUp(eventObj: JKeyboardEvent)
   ///  [line: 180, column: 21, file: SmartCL.Controls.Button]
   ,CBKeyUp:function(Self, eventObj$20) {
      TW3CustomControl.CBKeyDown(Self,eventObj$20);
      switch (eventObj$20.keyCode) {
         case 13 :
         case 32 :
            if (TW3CustomControl.GetEnabled(Self)&&Self.FPressed) {
               TW3CustomControl.CBClick$(Self,eventObj$20);
            }
            break;
         case 27 :
            TW3Button.SetPressed(Self,false);
            break;
      }
   }
   /// procedure TW3Button.CBMouseDown(eventObj: JMouseEvent)
   ///  [line: 141, column: 21, file: SmartCL.Controls.Button]
   ,CBMouseDown:function(Self, eventObj$21) {
      TW3CustomControl.CBMouseDown(Self,eventObj$21);
      if (PerformanceTimer.Now$1()<Self.FIgnoreMouse) {
         return;
      }
      if (TW3CustomControl.GetEnabled(Self)&&(eventObj$21.button==0)) {
         TW3Button.SetPressed(Self,true);
         TW3CustomControl.SetCapture(Self);
      }
   }
   /// procedure TW3Button.CBMouseMove(eventObj: JMouseEvent)
   ///  [line: 158, column: 21, file: SmartCL.Controls.Button]
   ,CBMouseMove:function(Self, eventObj$22) {
      TW3CustomControl.CBMouseMove(Self,eventObj$22);
      if (TW3CustomControl.a$18(Self)) {
         TW3Button.SetPressed(Self,TRect$ContainsPos$1(TW3MovableControl.ScreenRect(Self),eventObj$22.clientX,eventObj$22.clientY));
      }
   }
   /// procedure TW3Button.CBMouseUp(eventObj: JMouseEvent)
   ///  [line: 151, column: 21, file: SmartCL.Controls.Button]
   ,CBMouseUp:function(Self, eventObj$23) {
      TW3CustomControl.CBMouseUp(Self,eventObj$23);
      if (TW3CustomControl.a$18(Self)&&(eventObj$23.button==0)) {
         TW3CustomControl.CBClick$(Self,eventObj$23);
      }
   }
   /// function TW3Button.GetCaption() : String
   ///  [line: 58, column: 20, file: SmartCL.Controls.Button]
   ,GetCaption:function(Self) {
      var Result = "";
      if (Self.FHandle$3) {
         Result = ""+Self.FHandle$3.innerHTML;
      }
      return Result
   }
   /// procedure TW3Button.InitializeObject()
   ///  [line: 70, column: 21, file: SmartCL.Controls.Button]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      TW3MovableControl.SetWidth$(Self,100);
      TW3MovableControl.SetHeight$(Self,32);
      Self.FHandle$3.addEventListener("touchstart",function (e$11) {
         var t$4 = null;
         if (!TW3CustomControl.GetEnabled(Self)) {
            return;
         }
         if (Self.FPressed) {
            return;
         }
         TW3Button.SetPressed(Self,true);
         e$11.stopPropagation();
         Self.FHandle$3.addEventListener("touchmove",Self.FTouchMove,false);
         document.body.addEventListener("touchend",Self.FTouchEnd,false);
         t$4 = e$11.touches[0];
         Self.FTouchX = t$4.clientX;
         Self.FTouchY = t$4.clientY;
      },false);
      Self.FTouchMove = function (e$12) {
         var t$5 = null;
         t$5 = e$12.touches[0];
         if ((Math.abs(t$5.clientX-Self.FTouchX)>10)||(Math.abs(t$5.clientY-Self.FTouchY)>10)) {
            TW3Button.ResetClick(Self);
         }
      };
      Self.FTouchEnd = function (e$13) {
         TW3CustomControl.CBClick$(Self,e$13);
         Self.FIgnoreMouse = PerformanceTimer.Now$1()+1000;
      };
      TW3CustomControl._setMouseDown(Self,null);
      TW3CustomControl._setMouseUp(Self,null);
      TW3CustomControl._setMouseMove(Self,null);
      TW3CustomControl._setKeyDown(Self,null);
      TW3CustomControl._setKeyUp(Self,null);
   }
   /// function TW3Button.MakeElementTagObj() : THandle
   ///  [line: 115, column: 20, file: SmartCL.Controls.Button]
   ,MakeElementTagObj:function(Self) {
      return w3_createHtmlElement("button");
   }
   /// procedure TW3Button.ResetClick()
   ///  [line: 130, column: 21, file: SmartCL.Controls.Button]
   ,ResetClick:function(Self) {
      TW3Button.SetPressed(Self,false);
      if (TW3CustomControl.a$18(Self)) {
         TW3CustomControl.ReleaseCapture(Self);
      } else {
         Self.FHandle$3.removeEventListener("touchmove",Self.FTouchMove,false);
         document.body.removeEventListener("touchend",Self.FTouchEnd,false);
      }
   }
   /// procedure TW3Button.SetCaption(Value: String)
   ///  [line: 64, column: 21, file: SmartCL.Controls.Button]
   ,SetCaption:function(Self, Value$3) {
      if (Self.FHandle$3) {
         Self.FHandle$3.innerHTML = Value$3;
      }
   }
   /// procedure TW3Button.SetPressed(value: Boolean)
   ///  [line: 120, column: 21, file: SmartCL.Controls.Button]
   ,SetPressed:function(Self, value$7) {
      if (Self.FPressed!=value$7) {
         Self.FPressed = value$7;
         if (value$7) {
            w3_AddClass(Self.FHandle$3,PressedCSSClass);
         } else {
            w3_RemoveClass(Self.FHandle$3,PressedCSSClass);
         }
      }
   }
   ,Destroy:TW3TagObj.Destroy
   ,AfterUpdate:TW3CustomControl.AfterUpdate
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)}
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3CustomControl.StyleTagObject
   ,Create$44:TW3CustomControl.Create$44
   ,Criar$1:TW3CustomControl.Criar$1
   ,Resize:TW3MovableControl.Resize
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetWidth:TW3MovableControl.SetWidth
   ,supportAdjustment:TW3MovableControl.supportAdjustment
   ,CBClick$:function($){return $.ClassType.CBClick.apply($.ClassType, arguments)}
   ,CBKeyDown$:function($){return $.ClassType.CBKeyDown.apply($.ClassType, arguments)}
   ,CBKeyUp$:function($){return $.ClassType.CBKeyUp.apply($.ClassType, arguments)}
   ,CBMouseDown$:function($){return $.ClassType.CBMouseDown.apply($.ClassType, arguments)}
   ,CBMouseMove$:function($){return $.ClassType.CBMouseMove.apply($.ClassType, arguments)}
   ,CBMouseUp$:function($){return $.ClassType.CBMouseUp.apply($.ClassType, arguments)}
   ,Invalidate:TW3CustomControl.Invalidate
   ,SetEnabled:TW3CustomControl.SetEnabled
};
/// TW3AlertButton = class (TW3Button)
///  [line: 31, column: 3, file: SmartCL.Dialogs]
var TW3AlertButton = {
   $ClassName:"TW3AlertButton",$Parent:TW3Button
   ,$Init:function ($) {
      TW3Button.$Init($);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AfterUpdate:TW3CustomControl.AfterUpdate
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3Button.InitializeObject
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3Button.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3CustomControl.StyleTagObject
   ,Create$44:TW3CustomControl.Create$44
   ,Criar$1:TW3CustomControl.Criar$1
   ,Resize:TW3MovableControl.Resize
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetWidth:TW3MovableControl.SetWidth
   ,supportAdjustment:TW3MovableControl.supportAdjustment
   ,CBClick:TW3Button.CBClick
   ,CBKeyDown:TW3Button.CBKeyDown
   ,CBKeyUp:TW3Button.CBKeyUp
   ,CBMouseDown:TW3Button.CBMouseDown
   ,CBMouseMove:TW3Button.CBMouseMove
   ,CBMouseUp:TW3Button.CBMouseUp
   ,Invalidate:TW3CustomControl.Invalidate
   ,SetEnabled:TW3CustomControl.SetEnabled
};
/// TW3LabelText = class (TW3CustomControl)
///  [line: 19, column: 3, file: SmartCL.Controls.Label]
var TW3LabelText = {
   $ClassName:"TW3LabelText",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AfterUpdate:TW3CustomControl.AfterUpdate
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3CustomControl.StyleTagObject
   ,Create$44:TW3CustomControl.Create$44
   ,Criar$1:TW3CustomControl.Criar$1
   ,Resize:TW3MovableControl.Resize
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetWidth:TW3MovableControl.SetWidth
   ,supportAdjustment:TW3MovableControl.supportAdjustment
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyDown:TW3CustomControl.CBKeyDown
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,CBMouseDown:TW3CustomControl.CBMouseDown
   ,CBMouseMove:TW3CustomControl.CBMouseMove
   ,CBMouseUp:TW3CustomControl.CBMouseUp
   ,Invalidate:TW3CustomControl.Invalidate
   ,SetEnabled:TW3CustomControl.SetEnabled
};
/// TW3Label = class (TW3CustomControl)
///  [line: 22, column: 3, file: SmartCL.Controls.Label]
var TW3Label = {
   $ClassName:"TW3Label",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.FCaption$1 = "";
      $.FContainer = null;
      $.FTextAlign = 0;
   }
   /// procedure TW3Label.FinalizeObject()
   ///  [line: 71, column: 20, file: SmartCL.Controls.Label]
   ,FinalizeObject:function(Self) {
      TObject.Free(Self.FContainer);
      TW3CustomControl.FinalizeObject(Self);
   }
   /// procedure TW3Label.InitializeObject()
   ///  [line: 51, column: 20, file: SmartCL.Controls.Label]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      Self.FContainer = TW3Component.Create$44$($New(TW3LabelText),Self);
      w3_setStyle(Self.FContainer.FHandle$3,"text-overflow","ellipsis");
      w3_setStyle(Self.FContainer.FHandle$3,w3_CSSPrefixDef("text-overflow"),"ellipsis");
      w3_setStyle(Self.FContainer.FHandle$3,"white-space","nowrap");
      w3_setStyle(Self.FContainer.FHandle$3,"overflow","hidden");
      w3_setStyle(Self.FContainer.FHandle$3,w3_CSSPrefixDef("vertical-align"),"middle");
      TW3Label.SetCaption$1(Self,"Label");
      TW3MovableControl.SetHeight$(Self,12);
   }
   /// function TW3Label.MakeElementTagObj() : THandle
   ///  [line: 82, column: 19, file: SmartCL.Controls.Label]
   ,MakeElementTagObj:function(Self) {
      return w3_createHtmlElement("fieldset");
   }
   /// procedure TW3Label.Resize()
   ///  [line: 87, column: 20, file: SmartCL.Controls.Label]
   ,Resize:function(Self) {
      var dx$9 = 0;
      var dy$10 = 0;
      var wd$2 = 0;
      var hd$2 = 0;
      TW3MovableControl.Resize(Self);
      TW3TagObj.BeginUpdate(Self.FContainer);
      TW3MovableControl.SetBounds$2(Self.FContainer,0,0,2,2);
      wd$2 = ClampInt(TW3ScrollInfo.GetScrollWidth(TW3CustomControl.GetScrollInfo(Self.FContainer))+2,0,TW3MovableControl.ClientWidth(Self));
      hd$2 = ClampInt(TW3ScrollInfo.GetScrollHeight(TW3CustomControl.GetScrollInfo(Self.FContainer)),0,TW3MovableControl.ClientHeight(Self));
      switch (Self.FTextAlign) {
         case 0 :
            dy$10 = ($Div(TW3MovableControl.ClientHeight(Self),2))-($Div(hd$2,2));
            TW3MovableControl.SetBounds$2(Self.FContainer,0,dy$10,wd$2,hd$2);
            break;
         case 1 :
            dx$9 = ($Div(TW3MovableControl.ClientWidth(Self),2))-($Div(wd$2,2));
            dy$10 = ($Div(TW3MovableControl.ClientHeight(Self),2))-($Div(hd$2,2));
            TW3MovableControl.SetBounds$2(Self.FContainer,dx$9,dy$10,wd$2,hd$2);
            break;
         case 2 :
            dx$9 = TW3MovableControl.ClientWidth(Self)-wd$2;
            dy$10 = ($Div(TW3MovableControl.ClientHeight(Self),2))-($Div(hd$2,2));
            TW3MovableControl.SetBounds$2(Self.FContainer,dx$9,dy$10,wd$2,hd$2);
            break;
      }
      TW3TagObj.EndUpdate(Self.FContainer);
   }
   /// procedure TW3Label.SetCaption(const aValue: String)
   ///  [line: 122, column: 20, file: SmartCL.Controls.Label]
   ,SetCaption$1:function(Self, aValue$58) {
      if (aValue$58!=Self.FCaption$1) {
         TW3TagObj.BeginUpdate(Self);
         Self.FCaption$1 = aValue$58;
         TW3TagObj.SetInnerHTML(Self.FContainer,aValue$58);
         TW3TagObj.AddToComponentState(Self,[24]);
         TW3TagObj.EndUpdate(Self);
      }
   }
   /// procedure TW3Label.SetEnabled(aValue: Boolean)
   ///  [line: 134, column: 20, file: SmartCL.Controls.Label]
   ,SetEnabled:function(Self, aValue$59) {
      TW3CustomControl.SetEnabled(Self,aValue$59);
      TW3CustomControl.SetEnabled$(Self.FContainer,aValue$59);
   }
   /// procedure TW3Label.SetTextAlign(aNewAlignment: TTextAlign)
   ///  [line: 140, column: 20, file: SmartCL.Controls.Label]
   ,SetTextAlign$1:function(Self, aNewAlignment) {
      var AlignmentText = "";
      TW3TagObj.BeginUpdate(Self);
      Self.FTextAlign = aNewAlignment;
      switch (aNewAlignment) {
         case 0 :
            AlignmentText = "left";
            break;
         case 1 :
            AlignmentText = "center";
            break;
         case 2 :
            AlignmentText = "right";
            break;
      }
      w3_setStyle(Self.FContainer.FHandle$3,"text-align",AlignmentText);
      TW3TagObj.AddToComponentState(Self,[24]);
      TW3TagObj.EndUpdate(Self);
   }
   /// function TW3Label.SupportAdjustment() : Boolean
   ///  [line: 77, column: 25, file: SmartCL.Controls.Label]
   ,supportAdjustment:function(Self) {
      return false;
   }
   ,Destroy:TW3TagObj.Destroy
   ,AfterUpdate:TW3CustomControl.AfterUpdate
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)}
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3CustomControl.StyleTagObject
   ,Create$44:TW3CustomControl.Create$44
   ,Criar$1:TW3CustomControl.Criar$1
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetWidth:TW3MovableControl.SetWidth
   ,supportAdjustment$:function($){return $.supportAdjustment($)}
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyDown:TW3CustomControl.CBKeyDown
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,CBMouseDown:TW3CustomControl.CBMouseDown
   ,CBMouseMove:TW3CustomControl.CBMouseMove
   ,CBMouseUp:TW3CustomControl.CBMouseUp
   ,Invalidate:TW3CustomControl.Invalidate
   ,SetEnabled$:function($){return $.ClassType.SetEnabled.apply($.ClassType, arguments)}
};
/// TTextAlign enumeration
///  [line: 17, column: 3, file: SmartCL.Controls.Label]
var TTextAlign = [ "taLeft", "taCenter", "taRight" ];
/// PerformanceTimer = class (TObject)
///  [line: 15, column: 3, file: System.Diagnostics]
var PerformanceTimer = {
   $ClassName:"PerformanceTimer",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// procedure PerformanceTimer.PrepareGetNow()
   ///  [line: 56, column: 34, file: System.Diagnostics]
   ,PrepareGetNow:function() {
      
    if (window.performance && performance.now) {
      vGetNow = performance;
      vIsHighResolution = true;
    } else {
      vIsHighResolution = false;
      if (!Date.now) { Date.now = function (){ return +(new Date) } };
      vGetNow = Date;
    }
     }
   /// function PerformanceTimer.Now() : Float
   ///  [line: 49, column: 33, file: System.Diagnostics]
   ,Now$1:function() {
      var Result = 0;
      if (!vGetNow) {
         PerformanceTimer.PrepareGetNow();
      }
      Result = Number(vGetNow.now());
      return Result
   }
   ,Destroy:TObject.Destroy
};
/// TW3GameView = class (TW3GraphicControl)
///  [line: 27, column: 3, file: SmartCL.Game]
var TW3GameView = {
   $ClassName:"TW3GameView",$Parent:TW3GraphicControl
   ,$Init:function ($) {
      TW3GraphicControl.$Init($);
      $.AutoPause = $.FActive = $.FPaused = $.FWithFrameCounter = false;
      $.FAnimationCallback = null;
      $.FAnimationTimer = undefined;
      $.FDelay = $.FFrameCount = $.FFrameRate = 0;
      $.FFrameRateReference = $.FLastFrameReference = $.FLastFrameTime = 0;
      $.FFrameTimer = undefined;
      $.FVisibilityChange = null;
   }
   /// procedure TW3GameView.EndSession()
   ///  [line: 165, column: 23, file: SmartCL.Game]
   ,EndSession:function(Self) {
      if (!Self.FActive) {
         throw EW3Exception.CreateFmt($New(EW3GameException),$R[0],["EndSession", TObject.ClassName(Self.ClassType), "A session is not active error"]);
      }
      if (!Self.FPaused) {
         TW3GameView.Suspend(Self);
      }
      Self.FActive = false;
   }
   /// procedure TW3GameView.FinalizeObject()
   ///  [line: 111, column: 23, file: SmartCL.Game]
   ,FinalizeObject:function(Self) {
      document.removeEventListener(vVisibilityEventName,Self.FVisibilityChange);
      if (Self.FActive) {
         TW3GameView.EndSession(Self);
      }
      TW3GraphicControl.FinalizeObject(Self);
   }
   /// procedure TW3GameView.HandleCallBack()
   ///  [line: 119, column: 23, file: SmartCL.Game]
   ,HandleCallBack:function(Self) {
      ++Self.FFrameCount;
      if (Self.FDelay>0) {
         Self.FAnimationTimer = setTimeout(Self.FAnimationCallback,(Self.FDelay));
      } else {
         Self.FAnimationTimer = w3_RequestAnimationFrame(Self.FAnimationCallback);
      }
      if (Self.FLastFrameReference==0) {
         Self.FLastFrameReference = PerformanceTimer.Now$1();
         Self.FLastFrameTime = 0;
      } else {
         Self.FLastFrameTime = Self.FLastFrameReference;
         Self.FLastFrameReference = PerformanceTimer.Now$1();
         Self.FLastFrameTime = Self.FLastFrameReference-Self.FLastFrameTime;
      }
      TW3GraphicControl.Refresh(Self);
   }
   /// procedure TW3GameView.HandleFrameRateCallback()
   ///  [line: 139, column: 23, file: SmartCL.Game]
   ,HandleFrameRateCallback:function(Self) {
      var t$6 = 0;
      t$6 = Self.FFrameRateReference;
      Self.FFrameRateReference = PerformanceTimer.Now$1();
      Self.FFrameRate = Math.round((Self.FFrameCount*1000)/(Self.FFrameRateReference-t$6));
      Self.FFrameCount = 0;
      Self.FFrameTimer = setTimeout($Event0(Self,TW3GameView.HandleFrameRateCallback),1000);
   }
   /// procedure TW3GameView.InitializeObject()
   ///  [line: 92, column: 23, file: SmartCL.Game]
   ,InitializeObject:function(Self) {
      TW3GraphicControl.InitializeObject(Self);
      Self.FVisibilityChange = $Event0(Self,TW3GameView.VisibilityChange);
      if (vVisibilityEventName=="") {
         if (document["hidden"]!=undefined) {
            vVisibilityEventName = "visibilitychange";
            vVisibilityHiddenName = "hidden";
         } else {
            vVisibilityEventName = "webkitvisibilitychange";
            vVisibilityHiddenName = "webkitHidden";
         }
      }
      document.addEventListener(vVisibilityEventName,Self.FVisibilityChange);
      Self.AutoPause = true;
   }
   /// procedure TW3GameView.Resume()
   ///  [line: 177, column: 23, file: SmartCL.Game]
   ,Resume:function(Self) {
      Self.FAnimationCallback = $Event0(Self,TW3GameView.HandleCallBack);
      if (Self.FDelay>0) {
         Self.FAnimationTimer = setTimeout(Self.FAnimationCallback,(Self.FDelay));
      } else {
         Self.FAnimationTimer = w3_RequestAnimationFrame(Self.FAnimationCallback);
      }
      Self.FLastFrameReference = 0;
      if (Self.FWithFrameCounter) {
         Self.FFrameTimer = setTimeout($Event0(Self,TW3GameView.HandleFrameRateCallback),1000);
         Self.FFrameRateReference = PerformanceTimer.Now$1();
      } else {
         Self.FFrameTimer = null;
      }
   }
   /// procedure TW3GameView.SetDelay(value: Integer)
   ///  [line: 206, column: 23, file: SmartCL.Game]
   ,SetDelay:function(Self, value$8) {
      if (Self.FActive) {
         throw EW3Exception.CreateFmt($New(EW3GameException),$R[0],["setDelay", TObject.ClassName(Self.ClassType), "Property cannot be altered while active error"]);
      }
      Self.FDelay = Math.max(value$8,0);
   }
   /// procedure TW3GameView.SetPaused(value: Boolean)
   ///  [line: 215, column: 23, file: SmartCL.Game]
   ,SetPaused:function(Self, value$9) {
      if (Self.FPaused==value$9) {
         return;
      }
      Self.FPaused = value$9;
      if (!Self.FActive) {
         return;
      }
      if (Self.FPaused) {
         TW3GameView.Suspend(Self);
      } else {
         TW3GameView.Resume(Self);
      }
   }
   /// procedure TW3GameView.StartSession(withFrameCounter: Boolean)
   ///  [line: 150, column: 23, file: SmartCL.Game]
   ,StartSession:function(Self, withFrameCounter) {
      if (Self.FActive) {
         throw EW3Exception.CreateFmt($New(EW3GameException),$R[0],["StartSession", TObject.ClassName(Self.ClassType), "A session is active error"]);
      }
      Self.FActive = true;
      Self.FWithFrameCounter = withFrameCounter;
      Self.FLastFrameTime = 0;
      if (!Self.FPaused) {
         TW3GameView.Resume(Self);
      }
   }
   /// procedure TW3GameView.Suspend()
   ///  [line: 193, column: 23, file: SmartCL.Game]
   ,Suspend:function(Self) {
      if (!Self.FDelay) {
         w3_CancelAnimationFrame(Self.FAnimationTimer);
      } else {
         clearTimeout(Self.FAnimationTimer);
      }
      Self.FAnimationTimer = null;
      if (Self.FFrameTimer) {
         clearTimeout(Self.FFrameTimer);
         Self.FFrameTimer = null;
      }
   }
   /// procedure TW3GameView.VisibilityChange()
   ///  [line: 226, column: 23, file: SmartCL.Game]
   ,VisibilityChange:function(Self) {
      TW3GameView.SetPaused(Self,(document[vVisibilityHiddenName]?true:false));
   }
   ,Destroy:TW3TagObj.Destroy
   ,AfterUpdate:TW3CustomControl.AfterUpdate
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3GraphicControl.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3CustomControl.StyleTagObject
   ,Create$44:TW3CustomControl.Create$44
   ,Criar$1:TW3CustomControl.Criar$1
   ,Resize:TW3GraphicControl.Resize
   ,SetHeight:TW3GraphicControl.SetHeight
   ,SetWidth:TW3GraphicControl.SetWidth
   ,supportAdjustment:TW3MovableControl.supportAdjustment
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyDown:TW3CustomControl.CBKeyDown
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,CBMouseDown:TW3CustomControl.CBMouseDown
   ,CBMouseMove:TW3CustomControl.CBMouseMove
   ,CBMouseUp:TW3CustomControl.CBMouseUp
   ,Invalidate:TW3GraphicControl.Invalidate
   ,SetEnabled:TW3CustomControl.SetEnabled
};
/// EW3GameException = class (EW3Exception)
///  [line: 24, column: 3, file: SmartCL.Game]
var EW3GameException = {
   $ClassName:"EW3GameException",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// TPlat = class (TObject)
///  [line: 19, column: 6, file: UPlat]
var TPlat = {
   $ClassName:"TPlat",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.Crumble = $.Crumbling = $.horizontal = $.jumpThrough = $.Moves = $.MovingX = $.MovingY = $.noFall = $.NoWallJump = $.turretOnLeftOrTop = $.turretOnRightOrBottom = false;
      $.GravSpeed = $.Height$8 = $.InitX = $.InitY = $.MoveSpeed = $.Width$10 = $.X$3 = $.XMove = $.XMoved = $.Y$3 = $.YMove = $.YMoved = 0;
      $.TimeTillFall = 0;
   }
   /// function TPlat.collidesWithDoor(Door: TE) : Boolean
   ///  [line: 434, column: 16, file: UPlat]
   ,collidesWithDoor:function(Self, Door) {
      var Result = false;
      var stillCheck = false;
      stillCheck = false;
      if (((Self.X$3+Self.Width$10)<=(Door.X$2+30))&&((Self.X$3+Self.Width$10)>=Door.X$2)) {
         stillCheck = true;
      } else if ((Self.X$3<=(Door.X$2+30))&&(Self.X$3>=Door.X$2)) {
         stillCheck = true;
      } else if ((Self.X$3<=Door.X$2)&&((Self.X$3+Self.Width$10)>=(Door.X$2+30))) {
         stillCheck = true;
      }
      if (stillCheck) {
         if (((Self.Y$3+Self.Height$8)<=(Door.Y$2+60))&&((Self.Y$3+Self.Height$8)>=Door.Y$2)) {
            return true;
         } else if ((Self.Y$3<=(Door.Y$2+60))&&(Self.Y$3>=Door.Y$2)) {
            return true;
         } else if (((Self.Y$3+Self.Height$8)>=Door.Y$2)&&(Self.Y$3<=Door.Y$2)) {
            return true;
         }
      }
      return false;
      return Result
   }
   /// function TPlat.collidesWithPlat(Plat: TPlat) : Boolean
   ///  [line: 482, column: 16, file: UPlat]
   ,collidesWithPlat:function(Self, Plat) {
      var Result = false;
      var stillCheck$1 = false;
      stillCheck$1 = false;
      if (((Self.X$3+Self.Width$10)<=(Plat.X$3+Plat.Width$10+30))&&((Self.X$3+Self.Width$10)>=(Plat.X$3-30))) {
         stillCheck$1 = true;
      } else if ((Self.X$3<=(Plat.X$3+Plat.Width$10+30))&&(Self.X$3>=(Plat.X$3-30))) {
         stillCheck$1 = true;
      } else if (((Self.X$3+Self.Width$10)>=(Plat.X$3+Plat.Width$10+30))&&(Self.X$3<=(Plat.X$3-30))) {
         stillCheck$1 = true;
      }
      if (stillCheck$1) {
         if (((Self.Y$3+Self.Height$8)<=(Plat.Y$3+Plat.Height$8+60))&&((Self.Y$3+Self.Height$8)>=(Plat.Y$3-60))) {
            return true;
         } else if ((Self.Y$3<=(Plat.Y$3+Plat.Height$8+60))&&(Self.Y$3>=(Plat.Y$3-60))) {
            return true;
         } else if (((Self.Y$3+Self.Height$8)>=(Plat.Y$3+Plat.Height$8+60))&&(Self.Y$3<=(Plat.Y$3-60))) {
            return true;
         }
      }
      return false;
      return Result
   }
   /// constructor TPlat.createF(newX: Integer; newY: Integer; newWidth: Integer; newHeight: Integer; ThroughorWallJump: Boolean = False; fall: Boolean = False; willCrumble: Boolean = False; willMove: Boolean = False; MovesUp: Boolean = False; MaxMove: Integer = 0; onTopOrLeft: Boolean = False; onBottomOrRight: Boolean = False)
   ///  [line: 48, column: 19, file: UPlat]
   ,createF:function(Self, newX, newY, newWidth, newHeight, ThroughorWallJump, fall, willCrumble, willMove, MovesUp, MaxMove, onTopOrLeft, onBottomOrRight) {
      Self.X$3 = newX;
      Self.Y$3 = newY;
      Self.Width$10 = newWidth;
      Self.Height$8 = newHeight;
      Self.jumpThrough = ThroughorWallJump;
      Self.NoWallJump = false;
      Self.noFall = fall;
      Self.Crumble = willCrumble;
      if (Self.Width$10<Self.Height$8) {
         Self.horizontal = false;
         Self.jumpThrough = false;
         Self.NoWallJump = ThroughorWallJump;
         Self.jumpThrough = false;
      } else {
         Self.horizontal = true;
      }
      Self.GravSpeed = 0;
      Self.TimeTillFall = 0;
      Self.Moves = willMove;
      Self.InitX = newX;
      Self.InitY = newY;
      if (Self.Moves) {
         if (MovesUp) {
            Self.MovingX = false;
            Self.MovingY = true;
            Self.XMove = 0;
            Self.YMove = MaxMove;
            Self.InitY = newY+(MaxMove/2);
         } else {
            Self.MovingX = true;
            Self.MovingY = false;
            Self.XMove = MaxMove;
            Self.YMove = 0;
            Self.InitX = newX+(MaxMove/2);
         }
         Self.XMoved = 0;
         Self.YMoved = 0;
      }
      Self.MoveSpeed = 0;
      if (onTopOrLeft) {
         Self.turretOnLeftOrTop = true;
      }
      if (onBottomOrRight) {
         Self.turretOnRightOrBottom = true;
      }
      return Self
   }
   /// constructor TPlat.createR(ScreenWidth: Integer; ScreenHeight: Integer; PHeight: Integer; PWidth: Integer; Door1: TE; Door2: TE; Rand: array of TPlat; Fix: array of TPlat; verticals: Float = 0; through: Float = 0; fall: Float = 0; noWallJumps: Float = 0; crumbles: Float = 0; Movers: Float = 0; MoversLtoR: Float = 0; MaximumMove: Float = 0; onToporLefts: Float = 0; onBottomorRights: Float = 0)
   ///  [line: 103, column: 19, file: UPlat]
   ,createR:function(Self, ScreenWidth, ScreenHeight, PHeight, PWidth, Door1, Door2, Rand, Fix, verticals, through, fall$1, noWallJumps, crumbles, Movers, MoversLtoR, MaximumMove, onToporLefts, onBottomorRights) {
      var i$20 = 0;
      var Spawned = false;
      var howMany = 0;
      var vertical = 0;
      var canNotFall = 0;
      var canJumpThrough = 0;
      var canWallJump = 0;
      var willCrumble$1 = 0;
      var willMove$1 = 0;
      var MAXMOVING = 0;
      var willMoveonX = 0;
      var TurretProb = 0;
      vertical = RandomInt(100);
      if (vertical<verticals) {
         Self.horizontal = false;
      } else {
         Self.horizontal = true;
      }
      if (Self.horizontal==true) {
         while (Spawned==false) {
            if (howMany<=10) {
               Self.X$3 = RandomInt(ScreenWidth);
               Self.Y$3 = RandomInt(ScreenHeight-75)+75;
               Self.Width$10 = RandomInt(150)+50;
               Self.Height$8 = 10;
               Spawned = true;
            } else {
               Self.X$3 = RandomInt(ScreenWidth+10000);
               Self.Y$3 = RandomInt(ScreenHeight+10000);
               Self.Y$3+=75;
               Self.Width$10 = RandomInt(150)+50;
               Self.Height$8 = 10;
               Spawned = true;
            }
            if (Spawned==true) {
               if (TPlat.collidesWithDoor(Self,Door1)) {
                  Spawned = false;
                  howMany+=1;
               }
            }
            if (Spawned==true) {
               if (TPlat.collidesWithDoor(Self,Door2)) {
                  Spawned = false;
                  howMany+=1;
               }
            }
            if (Spawned==true) {
               var $temp31;
               for(i$20=0,$temp31=Fix.length;i$20<$temp31;i$20++) {
                  if (TPlat.collidesWithPlat(Self,Fix[i$20])) {
                     Spawned = false;
                     howMany+=1;
                  }
               }
            }
            if (Spawned==true) {
               var $temp32;
               for(i$20=0,$temp32=Rand.length;i$20<$temp32;i$20++) {
                  if (Rand[i$20].horizontal==true) {
                     if (TPlat.collidesWithPlat(Self,Rand[i$20])) {
                        Spawned = false;
                        howMany+=1;
                     }
                  }
               }
            }
         }
      }
      if (Self.horizontal==false) {
         while (Spawned==false) {
            if (howMany<=10) {
               Self.X$3 = RandomInt(ScreenWidth);
               Self.Y$3 = RandomInt(ScreenHeight-75)+75;
               Self.Width$10 = 10;
               Self.Height$8 = RandomInt(150)+50;
               Spawned = true;
            } else {
               Self.X$3 = RandomInt(ScreenWidth+10000);
               Self.Y$3 = RandomInt(ScreenHeight+10000);
               Self.Y$3+=75;
               Self.Width$10 = 10;
               Self.Height$8 = RandomInt(150)+50;
               Spawned = true;
            }
            if (Spawned==true) {
               if (TPlat.collidesWithDoor(Self,Door1)) {
                  Spawned = false;
                  howMany+=1;
               }
            }
            if (Spawned==true) {
               if (TPlat.collidesWithDoor(Self,Door2)) {
                  Spawned = false;
                  howMany+=1;
               }
            }
            if (Spawned==true) {
               var $temp33;
               for(i$20=0,$temp33=Fix.length;i$20<$temp33;i$20++) {
                  if (TPlat.collidesWithPlat(Self,Fix[i$20])) {
                     Spawned = false;
                     howMany+=1;
                  }
               }
            }
            if (Spawned==true) {
               var $temp34;
               for(i$20=0,$temp34=Rand.length;i$20<$temp34;i$20++) {
                  if (Rand[i$20].horizontal==false) {
                     if (TPlat.collidesWithPlat(Self,Rand[i$20])) {
                        Spawned = false;
                        howMany+=1;
                     }
                  }
               }
            }
         }
      }
      canNotFall = RandomInt(100);
      if (canNotFall<fall$1) {
         Self.noFall = true;
      } else {
         Self.noFall = false;
      }
      canJumpThrough = RandomInt(100);
      if ((canJumpThrough<through)&&Self.horizontal) {
         Self.jumpThrough = true;
      } else {
         Self.jumpThrough = false;
      }
      canWallJump = RandomInt(100);
      if ((canWallJump<noWallJumps)&&(Self.horizontal==false)) {
         Self.NoWallJump = true;
      } else {
         Self.NoWallJump = false;
      }
      willCrumble$1 = RandomInt(100);
      if (willCrumble$1<crumbles) {
         Self.Crumble = true;
      } else {
         Self.Crumble = false;
      }
      willMove$1 = RandomInt(100);
      if (willMove$1<Movers) {
         Self.Moves = true;
      } else {
         Self.Moves = false;
      }
      MAXMOVING = RandomInt(Trunc(MaximumMove));
      willMoveonX = RandomInt(100);
      if (willMoveonX<MoversLtoR) {
         Self.MovingX = true;
         Self.XMove = MAXMOVING;
      } else {
         Self.MovingY = true;
         Self.YMove = MAXMOVING;
      }
      Self.InitX = Self.X$3+(Self.XMove/2);
      Self.InitY = Self.Y$3+(Self.YMove/2);
      TurretProb = Random()*100;
      if (TurretProb<onToporLefts) {
         Self.turretOnLeftOrTop = true;
      }
      TurretProb = Random()*100;
      if (TurretProb<onBottomorRights) {
         Self.turretOnRightOrBottom = true;
      }
      return Self
   }
   /// procedure TPlat.CrumbleUpdate()
   ///  [line: 332, column: 17, file: UPlat]
   ,CrumbleUpdate:function(Self) {
      if (Self.Crumbling) {
         if (Self.TimeTillFall>20) {
            Self.GravSpeed+=1;
            Self.Y$3+=Self.GravSpeed;
         }
         ++Self.TimeTillFall;
      }
   }
   /// function TPlat.MoveUpdate(px: Float; py: Float; px2: Float; py2: Float) : 
   ///  [line: 345, column: 16, file: UPlat]
   ,MoveUpdate:function(Self, px, py, px2, py2) {
      var Result = [0,0];
      var Return = [0,0];
      if (Self.Moves&&(Self.Crumbling==false)) {
         if (Self.MovingX) {
            if (Self.MoveSpeed>0) {
               if (Self.XMoved>=((Self.XMove/2)-Self.Width$10)) {
                  Self.MoveSpeed-=0.5;
               } else {
                  Self.MoveSpeed+=0.5;
               }
               if (Self.MoveSpeed>5) {
                  Self.MoveSpeed = 5;
               }
               Self.XMoved+=Self.MoveSpeed;
               Self.X$3 = Self.InitX+Self.XMoved;
               if (TPlat.PlayerCollidesPlat(Self,px,py,px2,py2)) {
                  Return[0] = Self.MoveSpeed;
               }
            } else {
               if (Self.XMoved<=((-Self.XMove)/2)) {
                  Self.MoveSpeed+=0.5;
               } else {
                  Self.MoveSpeed-=0.5;
               }
               if (Self.MoveSpeed<=(-5)) {
                  Self.MoveSpeed = -5;
               }
               Self.XMoved+=Self.MoveSpeed;
               Self.X$3 = Self.InitX+Self.XMoved;
               if (TPlat.PlayerCollidesPlat(Self,px,py,px2,py2)) {
                  Return[0] = Self.MoveSpeed;
               }
            }
         } else if (Self.MovingY) {
            if (Self.MoveSpeed>0) {
               if (Self.YMoved>=((Self.YMove/2)-Self.Height$8)) {
                  Self.MoveSpeed-=0.5;
               } else {
                  Self.MoveSpeed+=0.5;
               }
               if (Self.MoveSpeed>5) {
                  Self.MoveSpeed = 5;
               }
               Self.YMoved+=Self.MoveSpeed;
               Self.Y$3 = Self.InitY+Self.YMoved;
               if (TPlat.PlayerCollidesPlat(Self,px,py,px2,py2)) {
                  Return[1] = Self.MoveSpeed;
               }
            } else {
               if (Self.YMoved<=((-Self.YMove)/2)) {
                  Self.MoveSpeed+=0.5;
               } else {
                  Self.MoveSpeed-=0.5;
               }
               if (Self.MoveSpeed<=(-5)) {
                  Self.MoveSpeed = -5;
               }
               Self.YMoved+=Self.MoveSpeed;
               Self.Y$3 = Self.InitY+Self.YMoved;
            }
         }
      }
      return Result = Return.slice(0);
      return Result
   }
   /// function TPlat.PlayerCollidesPlat(px: Float; py: Float; px2: Float; py2: Float) : Boolean
   ///  [line: 422, column: 16, file: UPlat]
   ,PlayerCollidesPlat:function(Self, px$1, py$1, px2$1, py2$1) {
      var Result = false;
      if ((px2$1>Self.X$3)&&(px2$1<(Self.X$3+Self.Width$10))) {
         if ((py2$1>=(Self.Y$3-6))&&(py$1<(Self.Y$3+Self.Height$8))) {
            return true;
         }
      }
      return false;
      return Result
   }
   ,Destroy:TObject.Destroy
};
/// TE = class (TObject)
///  [line: 15, column: 3, file: UE]
var TE = {
   $ClassName:"TE",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.X$2 = $.Y$2 = 0;
      $.Won = false;
   }
   /// constructor TE.create(newX: Integer; newY: Integer)
   ///  [line: 29, column: 16, file: UE]
   ,create:function(Self, newX$1, newY$1) {
      Self.X$2 = newX$1;
      Self.Y$2 = newY$1;
      return Self
   }
   /// function TE.isDone(Cord1: Float; Cord3: Float; Cord4: Float) : Boolean
   ///  [line: 35, column: 13, file: UE]
   ,isDone:function(Self, Cord1, Cord3, Cord4) {
      var Result = false;
      if (((Cord1<=(Self.X$2+30))&&(Cord3>=Self.X$2))&&(Cord4==(Self.Y$2+60))) {
         return true;
      } else {
         return false;
      }
      return Result
   }
   ,Destroy:TObject.Destroy
};
/// MoveCommands enumeration
///  [line: 19, column: 3, file: UGlobalsNoUserTypes]
var MoveCommands = [ "right", "left", "null" ];
/// GameModes enumeration
///  [line: 23, column: 3, file: UGlobalsNoUserTypes]
var GameModes = [ "maingame", "levelselector", "settings" ];
/// TText = class (TObject)
///  [line: 15, column: 3, file: UGameText]
var TText = {
   $ClassName:"TText",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.text = $.colour$1 = "";
      $.x$33 = $.y$32 = 0;
   }
   /// constructor TText.create(newText: String; newColour: String; newX: Integer; newY: Integer)
   ///  [line: 23, column: 19, file: UGameText]
   ,create$4:function(Self, newText, newColour, newX$2, newY$2) {
      Self.text = newText;
      Self.x$33 = newX$2;
      Self.y$32 = newY$2;
      Self.colour$1 = newColour;
      return Self
   }
   ,Destroy:TObject.Destroy
};
/// TPlayer = class (TObject)
///  [line: 30, column: 6, file: UPlayer]
var TPlayer = {
   $ClassName:"TPlayer",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.AtGround = $.canMove = $.canShoot = $.CanWallJump = $.dead = $.FaceLeft = $.FallChangeThisFrame = $.GoingLeft = $.GoingRight = $.KnockBackLeft = false;
      $.colour = "";
      $.Damage = $.Fall = $.GravSpeed$1 = $.i = $.Jump = $.Jumps = $.KnockBackFrame = $.timeSinceShot = 0;
      $.Health = $.HealthRegen = $.MoveSpeed$1 = $.SX = $.SY = $.X$4 = $.Y$4 = 0;
   }
   /// function TPlayer.CollideBottom(Plat: TPlat) : Boolean
   ///  [line: 624, column: 18, file: UPlayer]
   ,CollideBottom:function(Self, Plat$1) {
      var Result = false;
      var stillCheck$2 = false;
      stillCheck$2 = false;
      if (!Self.Jump) {
         if ((Self.X$4<(Plat$1.X$3+Plat$1.Width$10))&&((Self.X$4+15)>Plat$1.X$3)) {
            stillCheck$2 = true;
         }
         if (stillCheck$2) {
            if (Self.GravSpeed$1<Plat$1.Height$8) {
               if (((Self.Y$4+45)<=(Plat$1.Y$3+Plat$1.Height$8))&&((Self.Y$4+45)>=Plat$1.Y$3)) {
                  return true;
               }
            } else {
               if ((Self.Y$4<=(Plat$1.Y$3+Plat$1.Height$8))&&((Self.Y$4+45)>=Plat$1.Y$3)) {
                  return true;
               }
            }
         }
      }
      return false;
      return Result
   }
   /// procedure TPlayer.CollidedBottom(Plat: TPlat)
   ///  [line: 502, column: 19, file: UPlayer]
   ,CollidedBottom:function(Self, Plat$2) {
      Self.Y$4 = Plat$2.Y$3-45;
      Self.AtGround = true;
      Self.Jumps = 0;
      Self.GravSpeed$1 = 0;
      Self.KnockBackFrame = -1;
      if (Plat$2.Crumble) {
         Plat$2.Crumbling = true;
      }
   }
   /// procedure TPlayer.CollidedLeft(Plat: TPlat)
   ///  [line: 459, column: 19, file: UPlayer]
   ,CollidedLeft:function(Self, Plat$3) {
      if (Self.MoveSpeed$1<0.2) {
         Self.MoveSpeed$1 = -0.1;
         Self.X$4 = Plat$3.X$3+Plat$3.Width$10+0.1;
      }
      if (Plat$3.NoWallJump==false) {
         Self.CanWallJump = true;
      }
      if (Self.KnockBackFrame!=(-1)) {
         Self.Jump = Self.KnockBackFrame;
         Self.KnockBackFrame = -1;
      }
   }
   /// procedure TPlayer.CollidedRight(Plat: TPlat)
   ///  [line: 475, column: 19, file: UPlayer]
   ,CollidedRight:function(Self, Plat$4) {
      if (Self.MoveSpeed$1>(-0.2)) {
         Self.MoveSpeed$1 = 0.1;
         Self.X$4 = Plat$4.X$3-15-0.1;
      }
      if (Plat$4.NoWallJump==false) {
         Self.CanWallJump = true;
      }
      if (Self.KnockBackFrame!=(-1)) {
         Self.Jump = Self.KnockBackFrame;
         Self.KnockBackFrame = -1;
      }
   }
   /// procedure TPlayer.CollidedTop(Plat: TPlat)
   ///  [line: 491, column: 19, file: UPlayer]
   ,CollidedTop:function(Self, Plat$5) {
      Self.Jump = 0;
      if (Self.KnockBackFrame!=(-1)) {
         Self.KnockBackFrame = 0;
      }
      Self.Y$4 = Plat$5.Y$3+Plat$5.Height$8+0.25;
      Self.GravSpeed$1 = 0;
   }
   /// function TPlayer.CollideLeft(Plat: TPlat) : Boolean
   ///  [line: 515, column: 18, file: UPlayer]
   ,CollideLeft:function(Self, Plat$6) {
      var Result = false;
      var stillCheck$3 = false;
      stillCheck$3 = false;
      if ((Self.X$4<=(Plat$6.X$3+Plat$6.Width$10))&&(Self.X$4>=((Plat$6.X$3+Plat$6.Width$10)-5-1))) {
         stillCheck$3 = true;
      }
      if (stillCheck$3) {
         if (((Self.Y$4+45)>Plat$6.Y$3)&&((Self.Y$4+45)<(Plat$6.Y$3+Plat$6.Height$8))) {
            return true;
         } else if ((Self.Y$4>Plat$6.Y$3)&&(Self.Y$4<(Plat$6.Y$3+Plat$6.Height$8))) {
            return true;
         } else if ((Self.Y$4<Plat$6.Y$3)&&((Self.Y$4+45)>(Plat$6.Y$3+Plat$6.Height$8))) {
            return true;
         }
      }
      return false;
      return Result
   }
   /// function TPlayer.CollideRight(Plat: TPlat) : Boolean
   ///  [line: 552, column: 18, file: UPlayer]
   ,CollideRight:function(Self, Plat$7) {
      var Result = false;
      var stillCheck$4 = false;
      stillCheck$4 = false;
      if (((Self.X$4+15)>=Plat$7.X$3)&&((Self.X$4+15)<=(Plat$7.X$3+5+1))) {
         stillCheck$4 = true;
      }
      if (stillCheck$4) {
         if (((Self.Y$4+45)>Plat$7.Y$3)&&((Self.Y$4+45)<(Plat$7.Y$3+Plat$7.Height$8))) {
            return true;
         } else if ((Self.Y$4>Plat$7.Y$3)&&(Self.Y$4<(Plat$7.Y$3+Plat$7.Height$8))) {
            return true;
         } else if ((Self.Y$4<Plat$7.Y$3)&&((Self.Y$4+45)>(Plat$7.Y$3+Plat$7.Height$8))) {
            return true;
         }
      }
      return false;
      return Result
   }
   /// function TPlayer.CollideTop(Plat: TPlat) : Boolean
   ///  [line: 589, column: 18, file: UPlayer]
   ,CollideTop:function(Self, Plat$8) {
      var Result = false;
      var stillCheck$5 = false;
      stillCheck$5 = false;
      if (((Self.Jump!=0)&&(Plat$8.jumpThrough==false))&&((Self.Y$4+45)>(Plat$8.Y$3+Plat$8.Height$8))) {
         if ((Self.X$4<(Plat$8.X$3+Plat$8.Width$10))&&((Self.X$4+15)>Plat$8.X$3)) {
            stillCheck$5 = true;
         }
         if (stillCheck$5) {
            if ((Self.Y$4<=(Plat$8.Y$3+Plat$8.Height$8))&&((Self.Y$4+45)>=Plat$8.Y$3)) {
               return true;
            }
         }
      }
      return false;
      return Result
   }
   /// procedure TPlayer.create(newX: Float; newY: Float; newColour: String; newHealth: Integer; FixedPlats: array of TPlat; RandPlats: array of TPlat; newDamage: Integer = 15)
   ///  [line: 95, column: 19, file: UPlayer]
   ,create$1:function(Self, newX$3, newY$3, newColour$1, newHealth, FixedPlats, RandPlats$2, newDamage) {
      Self.X$4 = newX$3;
      Self.Y$4 = newY$3;
      Self.SX = newX$3;
      Self.SY = newY$3;
      Self.GravSpeed$1 = 0;
      Self.Jump = 0;
      Self.GoingLeft = false;
      Self.GoingRight = false;
      Self.AtGround = false;
      Self.Jumps = 2;
      Self.Fall = 0;
      Self.FaceLeft = false;
      Self.colour = newColour$1;
      Self.timeSinceShot = 30;
      Self.canShoot = true;
      Self.MoveSpeed$1 = 0;
      Self.canMove = true;
      Self.dead = false;
      Self.KnockBackFrame = -1;
      Self.Damage = newDamage;
      Self.Health = newHealth;
      Self.HealthRegen = 0.1;
      Self.CanWallJump = false;
   }
   /// procedure TPlayer.doFall()
   ///  [line: 450, column: 19, file: UPlayer]
   ,doFall:function(Self) {
      if ((Self.Fall==0)&&(Self.AtGround==true)) {
         Self.Fall = 15;
         Self.GravSpeed$1 = 0;
      }
   }
   /// procedure TPlayer.doJump()
   ///  [line: 420, column: 19, file: UPlayer]
   ,doJump:function(Self) {
      if (((Self.Jumps<2)&&(Self.Jump<=7))&&(Self.Fall==0)) {
         Self.Fall = 0;
         Self.Jumps+=1;
         Self.Jump = 15;
      }
      if (Self.CanWallJump&&(Self.Fall==0)) {
         Self.Fall = 0;
         Self.Jumps = 1;
         Self.Jump = 15;
         if (Self.MoveSpeed$1==0) {
            if (Self.FaceLeft) {
               Self.MoveSpeed$1 = 5;
            } else {
               Self.MoveSpeed$1 = -5;
            }
         } else if (Self.MoveSpeed$1<0) {
            Self.MoveSpeed$1 = 5;
         } else {
            Self.MoveSpeed$1 = -5;
         }
      }
   }
   /// procedure TPlayer.FallDead()
   ///  [line: 237, column: 19, file: UPlayer]
   ,FallDead:function(Self) {
      Self.MoveSpeed$1 = 0;
      Self.Y$4+=Self.GravSpeed$1;
      if (Self.GravSpeed$1<=30) {
         Self.GravSpeed$1+=1;
      }
   }
   /// procedure TPlayer.isGrounded(height: Float; Fixed: array of TPlat; Rand: array of TPlat)
   ///  [line: 264, column: 19, file: UPlayer]
   ,isGrounded:function(Self, height$13, Fixed, Rand$1) {
      Self.CanWallJump = false;
      Self.i = 0;
      while (Self.i<=(Fixed.length-1)) {
         if ((Self.Fall==0)||Fixed[Self.i].noFall) {
            if (TPlayer.CollideLeft(Self,Fixed[Self.i])) {
               TPlayer.CollidedLeft(Self,Fixed[Self.i]);
               break;
            }
         }
         Self.i+=1;
      }
      Self.i = 0;
      while (Self.i<=(Fixed.length-1)) {
         if ((Self.Fall==0)||Fixed[Self.i].noFall) {
            if (TPlayer.CollideRight(Self,Fixed[Self.i])) {
               TPlayer.CollidedRight(Self,Fixed[Self.i]);
               break;
            }
         }
         Self.i+=1;
      }
      Self.i = 0;
      while (Self.i<=(Rand$1.length-1)) {
         if ((Self.Fall==0)||Rand$1[Self.i].noFall) {
            if (TPlayer.CollideLeft(Self,Rand$1[Self.i])) {
               TPlayer.CollidedLeft(Self,Rand$1[Self.i]);
               break;
            }
         }
         Self.i+=1;
      }
      Self.i = 0;
      while (Self.i<=(Rand$1.length-1)) {
         if ((Self.Fall==0)||Rand$1[Self.i].noFall) {
            if (TPlayer.CollideRight(Self,Rand$1[Self.i])) {
               TPlayer.CollidedRight(Self,Rand$1[Self.i]);
               break;
            }
         }
         Self.i+=1;
      }
      Self.AtGround = false;
      Self.i = 0;
      while (Self.i<=(Fixed.length-1)) {
         if (TPlayer.CollideTop(Self,Fixed[Self.i])) {
            TPlayer.CollidedTop(Self,Fixed[Self.i]);
            break;
         }
         Self.i+=1;
      }
      Self.i = 0;
      while (Self.i<=(Rand$1.length-1)) {
         if (TPlayer.CollideTop(Self,Rand$1[Self.i])) {
            TPlayer.CollidedTop(Self,Rand$1[Self.i]);
            break;
         }
         Self.i+=1;
      }
      Self.i = 0;
      while ((Self.AtGround==false)&&(Self.i<=(Fixed.length-1))) {
         if (TPlayer.CollideBottom(Self,Fixed[Self.i])) {
            if ((Self.Fall==0)||Fixed[Self.i].noFall) {
               Self.Fall = 0;
               TPlayer.CollidedBottom(Self,Fixed[Self.i]);
               break;
            } else if (((Self.FallChangeThisFrame==true)&&(Self.Fall<=2))&&(Fixed[Self.i].horizontal==false)) {
               Self.Fall = 2;
               break;
            }
         }
         Self.i+=1;
      }
      Self.i = 0;
      while ((Self.AtGround==false)&&(Self.i<=(Rand$1.length-1))) {
         if (TPlayer.CollideBottom(Self,Rand$1[Self.i])) {
            if ((Self.Fall==0)||Rand$1[Self.i].noFall) {
               Self.Fall = 0;
               TPlayer.CollidedBottom(Self,Rand$1[Self.i]);
               break;
            } else if (((Self.FallChangeThisFrame==true)&&(Self.Fall<=2))&&(Rand$1[Self.i].horizontal==false)) {
               Self.Fall = 2;
               break;
            }
         }
         Self.i+=1;
      }
      if (Self.Y$4<=(-1)) {
         Self.Jump = 0;
         Self.Y$4 = 0;
         Self.GravSpeed$1 = 0;
      }
      if ((Self.Y$4>=height$13)&&(Self.dead==false)) {
         Self.dead = true;
      }
   }
   /// procedure TPlayer.Move(Direction: MoveCommands)
   ///  [line: 399, column: 19, file: UPlayer]
   ,Move$2:function(Self, Direction) {
      if (!Direction) {
         Self.GoingLeft = false;
         Self.GoingRight = true;
         Self.FaceLeft = false;
      } else if (Direction==1) {
         Self.GoingLeft = true;
         Self.GoingRight = false;
         Self.FaceLeft = true;
      } else if (Direction==2) {
         Self.GoingLeft = false;
         Self.GoingRight = false;
      }
   }
   /// procedure TPlayer.resetShoot()
   ///  [line: 258, column: 19, file: UPlayer]
   ,resetShoot:function(Self) {
      Self.canShoot = false;
      Self.timeSinceShot = 0;
   }
   /// function TPlayer.ShootAngle(Targx: Float; Targy: Float) : Float
   ///  [line: 673, column: 18, file: UPlayer]
   ,ShootAngle:function(Self, Targx, Targy) {
      var Result = 0;
      var DifferenceX = 0;
      var DifferenceY = 0;
      var Angle$3 = 0;
      DifferenceX = Targx-Self.X$4;
      DifferenceY = Targy-Self.Y$4;
      if ((DifferenceX==0)&&(DifferenceY==0)) {
         Angle$3 = 0;
      } else if ((DifferenceX==0)&&(DifferenceY<0)) {
         Angle$3 = 0;
      } else if ((DifferenceX==0)&&(DifferenceY>0)) {
         Angle$3 = 180;
      } else if ((DifferenceX>0)&&(DifferenceY==0)) {
         Angle$3 = 90;
      } else if ((DifferenceX<0)&&(DifferenceY==0)) {
         Angle$3 = 270;
      } else if ((DifferenceX>0)&&(DifferenceY<0)) {
         if (DifferenceX>=(DifferenceY*-1)) {
            Angle$3 = 90-(Tanh((DifferenceY*-1)/DifferenceX)/0.0174532925199433);
         } else {
            Angle$3 = Tanh(DifferenceX/(DifferenceY*-1))/0.0174532925199433;
         }
      } else if ((DifferenceX>0)&&(DifferenceY>0)) {
         if (DifferenceX>=DifferenceY) {
            Angle$3 = 90+(Tanh(DifferenceY/DifferenceX)/0.0174532925199433);
         } else {
            Angle$3 = 180-(Tanh(DifferenceX/DifferenceY)/0.0174532925199433);
         }
      } else if ((DifferenceX<0)&&(DifferenceY<0)) {
         if (DifferenceX<=DifferenceY) {
            Angle$3 = 270+(Tanh((DifferenceY*-1)/(DifferenceX*-1))/0.0174532925199433);
         } else {
            Angle$3 = 360-(Tanh((DifferenceX*-1)/(DifferenceY*-1))/0.0174532925199433);
         }
      } else if ((DifferenceX<0)&&(DifferenceY>0)) {
         if ((DifferenceX*-1)>=DifferenceY) {
            Angle$3 = 270-(Tanh(DifferenceY/(DifferenceX*-1))/0.0174532925199433);
         } else {
            Angle$3 = 180+(Tanh((DifferenceX*-1)/DifferenceY)/0.0174532925199433);
         }
      }
      if (Self.FaceLeft) {
         if ((Angle$3<200)&&(Angle$3>=90)) {
            Angle$3 = 200;
         } else if (((Angle$3<90)&&(Angle$3>=0))||(Angle$3>340)) {
            Angle$3 = 340;
         }
      } else if (((Angle$3<360)&&(Angle$3>=270))||(Angle$3<20)) {
         Angle$3 = 20;
      } else if ((Angle$3<270)&&(Angle$3>160)) {
         Angle$3 = 160;
      }
      return Angle$3;
      return Result
   }
   /// constructor TPlayer.start()
   ///  [line: 87, column: 21, file: UPlayer]
   ,start:function(Self) {
      Self.X$4 = 0;
      Self.Y$4 = 0;
      Self.SX = 0;
      Self.SY = 0;
      return Self
   }
   /// procedure TPlayer.update(width: Float; PLAYERHEALTH: Integer)
   ///  [line: 123, column: 19, file: UPlayer]
   ,update:function(Self, width$14, PLAYERHEALTH) {
      if ((Self.AtGround==false)&&(Self.Jumps!=2)) {
         Self.Jumps = 1;
      }
      Self.X$4+=Self.MoveSpeed$1;
      if (Self.GoingLeft) {
         if (Self.MoveSpeed$1>(-5)) {
            Self.MoveSpeed$1-=0.5;
         }
      }
      if (Self.GoingRight) {
         if (Self.MoveSpeed$1<5) {
            Self.MoveSpeed$1+=0.5;
         }
      }
      if ((Self.GoingLeft==false)&&(Self.GoingRight==false)) {
         if (Self.MoveSpeed$1>0) {
            Self.MoveSpeed$1-=0.2;
         }
         if (Self.MoveSpeed$1<0) {
            Self.MoveSpeed$1+=0.2;
         }
         if ((Self.MoveSpeed$1>=(-1))&&(Self.MoveSpeed$1<=1)) {
            Self.MoveSpeed$1 = 0;
         }
      }
      if ((Self.X$4+15)>=width$14) {
         Self.X$4 = width$14-15-0.25;
         Self.GoingRight = false;
         Self.MoveSpeed$1 = 0;
      }
      if (Self.X$4<=0) {
         Self.X$4 = 0.25;
         Self.GoingLeft = false;
         Self.MoveSpeed$1 = 0;
      }
      if (Self.Jump>0) {
         Self.Y$4-=Self.Jump;
         Self.Jump-=1;
         Self.GravSpeed$1 = 0;
         Self.AtGround = true;
      }
      if (Self.KnockBackFrame>0) {
         if (Self.KnockBackLeft) {
            Self.X$4-=5;
         } else {
            Self.X$4+=5;
         }
         Self.Y$4-=Self.KnockBackFrame;
         Self.KnockBackFrame-=1;
         Self.GravSpeed$1 = 0;
         Self.AtGround = true;
         Self.MoveSpeed$1 = 0;
      }
      if (!Self.KnockBackFrame) {
         if (Self.KnockBackLeft) {
            Self.X$4-=5;
         } else {
            Self.X$4+=5;
         }
         Self.AtGround = false;
         Self.MoveSpeed$1 = 0;
      }
      Self.FallChangeThisFrame = false;
      if (Self.Fall>0) {
         Self.Fall-=1;
         Self.AtGround = false;
         Self.FallChangeThisFrame = true;
      }
      if ((Self.AtGround==false)&&(Self.Jump==0)) {
         Self.Y$4+=Self.GravSpeed$1;
         if (Self.GravSpeed$1<=30) {
            Self.GravSpeed$1+=1;
         }
      }
      if (Self.Health<=0) {
         Self.Health = 0;
         Self.dead = true;
      } else {
         if (Self.Health<PLAYERHEALTH) {
            Self.Health+=Self.HealthRegen;
         }
      }
   }
   /// procedure TPlayer.updateShoot()
   ///  [line: 248, column: 19, file: UPlayer]
   ,updateShoot:function(Self) {
      Self.timeSinceShot+=1;
      if (Self.timeSinceShot>=30) {
         Self.canShoot = true;
      }
   }
   ,Destroy:TObject.Destroy
};
/// TBullet = class (TObject)
///  [line: 14, column: 6, file: UBullet]
var TBullet = {
   $ClassName:"TBullet",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.Angle$1 = $.X$5 = $.Y$5 = 0;
      $.Damage$1 = $.FramesLeft = 0;
      $.Left$5 = $.Shot = false;
   }
   /// function TBullet.BulletBounds() : 
   ///  [line: 248, column: 18, file: UBullet]
   ,BulletBounds:function(Self) {
      var Result = [[0,0],[0,0]];
      var BulletLeftX = 0;
      var BulletRightX = 0;
      var BulletTopY = 0;
      var BulletBottomY = 0;
      var Return$1 = [[0,0],[0,0]];
      var TempAngle = 0;
      var TempAngle$1 = 0;
      if (Self.Angle$1==0) {
         BulletLeftX = Self.X$5;
         BulletRightX = Self.X$5+5;
         BulletTopY = Self.Y$5;
         BulletBottomY = Self.Y$5+15;
      } else if (Self.Angle$1==90) {
         BulletLeftX = Self.X$5;
         BulletRightX = Self.X$5+15;
         BulletTopY = Self.Y$5;
         BulletBottomY = Self.Y$5+5;
      } else if (Self.Angle$1==180) {
         BulletLeftX = Self.X$5;
         BulletRightX = Self.X$5+5;
         BulletTopY = Self.Y$5;
         BulletBottomY = Self.Y$5+15;
      } else if (Self.Angle$1==270) {
         BulletLeftX = Self.X$5;
         BulletRightX = Self.X$5+15;
         BulletTopY = Self.Y$5;
         BulletBottomY = Self.Y$5+5;
      } else if ((Self.Angle$1<90)||((Self.Angle$1>=180)&&(Self.Angle$1<270))) {
         TempAngle = Self.Angle$1;
         if (Self.Angle$1>=90) {
            TempAngle = Self.Angle$1-180;
         }
         TempAngle*=0.0174532925199433;
         BulletLeftX = Self.X$5;
         BulletRightX = Self.X$5+(Math.sin(TempAngle)*15)+(Math.cos(TempAngle)*5);
         BulletTopY = Self.Y$5-(Math.cos(TempAngle)*15);
         BulletBottomY = Self.Y$5+(Math.sin(TempAngle)*5);
      } else {
         TempAngle$1 = Self.Angle$1-90;
         if (Self.Angle$1>=180) {
            TempAngle$1 = Self.Angle$1-270;
         }
         TempAngle$1*=0.0174532925199433;
         BulletLeftX = Self.X$5;
         BulletRightX = Self.X$5+(Math.sin(TempAngle$1)*5)+(Math.cos(TempAngle$1)*15);
         BulletTopY = Self.Y$5-(Math.cos(TempAngle$1)*5);
         BulletBottomY = Self.Y$5+(Math.sin(TempAngle$1)*15);
      }
      Return$1[0][0] = BulletLeftX;
      Return$1[0][1] = BulletRightX;
      Return$1[1][0] = BulletTopY;
      Return$1[1][1] = BulletBottomY;
      return Result = Return$1.slice(0);
      return Result
   }
   /// constructor TBullet.create(isLeft: Boolean; newX: Float; newY: Float; newDamage: Integer; newAngle: Float)
   ///  [line: 40, column: 21, file: UBullet]
   ,create$2:function(Self, isLeft, newX$4, newY$4, newDamage$1, newAngle) {
      Self.Left$5 = isLeft;
      Self.X$5 = newX$4;
      Self.Y$5 = newY$4;
      Self.Shot = true;
      Self.FramesLeft = 3;
      Self.Damage$1 = newDamage$1;
      Self.Angle$1 = newAngle;
      return Self
   }
   /// function TBullet.HitPlat(Plat: TPlat) : Boolean
   ///  [line: 215, column: 18, file: UBullet]
   ,HitPlat:function(Self, Plat$9) {
      var Result = false;
      var stillCheck$6 = false;
      var PlatLeftX = 0;
      var PlatRightX = 0;
      var PlatTopY = 0;
      var PlatBottomY = 0;
      var Bounds = [[0,0],[0,0]];
      stillCheck$6 = false;
      PlatLeftX = Plat$9.X$3;
      PlatRightX = Plat$9.X$3+Plat$9.Width$10;
      PlatTopY = Plat$9.Y$3;
      PlatBottomY = Plat$9.Y$3+Plat$9.Height$8;
      Bounds = TBullet.BulletBounds(Self);
      if ((Bounds[0][1]>=PlatLeftX)&&(Bounds[0][0]<=PlatRightX)) {
         stillCheck$6 = true;
      }
      if (stillCheck$6) {
         if ((Bounds[1][0]<=PlatBottomY)&&(Bounds[1][1]>=PlatTopY)) {
            return true;
         }
      }
      return false;
      return Result
   }
   /// function TBullet.HitPlayer(Player: TPlayer) : Boolean
   ///  [line: 182, column: 18, file: UBullet]
   ,HitPlayer:function(Self, Player$2) {
      var Result = false;
      var stillCheck$7 = false;
      var PlayerLeftX = 0;
      var PlayerRightX = 0;
      var PlayerTopY = 0;
      var PlayerBottomY = 0;
      var Bounds$1 = [[0,0],[0,0]];
      stillCheck$7 = false;
      PlayerLeftX = Player$2.X$4;
      PlayerRightX = Player$2.X$4+15;
      PlayerTopY = Player$2.Y$4;
      PlayerBottomY = Player$2.Y$4+45;
      Bounds$1 = TBullet.BulletBounds(Self);
      if ((Bounds$1[0][1]>=PlayerLeftX)&&(Bounds$1[0][0]<=PlayerRightX)) {
         stillCheck$7 = true;
      }
      if (stillCheck$7) {
         if ((Bounds$1[1][0]<=PlayerBottomY)&&(Bounds$1[1][1]>=PlayerTopY)) {
            return true;
         }
      }
      return false;
      return Result
   }
   /// procedure TBullet.Move()
   ///  [line: 150, column: 19, file: UBullet]
   ,Move$3:function(Self) {
      if (Self.Angle$1==0) {
         Self.Y$5-=15;
      } else if (Self.Angle$1==90) {
         Self.X$5+=15;
      } else if (Self.Angle$1==180) {
         Self.Y$5+=15;
      } else if (Self.Angle$1==270) {
         Self.X$5-=15;
      } else if (Self.Angle$1<90) {
         Self.X$5+=Math.sin(Self.Angle$1*0.0174532925199433)*15;
         Self.Y$5-=Math.cos(Self.Angle$1*0.0174532925199433)*15;
      } else if (Self.Angle$1<180) {
         Self.X$5+=Math.cos((Self.Angle$1-90)*0.0174532925199433)*15;
         Self.Y$5+=Math.sin((Self.Angle$1-90)*0.0174532925199433)*15;
      } else if (Self.Angle$1<270) {
         Self.X$5-=Math.sin((Self.Angle$1-180)*0.0174532925199433)*15;
         Self.Y$5+=Math.cos((Self.Angle$1-180)*0.0174532925199433)*15;
      } else if (Self.Angle$1<360) {
         Self.X$5-=Math.cos((Self.Angle$1-270)*0.0174532925199433)*15;
         Self.Y$5-=Math.sin((Self.Angle$1-270)*0.0174532925199433)*15;
      }
   }
   /// procedure TBullet.update(screenWidth: Integer; player: TPlayer; Ais: array of TPlayer; fixed: array of TPlat; rands: array of TPlat)
   ///  [line: 51, column: 19, file: UBullet]
   ,update$1:function(Self, screenWidth$1, player, Ais, fixed, rands) {
      var i$21 = 0;
      if (Self.Shot) {
         if (Self.FramesLeft==3) {
            while (i$21<=(fixed.length-1)) {
               if (TBullet.HitPlat(Self,fixed[i$21])) {
                  Self.FramesLeft = 2;
                  if (fixed[i$21].Crumble) {
                     fixed[i$21].Crumbling = true;
                     fixed[i$21].TimeTillFall = 20;
                  }
               }
               i$21+=1;
            }
            i$21 = 0;
            while (i$21<=(rands.length-1)) {
               if (TBullet.HitPlat(Self,rands[i$21])) {
                  Self.FramesLeft = 2;
                  if (rands[i$21].Crumble) {
                     rands[i$21].Crumbling = true;
                     rands[i$21].TimeTillFall = 20;
                  }
               }
               i$21+=1;
            }
         }
         if (Self.FramesLeft!=3) {
            Self.FramesLeft-=1;
         }
         if (Self.FramesLeft<=0) {
            Self.Shot = false;
         }
         while (Self.Angle$1>=360) {
            Self.Angle$1-=360;
         }
         TBullet.Move$3(Self);
         if (Self.FramesLeft==3) {
            if (TBullet.HitPlayer(Self,player)) {
               player.KnockBackFrame = 6;
               player.KnockBackLeft = Self.Left$5;
               player.Health-=Self.Damage$1;
               Self.FramesLeft = 2;
            }
            i$21 = 0;
            while (i$21<=(Ais.length-1)) {
               if (TBullet.HitPlayer(Self,Ais[i$21])) {
                  Ais[i$21].KnockBackFrame = 6;
                  Ais[i$21].KnockBackLeft = Self.Left$5;
                  Ais[i$21].Health-=Self.Damage$1;
                  Self.FramesLeft = 2;
               }
               i$21+=1;
            }
            i$21 = 0;
         }
      }
      if (Self.Shot==false) {
         Self.X$5 = -1000;
         Self.Y$5 = -1000;
      }
   }
   ,Destroy:TObject.Destroy
};
/// TAi = class (TPlayer)
///  [line: 14, column: 6, file: UAi]
var TAi = {
   $ClassName:"TAi",$Parent:TPlayer
   ,$Init:function ($) {
      TPlayer.$Init($);
      $.LOSXMax = $.LOSXMin = $.LOSYMax = $.LOSYMin = $.PX = $.PY = 0;
      $.OnPlat = $.OnRand = $.TargRand1 = $.TargRunBefore = false;
      $.PlatID$1 = $.TargID1 = 0;
   }
   /// procedure TAi.OnPlatform(FixedPlats: array of TPlat; RandPlats: array of TPlat)
   ///  [line: 64, column: 15, file: UAi]
   ,OnPlatform:function(Self, FixedPlats$1, RandPlats$3) {
      /* null */
   }
   /// procedure TAi.PlayerInfo(player: TPlayer; FixedPlats: array of TPlat; RandPlats: array of TPlat; screenwidth: Integer)
   ///  [line: 54, column: 15, file: UAi]
   ,PlayerInfo:function(Self, player$1, FixedPlats$2, RandPlats$4, screenwidth$1) {
      /* null */
   }
   /// procedure TAi.WorkOutJumpTargs(TargNO: Integer; FixedPlats: array of TPlat; RandPlats: array of TPlat; X: Float; Y: Float)
   ///  [line: 44, column: 15, file: UAi]
   ,WorkOutJumpTargs:function(Self, TargNO, FixedPlats$3, RandPlats$5, X$8, Y$8) {
      /* null */
   }
   ,Destroy:TObject.Destroy
};
/// TTurret = class (TObject)
///  [line: 24, column: 3, file: UTurret]
var TTurret = {
   $ClassName:"TTurret",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.Angle$2 = $.GravSpeed$2 = $.X$6 = $.Y$6 = 0;
      $.isRand = false;
      $.Placement = 0;
      $.PlatID = $.ShotsTillDead = $.TimeTillShoot = 0;
   }
   /// procedure TTurret.BulletHit(Bullet: TBullet)
   ///  [line: 283, column: 19, file: UTurret]
   ,BulletHit:function(Self, Bullet) {
      if (Bullet.FramesLeft==3) {
         --Self.ShotsTillDead;
         --Bullet.FramesLeft;
      }
   }
   /// constructor TTurret.Create(newX: Float; newY: Float; newAngle: Float; Side: SidePlacedOn)
   ///  [line: 45, column: 21, file: UTurret]
   ,Create$59:function(Self, newX$5, newY$5, newAngle$1, Side) {
      Self.X$6 = newX$5;
      Self.Y$6 = newY$5;
      Self.GravSpeed$2 = -4;
      Self.Angle$2 = newAngle$1;
      Self.Placement = Side;
      Self.ShotsTillDead = 2;
      Self.TimeTillShoot = 0;
      return Self
   }
   /// function TTurret.getTargetAngle(player: TPlayer) : Float
   ///  [line: 292, column: 18, file: UTurret]
   ,getTargetAngle:function(Self, player$2) {
      var Result = 0;
      var DifferenceX$1 = 0;
      var DifferenceY$1 = 0;
      DifferenceX$1 = (player$2.X$4+7.5)-Self.X$6;
      DifferenceY$1 = (player$2.Y$4+22.5)-Self.Y$6;
      if ((DifferenceX$1==0)&&(DifferenceY$1==0)) {
         return 0;
      } else if ((DifferenceX$1==0)&&(DifferenceY$1<0)) {
         return 0;
      } else if ((DifferenceX$1==0)&&(DifferenceY$1>0)) {
         return 180;
      } else if ((DifferenceX$1>0)&&(DifferenceY$1==0)) {
         return 90;
      } else if ((DifferenceX$1<0)&&(DifferenceY$1==0)) {
         return 270;
      } else if ((DifferenceX$1>0)&&(DifferenceY$1<0)) {
         if (DifferenceX$1>=(DifferenceY$1*-1)) {
            return 90-(Tanh((DifferenceY$1*-1)/DifferenceX$1)/0.0174532925199433);
         } else {
            return Tanh(DifferenceX$1/(DifferenceY$1*-1))/0.0174532925199433;
         }
      } else if ((DifferenceX$1>0)&&(DifferenceY$1>0)) {
         if (DifferenceX$1>=DifferenceY$1) {
            return 90+(Tanh(DifferenceY$1/DifferenceX$1)/0.0174532925199433);
         } else {
            return 180-(Tanh(DifferenceX$1/DifferenceY$1)/0.0174532925199433);
         }
      } else if ((DifferenceX$1<0)&&(DifferenceY$1<0)) {
         if (DifferenceX$1<=DifferenceY$1) {
            return 270+(Tanh((DifferenceY$1*-1)/(DifferenceX$1*-1))/0.0174532925199433);
         } else {
            return 360-(Tanh((DifferenceX$1*-1)/(DifferenceY$1*-1))/0.0174532925199433);
         }
      } else if ((DifferenceX$1<0)&&(DifferenceY$1>0)) {
         if ((DifferenceX$1*-1)>=DifferenceY$1) {
            return 270-(Tanh(DifferenceY$1/(DifferenceX$1*-1))/0.0174532925199433);
         } else {
            return 180+(Tanh((DifferenceX$1*-1)/DifferenceY$1)/0.0174532925199433);
         }
      }
      return Result
   }
   /// procedure TTurret.HasBeenHit(Bullets: array of TBullet)
   ///  [line: 219, column: 19, file: UTurret]
   ,HasBeenHit:function(Self, Bullets$1) {
      var i$22 = 0;
      var BulletBounds$1 = [[0,0],[0,0]];
      var $temp35;
      for(i$22=0,$temp35=Bullets$1.length;i$22<$temp35;i$22++) {
         BulletBounds$1 = TBullet.BulletBounds(Bullets$1[i$22]);
         if ((BulletBounds$1[0][1]>=Self.X$6)&&(BulletBounds$1[0][0]<=(Self.X$6+20))) {
            if ((BulletBounds$1[1][0]<=(Self.Y$6+30))&&(BulletBounds$1[1][1]>=Self.Y$6)) {
               TTurret.BulletHit(Self,Bullets$1[i$22]);
            }
         }
      }
   }
   /// procedure TTurret.SetOnPlatform(Plat: TPlat)
   ///  [line: 195, column: 19, file: UTurret]
   ,SetOnPlatform:function(Self, Plat$10) {
      if (Self.Placement==3) {
         Self.X$6 = (Plat$10.X$3+(Plat$10.Width$10/2))-10;
         Self.Y$6 = Plat$10.Y$3-30;
      } else if (Self.Placement==2) {
         Self.X$6 = (Plat$10.X$3+(Plat$10.Width$10/2))-10;
         Self.Y$6 = Plat$10.Y$3+Plat$10.Height$8;
      } else if (!Self.Placement) {
         Self.X$6 = Plat$10.X$3+Plat$10.Width$10+5;
         Self.Y$6 = (Plat$10.Y$3+(Plat$10.Height$8/2))-15;
      } else if (Self.Placement==1) {
         Self.X$6 = Plat$10.X$3-20-5;
         Self.Y$6 = (Plat$10.Y$3+(Plat$10.Height$8/2))-15;
      }
   }
   /// function TTurret.ShouldShoot(player: TPlayer; Ais: array of TPlayer; FixedPlats: array of TPlat; RandPlats: array of TPlat; TargetAngle: Float) : Boolean
   ///  [line: 236, column: 18, file: UTurret]
   ,ShouldShoot:function(Self, player$3, Ais$1, FixedPlats$4, RandPlats$6, TargetAngle) {
      var Result = false;
      var Bullet$1 = null;
      var i$23 = 0;
      var i$24 = 0;
      var i$25 = 0;
      if (((Self.Angle$2-TargetAngle)<=2)&&((Self.Angle$2-TargetAngle)>=(-2))) {
         if (Self.Angle$2>=180) {
            Bullet$1 = TBullet.create$2($New(TBullet),true,(Self.X$6+10)-5-1,Self.Y$6+15,15,Self.Angle$2);
         } else {
            Bullet$1 = TBullet.create$2($New(TBullet),false,(Self.X$6+10)-5-1,Self.Y$6+15,15,Self.Angle$2);
         }
         do {
            TBullet.Move$3(Bullet$1);
            var $temp36;
            for(i$23=0,$temp36=Ais$1.length;i$23<$temp36;i$23++) {
               if (TBullet.HitPlayer(Bullet$1,Ais$1[i$23])) {
                  return true;
               }
            }
            var $temp37;
            for(i$24=0,$temp37=FixedPlats$4.length;i$24<$temp37;i$24++) {
               if (TBullet.HitPlat(Bullet$1,FixedPlats$4[i$24])) {
                  return false;
               }
            }
            var $temp38;
            for(i$25=0,$temp38=RandPlats$6.length;i$25<$temp38;i$25++) {
               if (TBullet.HitPlat(Bullet$1,RandPlats$6[i$25])) {
                  return false;
               }
            }
            if ((((Bullet$1.X$5>maxX)||(Bullet$1.Y$5>maxY))||(Bullet$1.X$5<0))||(Bullet$1.Y$5<0)) {
               return false;
            }
         } while (!TBullet.HitPlayer(Bullet$1,player$3));
         return true;
      }
      return false;
      return Result
   }
   /// procedure TTurret.Update(player: TPlayer; Bullets: array of TBullet; Ais: array of TPlayer; FixedPlats: array of TPlat; RandPlats: array of TPlat)
   ///  [line: 56, column: 19, file: UTurret]
   ,Update$3:function(Self, player$4, Bullets$2, Ais$2, FixedPlats$5, RandPlats$7) {
      var TargAngle = 0;
      var ReverseTargAngle = 0;
      var ReverseAngle = 0;
      var i$26 = 0;
      if ((Self.ShotsTillDead<=0)&&(Self.Y$6<=(maxY+2500))) {
         Self.Y$6+=Self.GravSpeed$2;
         Self.GravSpeed$2+=1;
      } else if (Self.ShotsTillDead>0) {
         Self.Angle$2 = Math.round(Self.Angle$2)%360;
         TargAngle = TTurret.getTargetAngle(Self,player$4);
         if (TargAngle<0) {
            TargAngle = 360-TargAngle;
         }
         TargAngle = Math.round(TargAngle)%360;
         if (Self.Placement==3) {
            if (TargAngle>=180) {
               ReverseTargAngle = 270-(TargAngle-270);
            } else {
               ReverseTargAngle = 90+(90-TargAngle);
            }
            if (Self.Angle$2>=180) {
               ReverseAngle = 270-(Self.Angle$2-270);
            } else {
               ReverseAngle = 90+(90-Self.Angle$2);
            }
            if (ReverseTargAngle>ReverseAngle) {
               if ((ReverseTargAngle-ReverseAngle)<1.5) {
                  Self.Angle$2 = TargAngle;
               } else {
                  Self.Angle$2-=2;
               }
            } else if ((ReverseAngle-ReverseTargAngle)<1.5) {
               Self.Angle$2 = TargAngle;
            } else {
               Self.Angle$2+=1.5;
            }
         } else if (TargAngle>Self.Angle$2) {
            if ((TargAngle-Self.Angle$2)<1.5) {
               Self.Angle$2 = TargAngle;
            } else {
               Self.Angle$2+=1.5;
            }
         } else if ((Self.Angle$2-TargAngle)<1.5) {
            Self.Angle$2 = TargAngle;
         } else {
            Self.Angle$2-=2;
         }
         switch (Self.Placement) {
            case 0 :
               if (Self.Angle$2<0) {
                  Self.Angle$2 = 0;
               }
               if (Self.Angle$2>180) {
                  Self.Angle$2 = 180;
               }
               break;
            case 1 :
               if (Self.Angle$2>360) {
                  Self.Angle$2 = 360;
               }
               if (Self.Angle$2<180) {
                  Self.Angle$2 = 180;
               }
               break;
            case 2 :
               if (Self.Angle$2>270) {
                  Self.Angle$2 = 270;
               }
               if (Self.Angle$2<90) {
                  Self.Angle$2 = 90;
               }
               break;
            case 3 :
               if (((Self.Angle$2<270)&&(Self.Angle$2>=180))||(Self.Angle$2<(-90))) {
                  Self.Angle$2 = 270;
               }
               if ((Self.Angle$2>90)&&(Self.Angle$2<180)) {
                  Self.Angle$2 = 90;
               }
               break;
         }
         if (TTurret.ShouldShoot(Self,player$4,Ais$2,FixedPlats$5,RandPlats$7,TargAngle)&&(Self.TimeTillShoot<0)) {
            i$26 = -1;
            do {
               i$26+=1;
            } while (!((Bullets$2[i$26].Shot==false)||(i$26>=(Bullets$2.length-1))));
            if (i$26>=(Bullets$2.length-1)) {
               i$26 = (Bullets$2.length-1)+1;
            }
            if (Self.Angle$2>=180) {
               Bullets$2[i$26]=TBullet.create$2($New(TBullet),true,(Self.X$6+10)-5-1,Self.Y$6+15,15,Self.Angle$2);
            } else {
               Bullets$2[i$26]=TBullet.create$2($New(TBullet),false,(Self.X$6+10)-5-1,Self.Y$6+15,15,Self.Angle$2);
            }
            Self.TimeTillShoot = 21;
            TBullet.update$1(Bullets$2[i$26],maxX,player$4,Ais$2,FixedPlats$5,RandPlats$7);
            TBullet.update$1(Bullets$2[i$26],maxX,player$4,Ais$2,FixedPlats$5,RandPlats$7);
            TBullet.update$1(Bullets$2[i$26],maxX,player$4,Ais$2,FixedPlats$5,RandPlats$7);
         }
         --Self.TimeTillShoot;
         TTurret.HasBeenHit(Self,Bullets$2);
         if (Self.isRand) {
            TTurret.SetOnPlatform(Self,RandPlats$7[Self.PlatID]);
         } else {
            TTurret.SetOnPlatform(Self,FixedPlats$5[Self.PlatID]);
         }
      }
   }
   ,Destroy:TObject.Destroy
};
/// SidePlacedOn enumeration
///  [line: 15, column: 3, file: UTurret]
var SidePlacedOn = [ "Left", "Right", "Top", "Bottom" ];
/// TSelect = class (TObject)
///  [line: 15, column: 3, file: ULevelSelector]
var TSelect = {
   $ClassName:"TSelect",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.Ai = [];
      $.Doors = [];
      $.maxX$1 = $.maxY$1 = $.screenheight = $.screenwidth = 0;
      $.Plats = [];
      $.Text$3 = [];
   }
   /// constructor TSelect.create()
   ///  [line: 35, column: 21, file: ULevelSelector]
   ,create$5:function(Self) {
      var x$58 = 0;
      var y$45 = 0;
      var n$4 = 0;
      var i$27 = 0;
      var ii = 0;
      var iidone = false;
      Self.Text$3[0]=TText.create$4($New(TText),"Use "+CodeToKeyName(EnterKey)+" to go through the door.","blue",100,60);
      Self.Text$3[1]=TText.create$4($New(TText),"Use "+CodeToKeyName(LeftKey)+" and "+CodeToKeyName(RightKey)+" to move left and right","blue",100,80);
      Self.Text$3[2]=TText.create$4($New(TText),"or you can use the buttons in the top and bottom left corners","blue",100,100);
      i$27 = 0;
      ii = 0;
      iidone = false;
      x$58 = 65;
      Self.maxX$1 = 965;
      y$45 = 140;
      n$4 = 200;
      Self.maxY$1 = 200;
      while (i$27<=17) {
         Self.Doors[i$27]=TE.create($New(TE),x$58,y$45);
         if (iidone==false) {
            if (!(n$4%400)) {
               Self.Plats[ii]=TPlat.createF($New(TPlat),50,y$45+60,Self.maxX$1-50,10,true,false,false,false,false,0,false,false);
            } else {
               Self.Plats[ii]=TPlat.createF($New(TPlat),0,y$45+60,Self.maxX$1-50,10,true,false,false,false,false,0,false,false);
            }
            ii+=1;
            iidone = true;
         }
         if ((i$27+1)<=9) {
            Self.Text$3[i$27+3]=TText.create$4($New(TText),(i$27+1).toString(),"red",(x$58+15)-5,y$45+15);
         } else {
            Self.Text$3[i$27+3]=TText.create$4($New(TText),(i$27+1).toString(),"red",(x$58+15)-9,y$45+15);
         }
         i$27+=1;
         if (((n$4%400)==0)&&(n$4!=200)) {
            x$58-=100;
            if (x$58<=49) {
               y$45+=200;
               Self.maxY$1+=200;
               n$4+=200;
               iidone = false;
            }
         } else {
            x$58+=100;
            if (x$58>=Self.maxX$1) {
               x$58-=100;
               y$45+=200;
               Self.maxY$1+=200;
               n$4+=200;
               iidone = false;
            }
         }
      }
      Self.maxY$1+=100;
      Self.Ai[0]=TPlayer.start($New(TAi));
      Self.Ai[0].dead = true;
      return Self
   }
   /// function TSelect.selected(x1: Float; y1: Float; x2: Float; y2: Float) : Integer
   ///  [line: 107, column: 18, file: ULevelSelector]
   ,selected:function(Self, x1$8, y1$8, x2$8, y2$8) {
      var Result = 0;
      var i$28 = 0;
      while (i$28<=(Self.Doors.length-1)) {
         if ((y1$8+y2$8)==(Self.Doors[i$28].Y$2+60)) {
            if ((x1$8<=(Self.Doors[i$28].X$2+30))&&(x2$8>=Self.Doors[i$28].X$2)) {
               return i$28+1;
            }
         }
         i$28+=1;
      }
      return 0;
      return Result
   }
   ,Destroy:TObject.Destroy
};
function CodeToKeyName(KeyCode) {
   var Result = "";
   switch (KeyCode) {
      case 8 :
         return "Backspace";
         break;
      case 9 :
         return "Tab";
         break;
      case 13 :
         return "Enter";
         break;
      case 16 :
         return "Shift";
         break;
      case 17 :
         return "Ctrl";
         break;
      case 18 :
         return "Alt";
         break;
      case 19 :
         return "Pause\/Break";
         break;
      case 20 :
         return "Caps Lock";
         break;
      case 27 :
         return "Escape";
         break;
      case 32 :
         return "Space";
         break;
      case 33 :
         return "Page Up";
         break;
      case 34 :
         return "Page Down";
         break;
      case 35 :
         return "End";
         break;
      case 36 :
         return "Home";
         break;
      case 37 :
         return "Left Arrow";
         break;
      case 38 :
         return "Up Arrow";
         break;
      case 39 :
         return "Right Arrow";
         break;
      case 40 :
         return "Down Arrow";
         break;
      case 45 :
         return "Insert";
         break;
      case 46 :
         return "Delete";
         break;
      case 48 :
         return "0";
         break;
      case 49 :
         return "1";
         break;
      case 50 :
         return "2";
         break;
      case 51 :
         return "3";
         break;
      case 52 :
         return "4";
         break;
      case 53 :
         return "5";
         break;
      case 54 :
         return "6";
         break;
      case 55 :
         return "7";
         break;
      case 56 :
         return "8";
         break;
      case 57 :
         return "9";
         break;
      case 65 :
         return "A";
         break;
      case 66 :
         return "B";
         break;
      case 67 :
         return "C";
         break;
      case 68 :
         return "D";
         break;
      case 69 :
         return "E";
         break;
      case 70 :
         return "F";
         break;
      case 71 :
         return "G";
         break;
      case 72 :
         return "H";
         break;
      case 73 :
         return "I";
         break;
      case 74 :
         return "J";
         break;
      case 75 :
         return "K";
         break;
      case 76 :
         return "L";
         break;
      case 77 :
         return "M";
         break;
      case 78 :
         return "N";
         break;
      case 79 :
         return "O";
         break;
      case 80 :
         return "P";
         break;
      case 81 :
         return "Q";
         break;
      case 82 :
         return "R";
         break;
      case 83 :
         return "S";
         break;
      case 84 :
         return "T";
         break;
      case 85 :
         return "U";
         break;
      case 86 :
         return "V";
         break;
      case 87 :
         return "W";
         break;
      case 88 :
         return "X";
         break;
      case 89 :
         return "Y";
         break;
      case 90 :
         return "Z";
         break;
      case 91 :
         return "Left Window Key";
         break;
      case 92 :
         return "Right Window Key";
         break;
      case 93 :
         return "Select Key";
         break;
      case 96 :
         return "Numpad 0";
         break;
      case 97 :
         return "Numpad 1";
         break;
      case 98 :
         return "Numpad 2";
         break;
      case 99 :
         return "Numpad 3";
         break;
      case 100 :
         return "Numpad 4";
         break;
      case 101 :
         return "Numpad 5";
         break;
      case 102 :
         return "Numpad 6";
         break;
      case 103 :
         return "Numpad 7";
         break;
      case 104 :
         return "Numpad 8";
         break;
      case 105 :
         return "Numpad 9";
         break;
      case 106 :
         return "Multiply";
         break;
      case 107 :
         return "Add";
         break;
      case 109 :
         return "Subtract";
         break;
      case 110 :
         return "Decimal Point";
         break;
      case 111 :
         return "Divide";
         break;
      case 112 :
         return "F1";
         break;
      case 113 :
         return "F2";
         break;
      case 114 :
         return "F3";
         break;
      case 115 :
         return "F4";
         break;
      case 116 :
         return "F5";
         break;
      case 117 :
         return "F6";
         break;
      case 118 :
         return "F7";
         break;
      case 119 :
         return "F8";
         break;
      case 120 :
         return "F9";
         break;
      case 121 :
         return "F10";
         break;
      case 122 :
         return "F11";
         break;
      case 123 :
         return "F12";
         break;
      case 144 :
         return "Num Lock";
         break;
      case 145 :
         return "Scroll Lock";
         break;
      case 186 :
         return "Semi-Colon";
         break;
      case 187 :
         return "Equal Sign";
         break;
      case 188 :
         return "Comma";
         break;
      case 189 :
         return "Dash";
         break;
      case 190 :
         return "Full Stop";
         break;
      case 191 :
         return "Forward Slash";
         break;
      case 192 :
         return "Apostrophe";
         break;
      case 219 :
         return "Open Bracket";
         break;
      case 220 :
         return "Back Slash";
         break;
      case 221 :
         return "Close Braket";
         break;
      case 222 :
         return "Hash Tag";
         break;
      default :
         return KeyCode.toString();
   }
   return Result
};
/// TOptionsButton = class (TObject)
///  [line: 15, column: 3, file: UOptionsButton]
var TOptionsButton = {
   $ClassName:"TOptionsButton",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.Height$9 = $.TextX = $.TextY = $.Width$11 = $.X$7 = $.Y$7 = 0;
      $.Text$2 = "";
   }
   /// function TOptionsButton.clicked(clickX: Float; clickY: Float) : Boolean
   ///  [line: 41, column: 25, file: UOptionsButton]
   ,clicked:function(Self, clickX, clickY) {
      var Result = false;
      if ((clickX>=Self.X$7)&&(clickX<=(Self.X$7+Self.Width$11))) {
         if ((clickY>=Self.Y$7)&&(clickY<=(Self.Y$7+Self.Height$9))) {
            return true;
         }
      }
      return false;
      return Result
   }
   /// constructor TOptionsButton.create(newX: Float; newY: Float; newWidth: Float; newHeight: Float; newText: String; newTextX: Float; newTextY: Float)
   ///  [line: 30, column: 28, file: UOptionsButton]
   ,create$3:function(Self, newX$6, newY$6, newWidth$1, newHeight$1, newText$1, newTextX, newTextY) {
      Self.X$7 = newX$6;
      Self.Y$7 = newY$6;
      Self.Width$11 = newWidth$1;
      Self.Height$9 = newHeight$1;
      Self.Text$2 = newText$1;
      Self.TextX = newTextX;
      Self.TextY = newTextY;
      return Self
   }
   ,Destroy:TObject.Destroy
};
function Text$4(text$2, colour$2, x$59, y$46) {
   var i$6 = 0;
   i$6 = (gameText.length-1)+1;
   gameText[i$6]=TText.create$4($New(TText),text$2,colour$2,x$59,y$46);
};
function StartLvl(AmountOfAi) {
   var i$7 = 0;
   TPlayer.create$1(Player,7.5+EntranceDoor.X$2,(EntranceDoor.Y$2+60)-45,"red",45,FPlats,RandPlats,15);
   i$7 = 0;
   while (i$7<AmountOfAi) {
      Ai$1[i$7]=TPlayer.start($New(TAi));
      TPlayer.create$1(Ai$1[i$7],7.5+ExitDoor.X$2,(ExitDoor.Y$2+60)-45,"blue",30,FPlats,RandPlats,15);
      Ai$1[i$7].TargRunBefore = false;
      Ai$1[i$7].TargRand1 = false;
      Ai$1[i$7].TargID1 = 0;
      TAi.PlayerInfo(Ai$1[i$7],Player,FPlats,RandPlats,maxX);
      TAi.OnPlatform(Ai$1[i$7],FPlats,RandPlats);
      TAi.WorkOutJumpTargs(Ai$1[i$7],1,FPlats,RandPlats,Player.X$4,Player.Y$4);
      TPlayer.update(Ai$1[i$7],maxX,30);
      TPlayer.isGrounded(Ai$1[i$7],maxY,FPlats,RandPlats);
      TPlayer.updateShoot(Ai$1[i$7]);
      i$7+=1;
   }
   AIS = AmountOfAi;
   maxY+=1000;
};
function SpawnTurret(x$60, y$47, angle$3, placementSide) {
   var i$8 = 0;
   i$8 = (Turrets.length-1)+1;
   Turrets[i$8]=TTurret.Create$59($New(TTurret),x$60,y$47,angle$3,placementSide);
};
function SpawnRands() {
   var i$9 = 0;
   var n$2 = 0;
   i$9 = 0;
   n$2 = 0;
   while (i$9<RANDOMPLATFORMS) {
      RandPlats[n$2]=TPlat.createR($New(TPlat),maxX,maxY,10,100,EntranceDoor,ExitDoor,FPlats,RandPlats,RANDOMVERTICALPLATFORMS,RANDOMJUMPTHROUGHPLATFORMS,RANDOMNOFALLPLATFORMS,RANDOMNOWALLJUMPPLATFORMS,RANDOMCRUMBLEPLATFORMS,RANDOMMOVINGPLATFORMS,RANDOMMOVINGRIGHTTOLEFT,RANDOMMAXMOVE,RANDOMTURRETLEFTTOP,RANDOMTURRETRIGHTBOTTOM);
      if (RandPlats[n$2].turretOnLeftOrTop) {
         if (RandPlats[n$2].horizontal) {
            SpawnTurret(RandPlats[n$2].X$3,RandPlats[n$2].Y$3,0,3);
            Turrets[(Turrets.length-1)].isRand = true;
            Turrets[(Turrets.length-1)].PlatID = n$2;
         } else {
            SpawnTurret(RandPlats[n$2].X$3,RandPlats[n$2].Y$3,270,0);
            Turrets[(Turrets.length-1)].isRand = true;
            Turrets[(Turrets.length-1)].PlatID = n$2;
         }
      }
      if (RandPlats[n$2].turretOnRightOrBottom) {
         if (RandPlats[n$2].horizontal) {
            SpawnTurret(RandPlats[n$2].X$3,RandPlats[n$2].Y$3,180,2);
            Turrets[(Turrets.length-1)].isRand = true;
            Turrets[(Turrets.length-1)].PlatID = n$2;
         } else {
            SpawnTurret(RandPlats[n$2].X$3,RandPlats[n$2].Y$3,90,1);
            Turrets[(Turrets.length-1)].isRand = true;
            Turrets[(Turrets.length-1)].PlatID = n$2;
         }
      }
      i$9+=Math.round(RandPlats[n$2].Width$10*RandPlats[n$2].Height$8);
      n$2+=1;
   }
};
function SideScrollSize(x$61, y$48) {
   maxX = x$61;
   maxY = y$48;
};
function PercentofVerticals(percent) {
   while (percent>100) {
      percent-=100;
   }
   RANDOMVERTICALPLATFORMS = percent;
};
function PercentofTurretsOnRightorBottom(percent$1) {
   while (percent$1>100) {
      percent$1-=100;
   }
   RANDOMTURRETRIGHTBOTTOM = percent$1;
};
function PercentofTurretsOnLeftorTop(percent$2) {
   while (percent$2>100) {
      percent$2-=100;
   }
   RANDOMTURRETLEFTTOP = percent$2;
};
function PercentofRands(percent$3) {
   while (percent$3>100) {
      percent$3-=100;
   }
   RANDOMPLATFORMS = Math.round(((maxX*maxY)/100)*percent$3);
};
function PercentofNoWallJumps(percent$4) {
   while (percent$4>100) {
      percent$4-=100;
   }
   RANDOMNOWALLJUMPPLATFORMS = percent$4;
};
function PercentofNoFalls(percent$5) {
   while (percent$5>100) {
      percent$5-=100;
   }
   RANDOMNOFALLPLATFORMS = percent$5;
};
function PercentofMovings(percent$6) {
   while (percent$6>100) {
      percent$6-=100;
   }
   RANDOMMOVINGPLATFORMS = percent$6;
};
function PercentofMovesThatMoveX(percent$7) {
   while (percent$7>100) {
      percent$7-=100;
   }
   RANDOMMOVINGRIGHTTOLEFT = percent$7;
};
function PercentofJumpThoughs(percent$8) {
   while (percent$8>100) {
      percent$8-=100;
   }
   RANDOMJUMPTHROUGHPLATFORMS = percent$8;
};
function PercentofCrumble(percent$9) {
   while (percent$9>100) {
      percent$9-=100;
   }
   RANDOMCRUMBLEPLATFORMS = percent$9;
};
function OutDoor(x$62, y$49) {
   ExitDoor = TE.create($New(TE),x$62,y$49);
};
function MaxMoveForMoves(MaxMove$1) {
   RANDOMMAXMOVE = MaxMove$1;
};
function InDoor(x$63, y$50) {
   EntranceDoor = TE.create($New(TE),x$63,y$50);
};
function FixPlats(x$64, y$51, width$15, height$14, JumpThroughorNoWallJump, NoFall, crumble, move, moveUp, HowMuchMovement, onLeftOrTop, onRightOrBottom) {
   var i$10 = 0;
   i$10 = (FPlats.length-1)+1;
   FPlats[i$10]=TPlat.createF($New(TPlat),x$64,y$51,width$15,height$14,JumpThroughorNoWallJump,NoFall,crumble,move,moveUp,HowMuchMovement,onLeftOrTop,onRightOrBottom);
   if (FPlats[i$10].turretOnLeftOrTop) {
      if (FPlats[i$10].horizontal) {
         SpawnTurret(FPlats[i$10].X$3,FPlats[i$10].Y$3,0,3);
         Turrets[(Turrets.length-1)].isRand = false;
         Turrets[(Turrets.length-1)].PlatID = i$10;
      } else {
         SpawnTurret(FPlats[i$10].X$3,FPlats[i$10].Y$3,270,0);
         Turrets[(Turrets.length-1)].isRand = false;
         Turrets[(Turrets.length-1)].PlatID = i$10;
      }
   }
   if (FPlats[i$10].turretOnRightOrBottom) {
      if (FPlats[i$10].horizontal) {
         SpawnTurret(FPlats[i$10].X$3,FPlats[i$10].Y$3,180,2);
         Turrets[(Turrets.length-1)].isRand = false;
         Turrets[(Turrets.length-1)].PlatID = i$10;
      } else {
         SpawnTurret(FPlats[i$10].X$3,FPlats[i$10].Y$3,90,1);
         Turrets[(Turrets.length-1)].isRand = false;
         Turrets[(Turrets.length-1)].PlatID = i$10;
      }
   }
};
function ClearVARS() {
   Ai$1.length=0;
   FPlats.length=0;
   RandPlats.length=0;
   Bullets.length=0;
   gameText.length=0;
   Turrets.length=0;
   maxX = 0;
   maxY = 0;
   offsetX = 0;
   offsetY = 0;
   RANDOMPLATFORMS = 0;
   RANDOMVERTICALPLATFORMS = 0;
   RANDOMJUMPTHROUGHPLATFORMS = 0;
   RANDOMNOFALLPLATFORMS = 0;
   RANDOMNOWALLJUMPPLATFORMS = 0;
   RANDOMCRUMBLEPLATFORMS = 0;
   RANDOMMOVINGPLATFORMS = 0;
   RANDOMMOVINGRIGHTTOLEFT = 50;
   RANDOMMAXMOVE = 0;
   RANDOMTURRETLEFTTOP = 0;
   RANDOMTURRETRIGHTBOTTOM = 0;
   Bullets[0]=TBullet.create$2($New(TBullet),true,-1000,-1000,0,0);
};
function OnScreen(x$65, y$52, x2$9, y2$9) {
   var Result = false;
   if (((x$65-offsetX)<=screenWidth)||((x2$9-offsetX)>=0)) {
      if (((y$52-offsetY)<=screenHeight)||((y2$9-offsetY)>=0)) {
         return true;
      }
   }
   return false;
   return Result
};
function DrawTurret(Turrets$1, Canvas$3) {
   var i$29 = 0;
   var TurretRotation = 0;
   var $temp39;
   for(i$29=0,$temp39=Turrets$1.length;i$29<$temp39;i$29++) {
      if (OnScreen(Turrets$1[i$29].X$6,Turrets$1[i$29].Y$6,Turrets$1[i$29].X$6+20,Turrets$1[i$29].Y$6+30)) {
         if (Turrets$1[i$29].Placement==3) {
            TurretRotation = 0;
         } else if (Turrets$1[i$29].Placement==2) {
            TurretRotation = 180;
         } else if (Turrets$1[i$29].Placement==1) {
            TurretRotation = 270;
         } else if (!Turrets$1[i$29].Placement) {
            TurretRotation = 90;
         }
         TW3Canvas.Translate(Canvas$3,(Turrets$1[i$29].X$6+10)-offsetX,(Turrets$1[i$29].Y$6+15)-offsetY);
         TW3Canvas.Rotate(Canvas$3,(TurretRotation*3.14159265358979)/180);
         TW3Canvas.Translate(Canvas$3,-((Turrets$1[i$29].X$6+10)-offsetX),-((Turrets$1[i$29].Y$6+15)-offsetY));
         TW3Canvas.SetFillStyle(Canvas$3,"blue");
         TW3Canvas.BeginPath(Canvas$3);
         TW3Canvas.Ellipse(Canvas$3,Turrets$1[i$29].X$6-offsetX,Turrets$1[i$29].Y$6-offsetY,(Turrets$1[i$29].X$6+20)-offsetX,(Turrets$1[i$29].Y$6+20)-offsetY);
         TW3Canvas.FillRectF$2(Canvas$3,Turrets$1[i$29].X$6-offsetX,(Turrets$1[i$29].Y$6+10)-offsetY,20,20);
         TW3Canvas.ClosePath(Canvas$3);
         TW3Canvas.Fill(Canvas$3);
         TW3Canvas.Translate(Canvas$3,(Turrets$1[i$29].X$6+10)-offsetX,(Turrets$1[i$29].Y$6+15)-offsetY);
         TW3Canvas.Rotate(Canvas$3,((-TurretRotation)*3.14159265358979)/180);
         TW3Canvas.Translate(Canvas$3,-((Turrets$1[i$29].X$6+10)-offsetX),-((Turrets$1[i$29].Y$6+15)-offsetY));
         TW3Canvas.Translate(Canvas$3,(Turrets$1[i$29].X$6+10)-offsetX,(Turrets$1[i$29].Y$6+15)-offsetY);
         TW3Canvas.Rotate(Canvas$3,(Turrets$1[i$29].Angle$2*3.14159265358979)/180);
         TW3Canvas.Translate(Canvas$3,-((Turrets$1[i$29].X$6+10)-offsetX),-((Turrets$1[i$29].Y$6+15)-offsetY));
         TW3Canvas.SetFillStyle(Canvas$3,"black");
         TW3Canvas.BeginPath(Canvas$3);
         TW3Canvas.FillRectF$2(Canvas$3,(Turrets$1[i$29].X$6+10)-2.5-offsetX,(Turrets$1[i$29].Y$6+15)-offsetY,5,-20);
         TW3Canvas.ClosePath(Canvas$3);
         TW3Canvas.Fill(Canvas$3);
         TW3Canvas.Translate(Canvas$3,(Turrets$1[i$29].X$6+10)-offsetX,(Turrets$1[i$29].Y$6+15)-offsetY);
         TW3Canvas.Rotate(Canvas$3,-((Turrets$1[i$29].Angle$2*3.14159265358979)/180));
         TW3Canvas.Translate(Canvas$3,-((Turrets$1[i$29].X$6+10)-offsetX),-((Turrets$1[i$29].Y$6+15)-offsetY));
      }
   }
};
function DrawText(text$3, Canvas$4, FontSize) {
   var i$1 = 0;
   i$1 = 0;
   while (i$1<=(text$3.length-1)) {
      TW3Canvas.SetFont(Canvas$4,FontSize.toString()+"pt verdana");
      TW3Canvas.SetFillStyle(Canvas$4,text$3[i$1].colour$1);
      TW3Canvas.FillTextF(Canvas$4,text$3[i$1].text,text$3[i$1].x$33-offsetX,text$3[i$1].y$32-offsetY,2147483647);
      i$1+=1;
   }
   TW3Canvas.SetFont(Canvas$4,"10pt verdana");
   TW3Canvas.SetFillStyle(Canvas$4,"red");
   if (!gamemode) {
      TW3Canvas.FillTextF(Canvas$4,"Level: "+Level.toString(),240,40,2147483647);
   } else if (gamemode==1) {
      TW3Canvas.FillTextF(Canvas$4,"Level Selector",80,40,2147483647);
   }
};
function DrawPlayer(player$5, Canvas$5) {
   if (OnScreen(player$5.X$4,player$5.Y$4,player$5.X$4+15,player$5.Y$4+45)) {
      TW3Canvas.SetFillStyle(Canvas$5,player$5.colour);
      TW3Canvas.BeginPath(Canvas$5);
      TW3Canvas.Ellipse(Canvas$5,player$5.X$4-offsetX,player$5.Y$4-offsetY,(player$5.X$4+15)-offsetX,(player$5.Y$4+15)-offsetY);
      TW3Canvas.Ellipse(Canvas$5,player$5.X$4-offsetX,(player$5.Y$4+15)-offsetY,(player$5.X$4+15)-offsetX,(player$5.Y$4+15+10)-offsetY);
      TW3Canvas.FillRectF$2(Canvas$5,player$5.X$4-offsetX,(player$5.Y$4+15+5)-offsetY,15,25);
      TW3Canvas.ClosePath(Canvas$5);
      TW3Canvas.Fill(Canvas$5);
      if (player$5.FaceLeft) {
         TW3Canvas.SetFillStyle(Canvas$5,"black");
         TW3Canvas.BeginPath(Canvas$5);
         TW3Canvas.FillRectF$2(Canvas$5,((player$5.X$4-15)+3)-offsetX,(player$5.Y$4+15+3)-offsetY,15,5);
         TW3Canvas.FillRectF$2(Canvas$5,player$5.X$4-1-offsetX,(player$5.Y$4+15+3+5)-offsetY,4,8);
         TW3Canvas.ClosePath(Canvas$5);
         TW3Canvas.Fill(Canvas$5);
      } else {
         TW3Canvas.SetFillStyle(Canvas$5,"black");
         TW3Canvas.BeginPath(Canvas$5);
         TW3Canvas.FillRectF$2(Canvas$5,(player$5.X$4+15)-3-offsetX,(player$5.Y$4+15+3)-offsetY,15,5);
         TW3Canvas.FillRectF$2(Canvas$5,(player$5.X$4+15)-3-offsetX,(player$5.Y$4+15+3+5)-offsetY,4,8);
         TW3Canvas.ClosePath(Canvas$5);
         TW3Canvas.Fill(Canvas$5);
      }
      if (player$5.Health>=1) {
         TW3Canvas.SetFont(Canvas$5,"10pt verdana");
         TW3Canvas.SetFillStyle(Canvas$5,player$5.colour);
         TW3Canvas.FillTextF(Canvas$5,(Math.round(player$5.Health)).toString(),player$5.X$4-offsetX,player$5.Y$4-offsetY-10,15);
      } else {
         TW3Canvas.SetFont(Canvas$5,"10pt verdana");
         TW3Canvas.SetFillStyle(Canvas$5,player$5.colour);
         TW3Canvas.FillTextF(Canvas$5,"Dead",player$5.X$4-offsetX,player$5.Y$4-offsetY-10,15);
      }
   }
};
function DrawPlats(Plat$11, Canvas$6) {
   var i$2 = 0;
   var VectorforPlayer = [0,0];
   i$2 = 0;
   while (i$2<=(Plat$11.length-1)) {
      if (OnScreen(Plat$11[i$2].X$3,Plat$11[i$2].Y$3,Plat$11[i$2].X$3+Plat$11[i$2].Width$10,Plat$11[i$2].Y$3+Plat$11[i$2].Height$8)) {
         if (Plat$11[i$2].Crumble) {
            TW3Canvas.SetFillStyle(Canvas$6,"rgba(90, 65, 35, 0.9)");
         } else if (Plat$11[i$2].horizontal) {
            if (Plat$11[i$2].jumpThrough) {
               if (Plat$11[i$2].noFall) {
                  TW3Canvas.SetFillStyle(Canvas$6,"rgba(100, 0, 0, 0.9)");
               } else {
                  TW3Canvas.SetFillStyle(Canvas$6,"rgba(0, 50, 0, 0.9)");
               }
            } else if (Plat$11[i$2].noFall) {
               TW3Canvas.SetFillStyle(Canvas$6,"rgba(0, 0, 100, 0.9)");
            } else {
               TW3Canvas.SetFillStyle(Canvas$6,"rgba(0, 0, 0, 0.9)");
            }
         } else {
            if (Plat$11[i$2].noFall) {
               if (Plat$11[i$2].NoWallJump) {
                  TW3Canvas.SetFillStyle(Canvas$6,"rgba(250, 100, 190, 0.9)");
               } else {
                  TW3Canvas.SetFillStyle(Canvas$6,"rgba(255, 80, 0, 0.9)");
               }
            } else if (Plat$11[i$2].NoWallJump) {
               TW3Canvas.SetFillStyle(Canvas$6,"rgba(190, 10, 120, 0.9)");
            } else {
               TW3Canvas.SetFillStyle(Canvas$6,"rgba(100, 100, 100, 0.9)");
            }
         }
         TW3Canvas.BeginPath(Canvas$6);
         TW3Canvas.FillRectF$2(Canvas$6,Plat$11[i$2].X$3-offsetX,Plat$11[i$2].Y$3-offsetY,Plat$11[i$2].Width$10,Plat$11[i$2].Height$8);
         TW3Canvas.ClosePath(Canvas$6);
         TW3Canvas.Fill(Canvas$6);
      }
      if (Plat$11[i$2].Moves) {
         VectorforPlayer = TPlat.MoveUpdate(Plat$11[i$2],Player.X$4,Player.Y$4,Player.X$4+15,Player.Y$4+45);
         Player.X$4+=VectorforPlayer[0];
         Player.Y$4+=VectorforPlayer[1];
      }
      if (Plat$11[i$2].Crumble&&(Plat$11[i$2].Y$3<=(maxY+2500))) {
         TPlat.CrumbleUpdate(Plat$11[i$2]);
      }
      i$2+=1;
   }
};
function DrawDoors(Door$1, Canvas$7) {
   var i$3 = 0;
   i$3 = 0;
   while (i$3<=(Door$1.length-1)) {
      if ((i$3+1)>UnlockedDoors) {
         DrawDoor(Door$1[i$3],Canvas$7,true);
      } else {
         DrawDoor(Door$1[i$3],Canvas$7,false);
      }
      i$3+=1;
   }
};
function DrawDoor(Door$2, Canvas$8, Locked) {
   if (OnScreen(Door$2.X$2,Door$2.Y$2,Door$2.X$2+30,Door$2.Y$2+60)) {
      if (Locked) {
         TW3Canvas.SetFillStyle(Canvas$8,"rgba(0, 0, 205, 0.4)");
      } else {
         TW3Canvas.SetFillStyle(Canvas$8,"rgb(0, 0, 205)");
      }
      TW3Canvas.BeginPath(Canvas$8);
      TW3Canvas.FillRectF$2(Canvas$8,Door$2.X$2-offsetX,Door$2.Y$2-offsetY,30,60);
      TW3Canvas.ClosePath(Canvas$8);
      TW3Canvas.Fill(Canvas$8);
   }
};
function DrawControlButton(Button$1, FontSize$1, Canvas$9) {
   var AlphaBlendingValue = 0;
   var i$30 = 0;
   var Len = 0;
   var i$31 = 0;
   var Len$1 = 0;
   AlphaBlendingValue = 0.3;
   if (gamemode==1) {
      var $temp40;
      for(i$30=0,$temp40=Selector.Text$3.length;i$30<$temp40;i$30++) {
         Len = Selector.Text$3[i$30].text.length*10;
         if (((Selector.Text$3[i$30].x$33-offsetX)<(Button$1.X$7+Button$1.Width$11))&&(((Selector.Text$3[i$30].x$33-offsetX)+Len)>Button$1.X$7)) {
            if (((Selector.Text$3[i$30].y$32-offsetY)<(Button$1.Y$7+Button$1.Height$9))&&(((Selector.Text$3[i$30].y$32-offsetY)+10)>Button$1.Y$7)) {
               AlphaBlendingValue = 0.05;
            }
         }
      }
   } else {
      var $temp41;
      for(i$31=0,$temp41=gameText.length;i$31<$temp41;i$31++) {
         Len$1 = gameText[i$31].text.length*10;
         if (((gameText[i$31].x$33-offsetX)<(Button$1.X$7+Button$1.Width$11))&&(((gameText[i$31].x$33-offsetX)+Len$1)>Button$1.X$7)) {
            if (((gameText[i$31].y$32-offsetY)<(Button$1.Y$7+Button$1.Height$9))&&(((gameText[i$31].y$32-offsetY)+10)>Button$1.Y$7)) {
               AlphaBlendingValue = 0.05;
            }
         }
      }
   }
   TW3Canvas.SetFillStyle(Canvas$9,"rgba(130, 130, 130, "+FloatToStr$_Float_(AlphaBlendingValue)+")");
   TW3Canvas.BeginPath(Canvas$9);
   TW3Canvas.FillRectF$2(Canvas$9,Button$1.X$7,Button$1.Y$7,Button$1.Width$11,Button$1.Height$9);
   TW3Canvas.ClosePath(Canvas$9);
   TW3Canvas.Fill(Canvas$9);
   TW3Canvas.SetFillStyle(Canvas$9,"rgba(0, 0, 0, "+FloatToStr$_Float_(AlphaBlendingValue)+")");
   TW3Canvas.SetFont(Canvas$9,FontSize$1.toString()+"pt verdana");
   TW3Canvas.FillTextF(Canvas$9,Button$1.Text$2,Button$1.TextX,Button$1.TextY,Button$1.Width$11-(2*(Button$1.TextX-Button$1.X$7)));
};
function DrawButton(Button$2, FontSize$2, Canvas$10) {
   TW3Canvas.SetFillStyle(Canvas$10,"red");
   TW3Canvas.BeginPath(Canvas$10);
   TW3Canvas.FillRectF$2(Canvas$10,Button$2.X$7,Button$2.Y$7,Button$2.Width$11,Button$2.Height$9);
   TW3Canvas.ClosePath(Canvas$10);
   TW3Canvas.Fill(Canvas$10);
   TW3Canvas.SetFillStyle(Canvas$10,"blue");
   TW3Canvas.SetFont(Canvas$10,FontSize$2.toString()+"pt verdana");
   TW3Canvas.FillTextF(Canvas$10,Button$2.Text$2,Button$2.TextX,Button$2.TextY,Button$2.Width$11-(2*(Button$2.TextX-Button$2.X$7)));
};
function DrawBullet(Bullet$2, Canvas$11) {
   var i$4 = 0;
   TW3Canvas.SetFillStyle(Canvas$11,"green");
   i$4 = 0;
   while (i$4<=(Bullet$2.length-1)) {
      if (OnScreen(Bullet$2[i$4].X$5,Bullet$2[i$4].Y$5,Bullet$2[i$4].X$5+15,Bullet$2[i$4].Y$5+5)) {
         TW3Canvas.Translate(Canvas$11,(Bullet$2[i$4].X$5+7.5)-offsetX,(Bullet$2[i$4].Y$5+2.5)-offsetY);
         TW3Canvas.Rotate(Canvas$11,((Bullet$2[i$4].Angle$1+90)*3.14159265358979)/180);
         TW3Canvas.Translate(Canvas$11,-((Bullet$2[i$4].X$5+7.5)-offsetX),-((Bullet$2[i$4].Y$5+2.5)-offsetY));
         TW3Canvas.BeginPath(Canvas$11);
         TW3Canvas.FillRectF$2(Canvas$11,Bullet$2[i$4].X$5-offsetX,Bullet$2[i$4].Y$5-offsetY,15,5);
         TW3Canvas.ClosePath(Canvas$11);
         TW3Canvas.Fill(Canvas$11);
         TW3Canvas.Translate(Canvas$11,(Bullet$2[i$4].X$5+7.5)-offsetX,(Bullet$2[i$4].Y$5+2.5)-offsetY);
         TW3Canvas.Rotate(Canvas$11,((-(Bullet$2[i$4].Angle$1+90))*3.14159265358979)/180);
         TW3Canvas.Translate(Canvas$11,-((Bullet$2[i$4].X$5+7.5)-offsetX),-((Bullet$2[i$4].Y$5+2.5)-offsetY));
      }
      i$4+=1;
   }
};
function DrawAI(AI, Canvas$12) {
   var i$5 = 0;
   i$5 = 0;
   while (i$5<=(AI.length-1)) {
      DrawPlayer(AI[i$5],Canvas$12);
      i$5 = 1;
   }
};
function Initialize$16() {
   ClearVARS();
   Text$4("Use "+CodeToKeyName(LeftKey)+" and "+CodeToKeyName(RightKey)+" to move left and right","blue",10,60);
   Text$4("Use "+CodeToKeyName(EnterKey)+" to go through the door","blue",500,60);
   Text$4("or you can use the buttons in the bottom left corner to move.","blue",10,80);
   Text$4("or the enter button in the top left corner.","blue",500,80);
   InDoor(10,100);
   OutDoor(600,100);
   FixPlats(10,160,620,10,false,false,false,false,false,200,false,false);
   SideScrollSize(800,200);
   StartLvl(0);
};
function Initialize$7() {
   ClearVARS();
   Text$4("Use "+CodeToKeyName(JumpKey)+" to jump","blue",90,60);
   Text$4("or the button labelled \"Jump\" in the bottom left corner.","blue",10,80);
   InDoor(10,100);
   OutDoor(300,100);
   FixPlats(10,160,100,10,false,false,false,false,false,200,false,false);
   FixPlats(200,160,130,10,false,false,false,false,false,200,false,false);
   SideScrollSize(500,500);
   PercentofRands(0);
   StartLvl(0);
};
function Initialize$6() {
   ClearVARS();
   Text$4("You are able to do one air jump.","blue",90,60);
   Text$4("_____","blue",180,200);
   Text$4("TIP: Jump here >>>","blue",30,200);
   InDoor(10,100);
   OutDoor(450,100);
   FixPlats(10,160,50,10,false,false,false,false,false,200,false,false);
   FixPlats(280,160,200,10,false,false,false,false,false,200,false,false);
   SideScrollSize(500,500);
   PercentofRands(0);
   StartLvl(0);
};
function Initialize$5() {
   ClearVARS();
   Text$4("Use "+CodeToKeyName(FallKey)+" to fall through the platform","blue",10,230);
   Text$4("or the button called \"Fall\" in the bottom right corner.","blue",10,250);
   InDoor(10,100);
   OutDoor(100,400);
   FixPlats(10,160,40,10,false,false,false,false,false,200,false,false);
   FixPlats(10,90,40,10,false,false,false,false,false,200,false,false);
   FixPlats(10,100,10,60,false,false,false,false,false,200,false,false);
   FixPlats(40,100,10,60,false,false,false,false,false,200,false,false);
   FixPlats(10,460,130,10,false,false,false,false,false,200,false,false);
   SideScrollSize(500,600);
   PercentofRands(0);
   StartLvl(0);
};
function Initialize$4() {
   ClearVARS();
   Text$4("You can wall jump,  try it","blue",10,900);
   Text$4("on the walls in front to get to the top.","blue",10,920);
   Text$4("You can do this off any platform type","blue",10,940);
   Text$4("and it won't make crumbling platforms fall","blue",10,960);
   Text$4("You can also wall jump off one","blue",500,970);
   Text$4("wall repeatedly to climb it.","blue",500,990);
   Text$4("Do this by moving into it and jumping when touching the wall.","blue",400,1100);
   InDoor(10,1000);
   OutDoor(700,100);
   FixPlats(0,1060,800,10,false,false,false,false,false,200,false,false);
   FixPlats(0,160,730,10,false,false,false,false,false,200,false,false);
   FixPlats(300,250,10,750,false,false,false,false,false,200,false,false);
   FixPlats(350,250,10,810,false,false,false,false,false,200,false,false);
   FixPlats(350,250,200,10,false,false,false,false,false,200,false,false);
   FixPlats(730,160,10,790,false,false,false,false,false,200,false,false);
   SideScrollSize(900,1200);
   StartLvl(0);
};
function Initialize$3() {
   ClearVARS();
   Text$4("There are 9 types","blue",10,550);
   Text$4("of platform","blue",10,570);
   Text$4("Go test and play on them","blue",150,620);
   Text$4("TIP: Try things you know,  like falls and jumps","blue",170,640);
   Text$4("Giveaways on what the platforms do are above","blue",650,630);
   Text$4("^","blue",850,610);
   Text$4("Giveaways on what the platforms do are right >>>","blue",550,235);
   Text$4("Pink: Vertical and you can't fall through it or wall jump off it","rgba(250,  100,  190,  0.9)",900,160);
   Text$4("Purple: Vertical and you can fall through it,  but not wall jump off it","rgba(190,  10,  120,  0.9)",900,210);
   Text$4("Grey: Vertical and you can fall through it and wall jump off it","rgb(100, 100, 100)",900,260);
   Text$4("Orange: Vertical and you can wall jump off it but can't fall through it","rgba(255, 80, 0, 0.9)",900,310);
   Text$4("Green: Horizontal and you can jump and fall through it","rgb(0, 50, 0)",900,360);
   Text$4("Black: Horizontal and you can't jump through it but can fall","rgb(0, 0, 0)",900,410);
   Text$4("Red: Horizontal and you can jump through it,  but not fall","rgb(100, 0, 0)",900,460);
   Text$4("Blue: Horizontal and you can't jump or fall through it","rgb(0, 0, 100)",900,510);
   Text$4("Brown: Can have any properties but will fall after you jump on it","rgb(90, 65, 35)",900,560);
   Text$4("NOTE: All horizontal platforms can be wall jumped off of and all vertical ones can't be jumped through","blue",680,110);
   InDoor(10,600);
   OutDoor(1000,600);
   FixPlats(0,660,1400,10,false,false,false,false,false,200,false,false);
   FixPlats(140,250,10,300,false,false,false,false,false,200,false,false);
   FixPlats(200,500,200,10,true,false,false,false,false,200,false,false);
   FixPlats(200,300,200,10,false,false,false,false,false,200,false,false);
   FixPlats(450,250,10,300,true,false,false,false,false,200,false,false);
   FixPlats(500,250,10,300,true,true,false,false,false,200,false,false);
   FixPlats(375,200,200,10,false,false,false,false,false,200,false,false);
   FixPlats(550,500,200,10,true,true,false,false,false,200,false,false);
   FixPlats(550,300,200,10,false,true,false,false,false,200,false,false);
   FixPlats(800,250,10,300,false,true,false,false,false,200,false,false);
   FixPlats(880,190,10,30,true,false,false,false,false,200,false,false);
   FixPlats(880,140,10,30,true,true,false,false,false,200,false,false);
   FixPlats(880,240,10,30,false,false,false,false,false,200,false,false);
   FixPlats(880,290,10,30,false,true,false,false,false,200,false,false);
   FixPlats(1150,370,200,10,true,false,false,false,false,200,false,false);
   FixPlats(850,420,200,10,false,false,false,false,false,200,false,false);
   FixPlats(1150,470,200,10,true,true,false,false,false,200,false,false);
   FixPlats(850,520,200,10,false,true,false,false,false,200,false,false);
   FixPlats(1150,570,200,10,false,false,true,false,false,200,false,false);
   SideScrollSize(1400,900);
   PercentofRands(0);
   PercentofVerticals(0);
   PercentofNoFalls(0);
   PercentofJumpThoughs(0);
   SpawnRands();
   StartLvl(0);
};
function Initialize$2() {
   ClearVARS();
   Text$4("Crumbling Platforms:","blue",90,70);
   Text$4("With speed you can jump from one to another","blue",90,180);
   Text$4("Crumbles can have any property so its always worth checking","blue",1000,550);
   Text$4("Use "+CodeToKeyName(ShootKey)+" to shoot stright","blue",700,40);
   Text$4("or you can aim with the mouse,  and click to shoot towards it","blue",550,80);
   Text$4("or you can click the shoot button on screen to shoot stright","blue",625,60);
   Text$4("Bullets will make crumble platforms fall","blue",750,100);
   InDoor(10,30);
   OutDoor(610,440);
   FixPlats(0,90,50,10,false,false,false,false,false,200,false,false);
   FixPlats(150,200,100,10,false,false,true,false,false,200,false,false);
   FixPlats(400,200,100,10,false,false,true,false,false,200,false,false);
   FixPlats(650,200,100,10,false,false,true,false,false,200,false,false);
   FixPlats(900,200,400,10,false,false,false,false,false,200,false,false);
   FixPlats(600,400,500,10,false,true,false,false,false,200,false,false);
   FixPlats(1100,200,10,310,false,false,false,false,false,200,false,false);
   FixPlats(600,400,10,110,false,false,false,false,false,200,false,false);
   FixPlats(600,500,350,10,false,true,false,false,false,200,false,false);
   FixPlats(950,500,150,10,true,false,true,false,false,200,false,false);
   FixPlats(1100,0,10,510,false,true,true,false,false,200,false,false);
   FixPlats(800,600,800,10,false,true,false,false,false,200,false,false);
   FixPlats(3000,160,130,10,false,false,false,false,false,200,false,false);
   SideScrollSize(4000,1500);
   StartLvl(0);
};
function Initialize$1() {
   ClearVARS();
   Text$4("All Platforms can move.","blue",90,100);
   InDoor(50,50);
   OutDoor(500,100);
   FixPlats(40,110,40,10,false,false,false,false,false,200,false,false);
   FixPlats(490,160,40,10,false,false,false,false,false,200,false,false);
   FixPlats(150,150,150,10,false,false,false,true,false,300,false,false);
   FixPlats(150,250,150,10,true,false,false,true,false,300,false,false);
   FixPlats(150,350,150,10,true,true,false,true,false,300,false,false);
   FixPlats(150,450,150,10,false,true,false,true,false,300,false,false);
   FixPlats(600,0,10,200,false,false,true,true,true,400,false,false);
   FixPlats(150,550,150,10,false,false,true,true,false,300,false,false);
   SideScrollSize(700,700);
   StartLvl(0);
};
function Initialize() {
   ClearVARS();
   Text$4("Enjoy the sidescrolling!","blue",90,500);
   InDoor(10,500);
   OutDoor(3000,500);
   FixPlats(0,560,4000,10,false,false,false,false,false,200,false,false);
   FixPlats(3000,160,130,10,false,false,false,false,false,200,false,false);
   SideScrollSize(4000,700);
   PercentofRands(3.1);
   PercentofVerticals(10);
   PercentofNoFalls(30);
   PercentofJumpThoughs(30);
   PercentofCrumble(20);
   PercentofMovings(10);
   PercentofMovesThatMoveX(70);
   MaxMoveForMoves(500);
   SpawnRands();
   StartLvl(0);
};
function Initialize$15() {
   ClearVARS();
   Text$4("This game also scrolls up and down; try to find the door!","blue",90,70);
   Text$4("Note how you cannot fall through most of the platforms, maybe the door is downwards then?","black",100,90);
   InDoor(50,50);
   OutDoor(100,1030);
   FixPlats(50,110,50,10,false,false,false,false,false,200,false,false);
   FixPlats(100,1090,60,10,false,false,false,false,false,200,false,false);
   SideScrollSize(1200,1500);
   PercentofRands(65);
   PercentofNoFalls(80);
   PercentofJumpThoughs(5);
   SpawnRands();
   StartLvl(0);
};
function Initialize$14() {
   ClearVARS();
   InDoor(1050,1050);
   OutDoor(50,500);
   FixPlats(50,560,50,10,false,false,false,false,false,200,false,false);
   FixPlats(1050,1110,60,10,false,false,false,false,false,200,false,false);
   SideScrollSize(1500,1500);
   PercentofRands(45);
   PercentofNoFalls(20);
   PercentofJumpThoughs(70);
   SpawnRands();
   StartLvl(0);
};
function Initialize$13() {
   ClearVARS();
   InDoor(750,1050);
   OutDoor(1050,500);
   FixPlats(1050,560,50,10,false,false,false,false,false,200,false,false);
   FixPlats(750,1110,60,10,false,false,false,false,false,200,false,false);
   SideScrollSize(2000,2000);
   PercentofRands(45);
   PercentofNoFalls(70);
   PercentofJumpThoughs(30);
   PercentofCrumble(90);
   SpawnRands();
   StartLvl(0);
};
function Initialize$12() {
   ClearVARS();
   InDoor(50,50);
   OutDoor(1050,1500);
   FixPlats(50,110,50,10,false,false,false,false,false,200,false,false);
   FixPlats(1040,1560,50,10,false,false,false,false,false,200,false,false);
   SideScrollSize(2000,2000);
   PercentofRands(60);
   PercentofNoFalls(20);
   PercentofJumpThoughs(20);
   PercentofMovings(55);
   PercentofMovesThatMoveX(30);
   MaxMoveForMoves(500);
   SpawnRands();
   StartLvl(0);
};
function Initialize$11() {
   ClearVARS();
   InDoor(750,1300);
   OutDoor(100,200);
   FixPlats(750,1360,50,10,false,false,false,false,false,200,false,false);
   FixPlats(100,260,60,10,false,false,false,false,false,200,false,false);
   SideScrollSize(1500,1500);
   PercentofRands(55);
   PercentofVerticals(50);
   PercentofNoFalls(70);
   PercentofJumpThoughs(30);
   PercentofCrumble(40);
   SpawnRands();
   StartLvl(0);
};
function Initialize$10() {
   ClearVARS();
   Text$4("Now try without wall jumps!","blue",750,1260);
   InDoor(750,1300);
   OutDoor(100,200);
   FixPlats(750,1360,50,10,false,false,false,false,false,200,false,false);
   FixPlats(100,260,60,10,false,false,false,false,false,200,false,false);
   SideScrollSize(1500,1500);
   PercentofRands(55);
   PercentofVerticals(50);
   PercentofNoFalls(70);
   PercentofJumpThoughs(30);
   PercentofCrumble(40);
   PercentofNoWallJumps(100);
   SpawnRands();
   StartLvl(0);
};
function Initialize$9() {
   ClearVARS();
   Text$4("This is a turret. It will aim and shoot","blue",10,80);
   Text$4("at you. Two shots will kill it!","blue",10,100);
   Text$4("If it is on a crumbling platform, shoot the platform to make it fall with it.","blue",10,120);
   InDoor(10,150);
   OutDoor(600,150);
   FixPlats(10,210,620,10,false,false,false,false,false,200,false,false);
   FixPlats(550,50,100,10,false,false,false,false,false,0,false,true);
   FixPlats(650,50,10,100,false,false,true,false,false,0,true,false);
   SideScrollSize(800,300);
   StartLvl(0);
};
function Initialize$8() {
   ClearVARS();
   InDoor(10,150);
   OutDoor(1350,1300);
   FixPlats(0,210,50,10,false,false,false,false,false,200,false,false);
   FixPlats(1340,1360,50,10,false,false,false,false,false,200,false,false);
   SideScrollSize(1500,1500);
   PercentofRands(75.391);
   PercentofVerticals(15);
   PercentofNoFalls(15);
   PercentofNoWallJumps(15);
   PercentofJumpThoughs(30);
   PercentofCrumble(20);
   PercentofMovings(5);
   PercentofMovesThatMoveX(50);
   MaxMoveForMoves(500);
   PercentofTurretsOnLeftorTop(0.55);
   PercentofTurretsOnRightorBottom(0.55);
   SpawnRands();
   StartLvl(0);
};
var vColorNames = [];
var vColorNames = ["aqua", "black", "blue", "fuchsia", "green", "gray", "lime", "maroon", "navy", "olive", "purple", "red", "silver", "teal", "white", "yellow"].slice();
var vColorValues = [];
var vColorValues = ["#0ff", "#000", "#00f", "#f0f", "#008000", "#808080", "#0f0", "#800000", "#000080", "#808000", "#800080", "#f00", "#c0c0c0", "#008080", "#fff", "#ff00"].slice();
var vCurrent = null;
var vScheduledControls = [];
var vScheduledCallbacks = [];
var vOnPerform = [];
var vPending = false;
var RegisterComponentsProc = null;
var DefaultDuration = 2;
var DefaultTiming = 1;
var vGetNow;
var vIsHighResolution = false;
var PressedCSSClass = "TW3Button_Pressed";
var Instance = null;
var UnlockedDoors = 0;
var MouseX = 0;
var MouseY = 0;
var screenWidth = 0;
var screenHeight = 0;
var gamemode = 0;
var maxX = 0;
var maxY = 0;
var AIS = 0;
var offsetX = 0;
var offsetY = 0;
var RANDOMPLATFORMS = 0;
var RANDOMVERTICALPLATFORMS = 0;
var RANDOMJUMPTHROUGHPLATFORMS = 0;
var RANDOMNOFALLPLATFORMS = 0;
var RANDOMNOWALLJUMPPLATFORMS = 0;
var RANDOMCRUMBLEPLATFORMS = 0;
var RANDOMMOVINGPLATFORMS = 0;
var RANDOMMOVINGRIGHTTOLEFT = 0;
var RANDOMMAXMOVE = 0;
var RANDOMTURRETLEFTTOP = 0;
var RANDOMTURRETRIGHTBOTTOM = 0;
var RightKey = 0;
var LeftKey = 0;
var JumpKey = 0;
var FallKey = 0;
var ShootKey = 0;
var EnterKey = 0;
var EscapeKey = 0;
var Level = 0;
var Player = null;
var Ai$1 = [];
var EntranceDoor = null;
var ExitDoor = null;
var FPlats = [];
var RandPlats = [];
var Bullets = [];
var gameText = [];
var Options$1 = [];
var ControlButtons = [];
var Controls = [];
var Turrets = [];
var Selector = null;
var i$11 = 0;
var n$3 = 0;
var i$12 = 0;
var Application$1 = null;
var LeftKeyChange = false;
var RightKeyChange = false;
var JumpKeyChange = false;
var FallKeyChange = false;
var ShootKeyChange = false;
var EnterKeyChange = false;
var EscapeKeyChange = false;
var Changed = 0;
var LastX = 0;
var LastY = 0;
var counter = 0;
var vVisibilityEventName = "";
var vVisibilityHiddenName = "";
var GForms = null;
var vCaptureControl = null;
var vCaptureInitialized = false;
var _FontDetect = null;
var vUniqueNumber = 0;
var vVendor = 0;
var vDriver = null;
var vRequestAnimFrame = null;
var vCancelAnimFrame = null;
var $Application = function() {
   try {
      Application$1 = TW3CustomApplication.Create$42($New(TApplication));
      TW3CustomApplication.RunApp(Application$1);
   } catch ($e) {
      var e$14 = $W($e);
      alert(e$14.FMessage)   }
}
$Application();
var $Application = function() {
   if (_FontDetect) {
      TObject.Free(_FontDetect);
   }
}
$Application();

 }
	window.onload = function () { bootstrap(); }
	</script>

</head>

<body></body>

</html>
